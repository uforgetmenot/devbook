<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MongoDB ä¼ä¸šçº§æ–‡æ¡£æ•°æ®åº“å®Œæ•´å­¦ä¹ æŒ‡å— - å¼€å‘</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">å¼€å‘</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="æœç´¢æœ¬ä¹¦å†…å®¹..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="mongodb-ä¼ä¸šçº§æ–‡æ¡£æ•°æ®åº“å®Œæ•´å­¦ä¹ æŒ‡å—"><a class="header" href="#mongodb-ä¼ä¸šçº§æ–‡æ¡£æ•°æ®åº“å®Œæ•´å­¦ä¹ æŒ‡å—">MongoDB ä¼ä¸šçº§æ–‡æ¡£æ•°æ®åº“å®Œæ•´å­¦ä¹ æŒ‡å—</a></h1>
<blockquote>
<p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> ä»MongoDBåˆå­¦è€…æˆé•¿ä¸ºä¼ä¸šçº§NoSQLæ¶æ„ä¸“å®¶ï¼ŒæŒæ¡æ–‡æ¡£æ•°æ®åº“è®¾è®¡ã€åˆ†ç‰‡é›†ç¾¤éƒ¨ç½²ã€èšåˆç®¡é“å’Œé«˜å¯ç”¨æ¶æ„æŠ€èƒ½</p>
</blockquote>
<h2 id="-å­¦ä¹ è·¯å¾„ä¸æŠ€èƒ½æ ‘"><a class="header" href="#-å­¦ä¹ è·¯å¾„ä¸æŠ€èƒ½æ ‘">ğŸ“š å­¦ä¹ è·¯å¾„ä¸æŠ€èƒ½æ ‘</a></h2>
<pre><code>åˆçº§å·¥ç¨‹å¸ˆ (0-1å¹´)     ä¸­çº§å·¥ç¨‹å¸ˆ (1-3å¹´)     é«˜çº§å·¥ç¨‹å¸ˆ (3-5å¹´)     æ¶æ„ä¸“å®¶ (5å¹´+)
â”œâ”€ æ–‡æ¡£æ¨¡å‹ç†è§£        â”œâ”€ ç´¢å¼•ä¼˜åŒ–ç­–ç•¥       â”œâ”€ åˆ†ç‰‡é›†ç¾¤è®¾è®¡       â”œâ”€ å¤šåŒºåŸŸéƒ¨ç½²
â”œâ”€ CRUDåŸºæœ¬æ“ä½œ        â”œâ”€ å‰¯æœ¬é›†é…ç½®         â”œâ”€ èšåˆç®¡é“ç²¾é€š       â”œâ”€ æ€§èƒ½æè‡´ä¼˜åŒ–
â”œâ”€ Pythoné©±åŠ¨ä½¿ç”¨      â”œâ”€ èšåˆæ¡†æ¶åº”ç”¨       â”œâ”€ æ•°æ®å»ºæ¨¡æœ€ä½³å®è·µ   â”œâ”€ å®¹é‡è§„åˆ’ä¸“å®¶
â”œâ”€ åŸºç¡€æŸ¥è¯¢ä¸æ›´æ–°      â”œâ”€ äº‹åŠ¡å¤„ç†           â”œâ”€ å®‰å…¨ä¸æƒé™ç®¡ç†     â”œâ”€ æ··åˆæ¶æ„è®¾è®¡
â””â”€ ç®€å•æ–‡æ¡£è®¾è®¡        â””â”€ æ€§èƒ½ç›‘æ§åŸºç¡€       â””â”€ å¤‡ä»½ä¸æ¢å¤æ–¹æ¡ˆ     â””â”€ æŠ€æœ¯æ–¹æ¡ˆå†³ç­–
</code></pre>
<h2 id="-æ ¸å¿ƒå­¦ä¹ æ¨¡å—"><a class="header" href="#-æ ¸å¿ƒå­¦ä¹ æ¨¡å—">ğŸ¯ æ ¸å¿ƒå­¦ä¹ æ¨¡å—</a></h2>
<h3 id="æ¨¡å—ä¸€mongodbåŸºç¡€ä¸æ–‡æ¡£æ¨¡å‹-ç¬¬1-2å‘¨"><a class="header" href="#æ¨¡å—ä¸€mongodbåŸºç¡€ä¸æ–‡æ¡£æ¨¡å‹-ç¬¬1-2å‘¨">æ¨¡å—ä¸€ï¼šMongoDBåŸºç¡€ä¸æ–‡æ¡£æ¨¡å‹ (ç¬¬1-2å‘¨)</a></h3>
<p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> ç†è§£æ–‡æ¡£æ•°æ®åº“æ¦‚å¿µå’ŒåŸºæœ¬CRUDæ“ä½œ
<strong>æŠ€èƒ½éªŒè¯ï¼š</strong> èƒ½å¤Ÿè®¾è®¡åˆç†çš„æ–‡æ¡£ç»“æ„å¹¶å®ŒæˆåŸºæœ¬æ•°æ®æ“ä½œ</p>
<h3 id="æ¨¡å—äºŒç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–-ç¬¬3-4å‘¨"><a class="header" href="#æ¨¡å—äºŒç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–-ç¬¬3-4å‘¨">æ¨¡å—äºŒï¼šç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ– (ç¬¬3-4å‘¨)</a></h3>
<p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> æŒæ¡å„ç±»ç´¢å¼•ç±»å‹å’ŒæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§
<strong>æŠ€èƒ½éªŒè¯ï¼š</strong> èƒ½å¤Ÿåˆ†ææ‰§è¡Œè®¡åˆ’å¹¶ä¼˜åŒ–æ…¢æŸ¥è¯¢</p>
<h3 id="æ¨¡å—ä¸‰å‰¯æœ¬é›†ä¸é«˜å¯ç”¨-ç¬¬5-6å‘¨"><a class="header" href="#æ¨¡å—ä¸‰å‰¯æœ¬é›†ä¸é«˜å¯ç”¨-ç¬¬5-6å‘¨">æ¨¡å—ä¸‰ï¼šå‰¯æœ¬é›†ä¸é«˜å¯ç”¨ (ç¬¬5-6å‘¨)</a></h3>
<p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> æ·±å…¥ç†è§£å‰¯æœ¬é›†æ¶æ„å’Œæ•…éšœè½¬ç§»æœºåˆ¶
<strong>æŠ€èƒ½éªŒè¯ï¼š</strong> èƒ½å¤Ÿæ­å»ºå’Œç®¡ç†ç”Ÿäº§çº§å‰¯æœ¬é›†</p>
<h3 id="æ¨¡å—å››åˆ†ç‰‡ä¸èšåˆç®¡é“-ç¬¬7-9å‘¨"><a class="header" href="#æ¨¡å—å››åˆ†ç‰‡ä¸èšåˆç®¡é“-ç¬¬7-9å‘¨">æ¨¡å—å››ï¼šåˆ†ç‰‡ä¸èšåˆç®¡é“ (ç¬¬7-9å‘¨)</a></h3>
<p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong> æŒæ¡åˆ†ç‰‡é›†ç¾¤æ¶æ„å’Œå¤æ‚èšåˆæ“ä½œ
<strong>æŠ€èƒ½éªŒè¯ï¼š</strong> èƒ½å¤Ÿè®¾è®¡å’Œå®æ–½å¤§è§„æ¨¡åˆ†ç‰‡æ–¹æ¡ˆ</p>
<hr />
<h2 id="1-mongodbæ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„"><a class="header" href="#1-mongodbæ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„">1. MongoDBæ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„</a></h2>
<h3 id="11-mongodbç®€ä»‹"><a class="header" href="#11-mongodbç®€ä»‹">1.1 MongoDBç®€ä»‹</a></h3>
<p><strong>MongoDB</strong> æ˜¯ä¸€ä¸ªåŸºäºæ–‡æ¡£çš„NoSQLæ•°æ®åº“ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>æ–‡æ¡£æ¨¡å‹</strong>ï¼šJSON/BSONæ ¼å¼ï¼Œçµæ´»schema</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šå†…å­˜è®¡ç®—ã€ä¸°å¯Œç´¢å¼•ã€é«˜æ•ˆæŸ¥è¯¢</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šå‰¯æœ¬é›†è‡ªåŠ¨æ•…éšœè½¬ç§»</li>
<li><strong>æ°´å¹³æ‰©å±•</strong>ï¼šè‡ªåŠ¨åˆ†ç‰‡ï¼Œæµ·é‡æ•°æ®æ”¯æŒ</li>
<li><strong>ä¸°å¯ŒåŠŸèƒ½</strong>ï¼šèšåˆç®¡é“ã€å…¨æ–‡æœç´¢ã€åœ°ç†ç©ºé—´æŸ¥è¯¢</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code>1. å†…å®¹ç®¡ç†ç³»ç»Ÿ - æ–‡ç« ã€è¯„è®ºã€å¤šåª’ä½“å†…å®¹
2. å®æ—¶åˆ†æ - æ—¥å¿—èšåˆã€ç”¨æˆ·è¡Œä¸ºåˆ†æ
3. ç§»åŠ¨åº”ç”¨ - ç”¨æˆ·é…ç½®ã€ä½ç½®æ•°æ®ã€ç¦»çº¿åŒæ­¥
4. ç‰©è”ç½‘ - è®¾å¤‡æ•°æ®é‡‡é›†ã€æ—¶åºæ•°æ®å­˜å‚¨
5. ç”µå•†å¹³å° - å•†å“ç›®å½•ã€è®¢å•ç®¡ç†ã€åº“å­˜è·Ÿè¸ª
6. ç¤¾äº¤ç½‘ç»œ - ç”¨æˆ·å…³ç³»ã€åŠ¨æ€æ¶ˆæ¯ã€æ¨èç³»ç»Ÿ
</code></pre>
<h3 id="12-å®‰è£…ä¸é…ç½®"><a class="header" href="#12-å®‰è£…ä¸é…ç½®">1.2 å®‰è£…ä¸é…ç½®</a></h3>
<p><strong>Linuxå®‰è£…ï¼ˆUbuntu/Debianï¼‰ï¼š</strong></p>
<pre><code class="language-bash">#!/bin/bash
# MongoDB 6.0+ å®‰è£…è„šæœ¬

# 1. å¯¼å…¥å…¬é’¥
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -

# 2. æ·»åŠ æº
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# 3. å®‰è£…MongoDB
sudo apt update
sudo apt install -y mongodb-org

# 4. å¯åŠ¨æœåŠ¡
sudo systemctl start mongod
sudo systemctl enable mongod

# 5. éªŒè¯å®‰è£…
mongosh --version
mongosh --eval "db.version()"

echo "âœ… MongoDB å®‰è£…å®Œæˆ"
</code></pre>
<p><strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆ/etc/mongod.confï¼‰ï¼š</strong></p>
<pre><code class="language-yaml"># å­˜å‚¨é…ç½®
storage:
  dbPath: /var/lib/mongodb
  journal:
    enabled: true
  engine: wiredTiger
  wiredTiger:
    engineConfig:
      cacheSizeGB: 2
      journalCompressor: snappy
    collectionConfig:
      blockCompressor: snappy

# ç½‘ç»œé…ç½®
net:
  port: 27017
  bindIp: 0.0.0.0  # ç”Ÿäº§ç¯å¢ƒåº”é™åˆ¶IP
  maxIncomingConnections: 1000

# å®‰å…¨é…ç½®
security:
  authorization: enabled
  keyFile: /var/lib/mongodb/keyfile  # å‰¯æœ¬é›†è®¤è¯

# æ“ä½œåˆ†æ
operationProfiling:
  mode: slowOp
  slowOpThresholdMs: 100

# æ—¥å¿—é…ç½®
systemLog:
  destination: file
  path: /var/log/mongodb/mongod.log
  logAppend: true
  timeStampFormat: iso8601-utc

# å‰¯æœ¬é›†é…ç½®
replication:
  replSetName: rs0

# åˆ†ç‰‡é…ç½®ï¼ˆConfig Serverï¼‰
# sharding:
#   clusterRole: configsvr
</code></pre>
<h2 id="2-æ–‡æ¡£æ¨¡å‹ä¸æ•°æ®ç±»å‹"><a class="header" href="#2-æ–‡æ¡£æ¨¡å‹ä¸æ•°æ®ç±»å‹">2. æ–‡æ¡£æ¨¡å‹ä¸æ•°æ®ç±»å‹</a></h2>
<h3 id="21-bsonæ•°æ®ç±»å‹"><a class="header" href="#21-bsonæ•°æ®ç±»å‹">2.1 BSONæ•°æ®ç±»å‹</a></h3>
<p>MongoDBä½¿ç”¨BSONï¼ˆBinary JSONï¼‰å­˜å‚¨æ–‡æ¡£ï¼š</p>
<div class="table-wrapper"><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><strong>String</strong></td><td>UTF-8å­—ç¬¦ä¸²</td><td><code>"Hello MongoDB"</code></td></tr>
<tr><td><strong>Integer</strong></td><td>32ä½æˆ–64ä½æ•´æ•°</td><td><code>123</code>, <code>NumberLong("9223372036854775807")</code></td></tr>
<tr><td><strong>Double</strong></td><td>64ä½æµ®ç‚¹æ•°</td><td><code>3.14159</code></td></tr>
<tr><td><strong>Boolean</strong></td><td>å¸ƒå°”å€¼</td><td><code>true</code>, <code>false</code></td></tr>
<tr><td><strong>Date</strong></td><td>æ¯«ç§’çº§æ—¶é—´æˆ³</td><td><code>ISODate("2024-01-15T10:30:00Z")</code></td></tr>
<tr><td><strong>ObjectId</strong></td><td>12å­—èŠ‚å”¯ä¸€æ ‡è¯†ç¬¦</td><td><code>ObjectId("507f1f77bcf86cd799439011")</code></td></tr>
<tr><td><strong>Array</strong></td><td>æ•°ç»„</td><td><code>[1, 2, 3]</code>, <code>["a", "b", "c"]</code></td></tr>
<tr><td><strong>Object</strong></td><td>åµŒå¥—æ–‡æ¡£</td><td><code>{name: "Alice", age: 30}</code></td></tr>
<tr><td><strong>Null</strong></td><td>ç©ºå€¼</td><td><code>null</code></td></tr>
<tr><td><strong>Binary</strong></td><td>äºŒè¿›åˆ¶æ•°æ®</td><td><code>BinData(0, "...")</code></td></tr>
<tr><td><strong>Decimal128</strong></td><td>é«˜ç²¾åº¦å°æ•°</td><td><code>NumberDecimal("123.45")</code></td></tr>
</tbody></table>
</div>
<h3 id="22-æ–‡æ¡£è®¾è®¡åŸåˆ™"><a class="header" href="#22-æ–‡æ¡£è®¾è®¡åŸåˆ™">2.2 æ–‡æ¡£è®¾è®¡åŸåˆ™</a></h3>
<p><strong>åµŒå¥— vs å¼•ç”¨ï¼š</strong></p>
<pre><code class="language-javascript">// åµŒå¥—æ–‡æ¡£ï¼ˆEmbeddingï¼‰- é€‚åˆä¸€å¯¹å°‘é‡å…³ç³»
{
  "_id": ObjectId("..."),
  "username": "alice",
  "email": "alice@example.com",
  "profile": {
    "firstName": "Alice",
    "lastName": "Smith",
    "birthday": ISODate("1990-01-15"),
    "address": {
      "street": "123 Main St",
      "city": "New York",
      "zip": "10001"
    }
  },
  "tags": ["developer", "python", "mongodb"]
}

// å¼•ç”¨æ–‡æ¡£ï¼ˆReferencingï¼‰- é€‚åˆä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šå…³ç³»
// ç”¨æˆ·æ–‡æ¡£
{
  "_id": ObjectId("user123"),
  "username": "alice",
  "email": "alice@example.com"
}

// è®¢å•æ–‡æ¡£ï¼ˆå¼•ç”¨ç”¨æˆ·ï¼‰
{
  "_id": ObjectId("order456"),
  "userId": ObjectId("user123"),
  "items": [
    {
      "productId": ObjectId("prod789"),
      "quantity": 2,
      "price": 29.99
    }
  ],
  "totalAmount": 59.98,
  "status": "shipped",
  "createdAt": ISODate("2024-01-15T10:30:00Z")
}
</code></pre>
<p><strong>è®¾è®¡æ¨¡å¼ï¼š</strong></p>
<pre><code class="language-javascript">// 1. æ‰©å±•å¼•ç”¨æ¨¡å¼ï¼ˆExtended Referenceï¼‰
// åœ¨è®¢å•ä¸­åµŒå…¥ç”¨æˆ·å…³é”®ä¿¡æ¯ï¼Œé¿å…é¢‘ç¹JOIN
{
  "_id": ObjectId("order456"),
  "user": {
    "userId": ObjectId("user123"),
    "username": "alice",
    "email": "alice@example.com"
  },
  "items": [...],
  "totalAmount": 59.98
}

// 2. å­é›†æ¨¡å¼ï¼ˆSubset Patternï¼‰
// å•†å“æ–‡æ¡£åªä¿ç•™æœ€æ–°çš„Næ¡è¯„è®º
{
  "_id": ObjectId("product789"),
  "name": "Laptop Pro",
  "price": 1299.99,
  "recentReviews": [  // æœ€æ–°10æ¡è¯„è®º
    {
      "userId": ObjectId("user001"),
      "rating": 5,
      "comment": "Excellent!",
      "date": ISODate("2024-01-14")
    }
    // ... æœ€å¤š10æ¡
  ],
  "reviewCount": 1523,  // æ€»è¯„è®ºæ•°
  "avgRating": 4.6
}

// 3. æ¡¶æ¨¡å¼ï¼ˆBucket Patternï¼‰
// æ—¶åºæ•°æ®æŒ‰æ—¶é—´æ®µèšåˆ
{
  "_id": ObjectId("bucket001"),
  "deviceId": "sensor123",
  "bucketDate": ISODate("2024-01-15T00:00:00Z"),
  "measurements": [
    {
      "timestamp": ISODate("2024-01-15T00:00:01Z"),
      "temperature": 23.5,
      "humidity": 60.2
    },
    // ... ä¸€å°æ—¶å†…çš„æ‰€æœ‰æµ‹é‡æ•°æ®
  ],
  "count": 3600,
  "avgTemp": 23.8
}
</code></pre>
<h2 id="3-crudæ“ä½œè¯¦è§£"><a class="header" href="#3-crudæ“ä½œè¯¦è§£">3. CRUDæ“ä½œè¯¦è§£</a></h2>
<h3 id="31-åˆ›å»ºæ“ä½œcreate"><a class="header" href="#31-åˆ›å»ºæ“ä½œcreate">3.1 åˆ›å»ºæ“ä½œï¼ˆCreateï¼‰</a></h3>
<pre><code class="language-javascript">// æ’å…¥å•ä¸ªæ–‡æ¡£
db.users.insertOne({
  username: "alice",
  email: "alice@example.com",
  age: 30,
  tags: ["developer", "python"],
  createdAt: new Date()
})

// æ’å…¥å¤šä¸ªæ–‡æ¡£
db.users.insertMany([
  {
    username: "bob",
    email: "bob@example.com",
    age: 25,
    createdAt: new Date()
  },
  {
    username: "charlie",
    email: "charlie@example.com",
    age: 35,
    createdAt: new Date()
  }
])
</code></pre>
<p><strong>Pythoné©±åŠ¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-python">from pymongo import MongoClient
from datetime import datetime
import uuid

# è¿æ¥MongoDB
client = MongoClient('mongodb://localhost:27017/')
db = client['myapp']
users = db['users']

# æ’å…¥æ–‡æ¡£
def create_user(username, email, age):
    """åˆ›å»ºç”¨æˆ·"""
    user = {
        'username': username,
        'email': email,
        'age': age,
        'uuid': str(uuid.uuid4()),
        'profile': {
            'bio': '',
            'avatar': None
        },
        'settings': {
            'notifications': True,
            'language': 'en'
        },
        'tags': [],
        'createdAt': datetime.utcnow(),
        'updatedAt': datetime.utcnow()
    }

    result = users.insert_one(user)
    print(f"âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼ŒID: {result.inserted_id}")
    return result.inserted_id

# æ‰¹é‡æ’å…¥
def bulk_insert_users(user_list):
    """æ‰¹é‡æ’å…¥ç”¨æˆ·"""
    documents = []
    for user_data in user_list:
        documents.append({
            'username': user_data['username'],
            'email': user_data['email'],
            'age': user_data['age'],
            'createdAt': datetime.utcnow()
        })

    result = users.insert_many(documents, ordered=False)  # æ— åºæ’å…¥ï¼Œéƒ¨åˆ†å¤±è´¥ä¸å½±å“å…¶ä»–
    print(f"âœ… æ‰¹é‡æ’å…¥å®Œæˆï¼ŒæˆåŠŸæ•°é‡: {len(result.inserted_ids)}")
    return result.inserted_ids
</code></pre>
<h3 id="32-æŸ¥è¯¢æ“ä½œread"><a class="header" href="#32-æŸ¥è¯¢æ“ä½œread">3.2 æŸ¥è¯¢æ“ä½œï¼ˆReadï¼‰</a></h3>
<pre><code class="language-javascript">// åŸºæœ¬æŸ¥è¯¢
db.users.find({ age: { $gte: 25 } })

// æŠ•å½±ï¼ˆåªè¿”å›æŒ‡å®šå­—æ®µï¼‰
db.users.find(
  { age: { $gte: 25 } },
  { username: 1, email: 1, _id: 0 }
)

// æ’åºå’Œé™åˆ¶
db.users.find({ age: { $gte: 25 } })
  .sort({ age: -1 })
  .limit(10)
  .skip(0)

// æ•°ç»„æŸ¥è¯¢
db.users.find({ tags: "developer" })  // åŒ…å«æ ‡ç­¾
db.users.find({ tags: { $all: ["developer", "python"] } })  // åŒ…å«æ‰€æœ‰æ ‡ç­¾

// åµŒå¥—æ–‡æ¡£æŸ¥è¯¢
db.users.find({ "profile.firstName": "Alice" })

// æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢
db.users.find({ email: { $regex: /^alice/i } })

// é€»è¾‘æ“ä½œç¬¦
db.users.find({
  $or: [
    { age: { $lt: 25 } },
    { tags: "senior" }
  ]
})
</code></pre>
<p><strong>Pythoné«˜çº§æŸ¥è¯¢ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-python">from pymongo import ASCENDING, DESCENDING
from datetime import datetime, timedelta

# å¤æ‚æŸ¥è¯¢
def search_users(filters=None, page=1, page_size=20):
    """åˆ†é¡µæœç´¢ç”¨æˆ·"""
    query = {}

    # æ„å»ºæŸ¥è¯¢æ¡ä»¶
    if filters:
        if filters.get('username'):
            query['username'] = {'$regex': filters['username'], '$options': 'i'}

        if filters.get('age_min') or filters.get('age_max'):
            query['age'] = {}
            if filters.get('age_min'):
                query['age']['$gte'] = filters['age_min']
            if filters.get('age_max'):
                query['age']['$lte'] = filters['age_max']

        if filters.get('tags'):
            query['tags'] = {'$in': filters['tags']}

        if filters.get('created_after'):
            query['createdAt'] = {'$gte': filters['created_after']}

    # æ‰§è¡ŒæŸ¥è¯¢
    skip = (page - 1) * page_size

    cursor = users.find(query) \
        .sort('createdAt', DESCENDING) \
        .skip(skip) \
        .limit(page_size)

    total_count = users.count_documents(query)

    results = list(cursor)

    return {
        'data': results,
        'total': total_count,
        'page': page,
        'page_size': page_size,
        'total_pages': (total_count + page_size - 1) // page_size
    }

# èšåˆç»Ÿè®¡
def get_user_statistics():
    """è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯"""
    pipeline = [
        {
            '$group': {
                '_id': None,
                'totalUsers': {'$sum': 1},
                'avgAge': {'$avg': '$age'},
                'minAge': {'$min': '$age'},
                'maxAge': {'$max': '$age'}
            }
        }
    ]

    result = list(users.aggregate(pipeline))
    return result[0] if result else None

# åœ°ç†ç©ºé—´æŸ¥è¯¢
def find_nearby_users(longitude, latitude, max_distance_km=10):
    """æŸ¥æ‰¾é™„è¿‘çš„ç”¨æˆ·"""
    query = {
        'location': {
            '$near': {
                '$geometry': {
                    'type': 'Point',
                    'coordinates': [longitude, latitude]
                },
                '$maxDistance': max_distance_km * 1000  # è½¬æ¢ä¸ºç±³
            }
        }
    }

    return list(users.find(query).limit(50))
</code></pre>
<h3 id="33-æ›´æ–°æ“ä½œupdate"><a class="header" href="#33-æ›´æ–°æ“ä½œupdate">3.3 æ›´æ–°æ“ä½œï¼ˆUpdateï¼‰</a></h3>
<pre><code class="language-javascript">// æ›´æ–°å•ä¸ªæ–‡æ¡£
db.users.updateOne(
  { username: "alice" },
  {
    $set: { age: 31 },
    $currentDate: { updatedAt: true }
  }
)

// æ›´æ–°å¤šä¸ªæ–‡æ¡£
db.users.updateMany(
  { age: { $lt: 25 } },
  { $set: { category: "young" } }
)

// åŸå­æ“ä½œç¬¦
db.users.updateOne(
  { username: "alice" },
  {
    $inc: { loginCount: 1 },  // é€’å¢
    $push: { tags: "mongodb" },  // æ•°ç»„æ·»åŠ 
    $addToSet: { tags: "nosql" },  // æ•°ç»„æ·»åŠ ï¼ˆå»é‡ï¼‰
    $pull: { tags: "old-tag" },  // æ•°ç»„ç§»é™¤
    $unset: { tempField: "" }  // åˆ é™¤å­—æ®µ
  }
)

// æ›´æ–°æˆ–æ’å…¥ï¼ˆUpsertï¼‰
db.users.updateOne(
  { username: "david" },
  {
    $set: {
      email: "david@example.com",
      age: 28
    },
    $setOnInsert: {
      createdAt: new Date()
    }
  },
  { upsert: true }
)
</code></pre>
<p><strong>Pythonæ›´æ–°æ“ä½œç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-python">from pymongo import ReturnDocument

# æ›´æ–°ç”¨æˆ·ä¿¡æ¯
def update_user_profile(user_id, profile_data):
    """æ›´æ–°ç”¨æˆ·èµ„æ–™"""
    from bson import ObjectId

    update_doc = {
        '$set': {
            'profile': profile_data,
            'updatedAt': datetime.utcnow()
        }
    }

    result = users.update_one(
        {'_id': ObjectId(user_id)},
        update_doc
    )

    return result.modified_count &gt; 0

# å¢åŠ è®¡æ•°å™¨
def increment_login_count(username):
    """å¢åŠ ç™»å½•æ¬¡æ•°"""
    result = users.update_one(
        {'username': username},
        {
            '$inc': {'loginCount': 1},
            '$set': {'lastLoginAt': datetime.utcnow()}
        }
    )

    return result.modified_count &gt; 0

# æ•°ç»„æ“ä½œ
def add_user_tag(username, tag):
    """æ·»åŠ ç”¨æˆ·æ ‡ç­¾ï¼ˆå»é‡ï¼‰"""
    result = users.update_one(
        {'username': username},
        {
            '$addToSet': {'tags': tag},
            '$set': {'updatedAt': datetime.utcnow()}
        }
    )

    return result.modified_count &gt; 0

def remove_user_tag(username, tag):
    """ç§»é™¤ç”¨æˆ·æ ‡ç­¾"""
    result = users.update_one(
        {'username': username},
        {
            '$pull': {'tags': tag},
            '$set': {'updatedAt': datetime.utcnow()}
        }
    )

    return result.modified_count &gt; 0

# å¤æ‚æ•°ç»„æ›´æ–°
def update_order_item(order_id, item_id, new_quantity):
    """æ›´æ–°è®¢å•ä¸­çš„å•†å“æ•°é‡"""
    from bson import ObjectId

    result = db.orders.update_one(
        {
            '_id': ObjectId(order_id),
            'items.itemId': ObjectId(item_id)
        },
        {
            '$set': {
                'items.$.quantity': new_quantity,
                'updatedAt': datetime.utcnow()
            }
        }
    )

    return result.modified_count &gt; 0

# FindAndModifyï¼ˆåŸå­æ“ä½œï¼‰
def get_next_sequence(sequence_name):
    """è·å–ä¸‹ä¸€ä¸ªåºåˆ—å·"""
    result = db.counters.find_one_and_update(
        {'_id': sequence_name},
        {'$inc': {'value': 1}},
        upsert=True,
        return_document=ReturnDocument.AFTER
    )

    return result['value']
</code></pre>
<h3 id="34-åˆ é™¤æ“ä½œdelete"><a class="header" href="#34-åˆ é™¤æ“ä½œdelete">3.4 åˆ é™¤æ“ä½œï¼ˆDeleteï¼‰</a></h3>
<pre><code class="language-javascript">// åˆ é™¤å•ä¸ªæ–‡æ¡£
db.users.deleteOne({ username: "alice" })

// åˆ é™¤å¤šä¸ªæ–‡æ¡£
db.users.deleteMany({ age: { $lt: 18 } })

// åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼ˆä¿ç•™é›†åˆï¼‰
db.users.deleteMany({})

// åˆ é™¤é›†åˆ
db.users.drop()
</code></pre>
<p><strong>Pythonåˆ é™¤æ“ä½œç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-python"># è½¯åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
def soft_delete_user(username):
    """è½¯åˆ é™¤ç”¨æˆ·"""
    result = users.update_one(
        {'username': username},
        {
            '$set': {
                'deleted': True,
                'deletedAt': datetime.utcnow()
            }
        }
    )

    return result.modified_count &gt; 0

# ç‰©ç†åˆ é™¤
def delete_user(username):
    """ç‰©ç†åˆ é™¤ç”¨æˆ·"""
    result = users.delete_one({'username': username})
    return result.deleted_count &gt; 0

# æ‰¹é‡åˆ é™¤è¿‡æœŸæ•°æ®
def delete_expired_sessions():
    """åˆ é™¤è¿‡æœŸä¼šè¯"""
    expiry_time = datetime.utcnow() - timedelta(days=30)

    result = db.sessions.delete_many({
        'expiresAt': {'$lt': expiry_time}
    })

    print(f"âœ… åˆ é™¤äº† {result.deleted_count} ä¸ªè¿‡æœŸä¼šè¯")
    return result.deleted_count
</code></pre>
<h2 id="4-ç´¢å¼•ä¼˜åŒ–"><a class="header" href="#4-ç´¢å¼•ä¼˜åŒ–">4. ç´¢å¼•ä¼˜åŒ–</a></h2>
<h3 id="41-ç´¢å¼•ç±»å‹"><a class="header" href="#41-ç´¢å¼•ç±»å‹">4.1 ç´¢å¼•ç±»å‹</a></h3>
<pre><code class="language-javascript">// 1. å•å­—æ®µç´¢å¼•
db.users.createIndex({ username: 1 })  // å‡åº
db.users.createIndex({ email: -1 })    // é™åº

// 2. å¤åˆç´¢å¼•
db.users.createIndex({ age: 1, username: 1 })

// 3. å¤šé”®ç´¢å¼•ï¼ˆæ•°ç»„å­—æ®µè‡ªåŠ¨ï¼‰
db.users.createIndex({ tags: 1 })

// 4. æ–‡æœ¬ç´¢å¼•ï¼ˆå…¨æ–‡æœç´¢ï¼‰
db.articles.createIndex({
  title: "text",
  content: "text"
}, {
  weights: {
    title: 10,
    content: 5
  },
  name: "articles_text_idx"
})

// 5. åœ°ç†ç©ºé—´ç´¢å¼•
db.locations.createIndex({ location: "2dsphere" })

// 6. å“ˆå¸Œç´¢å¼•
db.users.createIndex({ userId: "hashed" })

// 7. å”¯ä¸€ç´¢å¼•
db.users.createIndex(
  { email: 1 },
  { unique: true }
)

// 8. ç¨€ç–ç´¢å¼•
db.users.createIndex(
  { phone: 1 },
  { sparse: true }
)

// 9. TTLç´¢å¼•ï¼ˆè‡ªåŠ¨è¿‡æœŸï¼‰
db.sessions.createIndex(
  { expiresAt: 1 },
  { expireAfterSeconds: 0 }
)

// 10. éƒ¨åˆ†ç´¢å¼•
db.orders.createIndex(
  { status: 1, createdAt: -1 },
  {
    partialFilterExpression: {
      status: { $in: ["pending", "processing"] }
    }
  }
)
</code></pre>
<p><strong>Pythonç´¢å¼•ç®¡ç†ï¼š</strong></p>
<pre><code class="language-python"># åˆ›å»ºç´¢å¼•
def create_indexes():
    """åˆ›å»ºæ‰€æœ‰å¿…è¦çš„ç´¢å¼•"""

    # ç”¨æˆ·ç´¢å¼•
    users.create_index('username', unique=True)
    users.create_index('email', unique=True)
    users.create_index([('age', 1), ('createdAt', -1)])
    users.create_index('tags')

    # åœ°ç†ä½ç½®ç´¢å¼•
    users.create_index([('location', '2dsphere')])

    # è®¢å•ç´¢å¼•
    db.orders.create_index([
        ('userId', 1),
        ('status', 1),
        ('createdAt', -1)
    ])

    # TTLç´¢å¼•
    db.sessions.create_index(
        'expiresAt',
        expireAfterSeconds=0
    )

    # æ–‡æœ¬ç´¢å¼•
    db.articles.create_index([
        ('title', 'text'),
        ('content', 'text')
    ])

    print("âœ… æ‰€æœ‰ç´¢å¼•åˆ›å»ºå®Œæˆ")

# æŸ¥çœ‹ç´¢å¼•
def list_indexes(collection_name):
    """åˆ—å‡ºé›†åˆçš„æ‰€æœ‰ç´¢å¼•"""
    collection = db[collection_name]
    indexes = list(collection.list_indexes())

    for idx in indexes:
        print(f"ç´¢å¼•: {idx['name']}")
        print(f"  é”®: {idx['key']}")
        if 'unique' in idx:
            print(f"  å”¯ä¸€: {idx['unique']}")
        print()

    return indexes

# åˆ é™¤ç´¢å¼•
def drop_index(collection_name, index_name):
    """åˆ é™¤æŒ‡å®šç´¢å¼•"""
    collection = db[collection_name]
    collection.drop_index(index_name)
    print(f"âœ… ç´¢å¼• {index_name} å·²åˆ é™¤")

# åˆ†æç´¢å¼•ä½¿ç”¨
def analyze_index_usage():
    """åˆ†æç´¢å¼•ä½¿ç”¨æƒ…å†µ"""
    result = db.command('aggregate', 'users', pipeline=[
        {'$indexStats': {}}
    ])

    for idx_stat in result['cursor']['firstBatch']:
        print(f"ç´¢å¼•: {idx_stat['name']}")
        print(f"  è®¿é—®æ¬¡æ•°: {idx_stat['accesses']['ops']}")
        print(f"  æœ€åä½¿ç”¨: {idx_stat['accesses']['since']}")
        print()
</code></pre>
<h3 id="42-æŸ¥è¯¢ä¼˜åŒ–"><a class="header" href="#42-æŸ¥è¯¢ä¼˜åŒ–">4.2 æŸ¥è¯¢ä¼˜åŒ–</a></h3>
<pre><code class="language-python"># æ‰§è¡Œè®¡åˆ’åˆ†æ
def explain_query(query):
    """åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’"""
    explain_result = users.find(query).explain()

    # æå–å…³é”®ä¿¡æ¯
    execution_stats = explain_result.get('executionStats', {})

    print("æŸ¥è¯¢åˆ†æï¼š")
    print(f"  æ‰§è¡Œæ—¶é—´: {execution_stats.get('executionTimeMillis', 0)}ms")
    print(f"  æ‰«ææ–‡æ¡£æ•°: {execution_stats.get('totalDocsExamined', 0)}")
    print(f"  è¿”å›æ–‡æ¡£æ•°: {execution_stats.get('nReturned', 0)}")
    print(f"  ä½¿ç”¨ç´¢å¼•: {explain_result.get('queryPlanner', {}).get('winningPlan', {}).get('indexName', 'COLLSCAN')}")

    # æ£€æŸ¥æ˜¯å¦éœ€è¦ä¼˜åŒ–
    total_docs = execution_stats.get('totalDocsExamined', 0)
    returned_docs = execution_stats.get('nReturned', 0)

    if total_docs &gt; returned_docs * 10:
        print("âš ï¸  è­¦å‘Šï¼šæŸ¥è¯¢æ•ˆç‡ä½ï¼Œå»ºè®®ä¼˜åŒ–ç´¢å¼•")

    return explain_result

# ç¤ºä¾‹ï¼šä¼˜åŒ–å‰åå¯¹æ¯”
def optimize_query_example():
    """æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹"""

    # ä¼˜åŒ–å‰ï¼šæ— ç´¢å¼•
    print("ä¼˜åŒ–å‰ï¼š")
    query = {'age': {'$gte': 25}, 'tags': 'developer'}
    explain_query(query)

    # åˆ›å»ºå¤åˆç´¢å¼•
    users.create_index([('age', 1), ('tags', 1)])

    # ä¼˜åŒ–åï¼šä½¿ç”¨ç´¢å¼•
    print("\nä¼˜åŒ–åï¼š")
    explain_query(query)

# åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
def optimized_pagination(query, page, page_size):
    """ä¼˜åŒ–çš„åˆ†é¡µæŸ¥è¯¢"""
    # é¿å…ä½¿ç”¨skipè¿›è¡Œæ·±åº¦åˆ†é¡µ

    if page == 1:
        # ç¬¬ä¸€é¡µ
        cursor = users.find(query) \
            .sort('_id', -1) \
            .limit(page_size)
    else:
        # åç»­é¡µï¼šä½¿ç”¨èŒƒå›´æŸ¥è¯¢ä»£æ›¿skip
        # éœ€è¦ä¼ å…¥ä¸Šä¸€é¡µçš„æœ€åä¸€ä¸ª_id
        last_id = request_args.get('last_id')  # ä»è¯·æ±‚å‚æ•°è·å–

        if last_id:
            from bson import ObjectId
            query['_id'] = {'$lt': ObjectId(last_id)}

        cursor = users.find(query) \
            .sort('_id', -1) \
            .limit(page_size)

    results = list(cursor)

    # è¿”å›æœ€åä¸€ä¸ªæ–‡æ¡£çš„_idï¼Œç”¨äºä¸‹ä¸€é¡µæŸ¥è¯¢
    last_id = str(results[-1]['_id']) if results else None

    return {
        'data': results,
        'last_id': last_id,
        'has_more': len(results) == page_size
    }
</code></pre>
<h2 id="5-èšåˆç®¡é“aggregation-pipeline"><a class="header" href="#5-èšåˆç®¡é“aggregation-pipeline">5. èšåˆç®¡é“ï¼ˆAggregation Pipelineï¼‰</a></h2>
<h3 id="51-èšåˆæ¡†æ¶åŸºç¡€"><a class="header" href="#51-èšåˆæ¡†æ¶åŸºç¡€">5.1 èšåˆæ¡†æ¶åŸºç¡€</a></h3>
<pre><code class="language-javascript">// åŸºæœ¬èšåˆç¤ºä¾‹
db.orders.aggregate([
  // é˜¶æ®µ1ï¼šåŒ¹é…
  { $match: { status: "completed" } },

  // é˜¶æ®µ2ï¼šåˆ†ç»„ç»Ÿè®¡
  { $group: {
    _id: "$userId",
    totalAmount: { $sum: "$amount" },
    orderCount: { $sum: 1 },
    avgAmount: { $avg: "$amount" }
  }},

  // é˜¶æ®µ3ï¼šæ’åº
  { $sort: { totalAmount: -1 } },

  // é˜¶æ®µ4ï¼šé™åˆ¶ç»“æœ
  { $limit: 10 }
])
</code></pre>
<p><strong>Pythonèšåˆç®¡é“å®æˆ˜ï¼š</strong></p>
<pre><code class="language-python"># ç”¨æˆ·æ¶ˆè´¹ç»Ÿè®¡
def get_user_spending_report():
    """è·å–ç”¨æˆ·æ¶ˆè´¹æŠ¥å‘Š"""
    pipeline = [
        # 1. åŒ¹é…å·²å®Œæˆè®¢å•
        {
            '$match': {
                'status': 'completed',
                'createdAt': {
                    '$gte': datetime.utcnow() - timedelta(days=30)
                }
            }
        },

        # 2. å…³è”ç”¨æˆ·ä¿¡æ¯
        {
            '$lookup': {
                'from': 'users',
                'localField': 'userId',
                'foreignField': '_id',
                'as': 'user'
            }
        },

        # 3. å±•å¼€ç”¨æˆ·æ•°ç»„
        {
            '$unwind': '$user'
        },

        # 4. åˆ†ç»„ç»Ÿè®¡
        {
            '$group': {
                '_id': '$userId',
                'username': {'$first': '$user.username'},
                'email': {'$first': '$user.email'},
                'totalSpent': {'$sum': '$totalAmount'},
                'orderCount': {'$sum': 1},
                'avgOrderValue': {'$avg': '$totalAmount'},
                'lastOrderDate': {'$max': '$createdAt'}
            }
        },

        # 5. æ·»åŠ è®¡ç®—å­—æ®µ
        {
            '$addFields': {
                'customerTier': {
                    '$switch': {
                        'branches': [
                            {'case': {'$gte': ['$totalSpent', 1000]}, 'then': 'VIP'},
                            {'case': {'$gte': ['$totalSpent', 500]}, 'then': 'Gold'},
                            {'case': {'$gte': ['$totalSpent', 100]}, 'then': 'Silver'}
                        ],
                        'default': 'Bronze'
                    }
                }
            }
        },

        # 6. æ’åº
        {
            '$sort': {'totalSpent': -1}
        },

        # 7. é™åˆ¶ç»“æœ
        {
            '$limit': 100
        },

        # 8. æŠ•å½±ï¼ˆé€‰æ‹©è¿”å›å­—æ®µï¼‰
        {
            '$project': {
                '_id': 0,
                'userId': '$_id',
                'username': 1,
                'email': 1,
                'totalSpent': {'$round': ['$totalSpent', 2]},
                'orderCount': 1,
                'avgOrderValue': {'$round': ['$avgOrderValue', 2]},
                'customerTier': 1,
                'lastOrderDate': 1
            }
        }
    ]

    results = list(db.orders.aggregate(pipeline))
    return results

# å•†å“é”€å”®åˆ†æ
def get_product_sales_analysis(days=30):
    """å•†å“é”€å”®åˆ†æ"""
    start_date = datetime.utcnow() - timedelta(days=days)

    pipeline = [
        # 1. åŒ¹é…æ—¶é—´èŒƒå›´
        {
            '$match': {
                'status': 'completed',
                'createdAt': {'$gte': start_date}
            }
        },

        # 2. å±•å¼€è®¢å•é¡¹ç›®
        {
            '$unwind': '$items'
        },

        # 3. å…³è”å•†å“ä¿¡æ¯
        {
            '$lookup': {
                'from': 'products',
                'localField': 'items.productId',
                'foreignField': '_id',
                'as': 'product'
            }
        },

        # 4. å±•å¼€å•†å“æ•°ç»„
        {
            '$unwind': '$product'
        },

        # 5. åˆ†ç»„ç»Ÿè®¡
        {
            '$group': {
                '_id': '$items.productId',
                'productName': {'$first': '$product.name'},
                'category': {'$first': '$product.category'},
                'totalQuantity': {'$sum': '$items.quantity'},
                'totalRevenue': {'$sum': {
                    '$multiply': ['$items.quantity', '$items.price']
                }},
                'avgPrice': {'$avg': '$items.price'},
                'orderCount': {'$sum': 1}
            }
        },

        # 6. è®¡ç®—æ’å
        {
            '$setWindowFields': {
                'sortBy': {'totalRevenue': -1},
                'output': {
                    'revenueRank': {'$rank': {}},
                    'quantityRank': {
                        '$rank': {},
                        'sortBy': {'totalQuantity': -1}
                    }
                }
            }
        },

        # 7. æ’åº
        {
            '$sort': {'totalRevenue': -1}
        }
    ]

    results = list(db.orders.aggregate(pipeline))
    return results

# æ—¶é—´åºåˆ—èšåˆ
def get_daily_sales_trend(days=30):
    """æ¯æ—¥é”€å”®è¶‹åŠ¿"""
    start_date = datetime.utcnow() - timedelta(days=days)

    pipeline = [
        {
            '$match': {
                'status': 'completed',
                'createdAt': {'$gte': start_date}
            }
        },
        {
            '$group': {
                '_id': {
                    '$dateToString': {
                        'format': '%Y-%m-%d',
                        'date': '$createdAt'
                    }
                },
                'totalRevenue': {'$sum': '$totalAmount'},
                'orderCount': {'$sum': 1},
                'uniqueUsers': {'$addToSet': '$userId'}
            }
        },
        {
            '$project': {
                'date': '$_id',
                'totalRevenue': {'$round': ['$totalRevenue', 2]},
                'orderCount': 1,
                'uniqueUsers': {'$size': '$uniqueUsers'},
                'avgOrderValue': {
                    '$round': [
                        {'$divide': ['$totalRevenue', '$orderCount']},
                        2
                    ]
                }
            }
        },
        {
            '$sort': {'date': 1}
        }
    ]

    results = list(db.orders.aggregate(pipeline))
    return results
</code></pre>
<h2 id="6-å‰¯æœ¬é›†replica-setä¸é«˜å¯ç”¨"><a class="header" href="#6-å‰¯æœ¬é›†replica-setä¸é«˜å¯ç”¨">6. å‰¯æœ¬é›†ï¼ˆReplica Setï¼‰ä¸é«˜å¯ç”¨</a></h2>
<h3 id="61-å‰¯æœ¬é›†æ¶æ„"><a class="header" href="#61-å‰¯æœ¬é›†æ¶æ„">6.1 å‰¯æœ¬é›†æ¶æ„</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰¯æœ¬é›†æ¶æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ Primary  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚Secondary â”‚                â”‚
â”‚   â”‚  (ä¸»èŠ‚ç‚¹) â”‚         â”‚ (ä»èŠ‚ç‚¹1) â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚        â”‚                                             â”‚
â”‚        â”‚                                             â”‚
â”‚        â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚Secondary â”‚                                      â”‚
â”‚   â”‚ (ä»èŠ‚ç‚¹2) â”‚                                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                       â”‚
â”‚  ç‰¹æ€§ï¼š                                              â”‚
â”‚  - è‡ªåŠ¨æ•…éšœè½¬ç§»                                       â”‚
â”‚  - æ•°æ®å†—ä½™å¤‡ä»½                                       â”‚
â”‚  - è¯»å†™åˆ†ç¦»                                          â”‚
â”‚  - æœ€å¤š50ä¸ªèŠ‚ç‚¹ï¼ˆ7ä¸ªæŠ•ç¥¨èŠ‚ç‚¹ï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å‰¯æœ¬é›†éƒ¨ç½²ï¼š</strong></p>
<pre><code class="language-bash">#!/bin/bash
# å‰¯æœ¬é›†éƒ¨ç½²è„šæœ¬

# 1. ç”Ÿæˆå¯†é’¥æ–‡ä»¶
openssl rand -base64 756 &gt; /var/lib/mongodb/keyfile
chmod 400 /var/lib/mongodb/keyfile
chown mongodb:mongodb /var/lib/mongodb/keyfile

# 2. é…ç½®å„èŠ‚ç‚¹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹é…ç½®ç±»ä¼¼ï¼‰
cat &gt; /etc/mongod-rs0-1.conf &lt;&lt;'EOF'
storage:
  dbPath: /var/lib/mongodb/rs0-1
  journal:
    enabled: true

net:
  port: 27017
  bindIp: 0.0.0.0

security:
  authorization: enabled
  keyFile: /var/lib/mongodb/keyfile

replication:
  replSetName: rs0
EOF

# 3. å¯åŠ¨å„èŠ‚ç‚¹
mongod --config /etc/mongod-rs0-1.conf &amp;
mongod --config /etc/mongod-rs0-2.conf &amp;
mongod --config /etc/mongod-rs0-3.conf &amp;

# 4. åˆå§‹åŒ–å‰¯æœ¬é›†ï¼ˆè¿æ¥åˆ°ä»»æ„èŠ‚ç‚¹ï¼‰
mongosh --port 27017 &lt;&lt;'INIT'
rs.initiate({
  _id: "rs0",
  members: [
    { _id: 0, host: "mongo1.example.com:27017", priority: 2 },
    { _id: 1, host: "mongo2.example.com:27017", priority: 1 },
    { _id: 2, host: "mongo3.example.com:27017", priority: 1 }
  ]
})
INIT

echo "âœ… å‰¯æœ¬é›†éƒ¨ç½²å®Œæˆ"
</code></pre>
<p><strong>Pythonè¿æ¥å‰¯æœ¬é›†ï¼š</strong></p>
<pre><code class="language-python">from pymongo import MongoClient
from pymongo.read_preferences import ReadPreference

# è¿æ¥å‰¯æœ¬é›†
client = MongoClient(
    'mongodb://mongo1.example.com:27017,mongo2.example.com:27017,mongo3.example.com:27017/',
    replicaSet='rs0',
    username='admin',
    password='password',
    authSource='admin',
    readPreference='secondaryPreferred'  # ä¼˜å…ˆä»ä»èŠ‚ç‚¹è¯»å–
)

db = client['myapp']

# è¯»å†™åˆ†ç¦»ç¤ºä¾‹
def write_to_primary():
    """å†™å…¥ä¸»èŠ‚ç‚¹"""
    users = db.get_collection(
        'users',
        read_preference=ReadPreference.PRIMARY
    )

    result = users.insert_one({
        'username': 'alice',
        'email': 'alice@example.com'
    })

    return result.inserted_id

def read_from_secondary():
    """ä»ä»èŠ‚ç‚¹è¯»å–"""
    users = db.get_collection(
        'users',
        read_preference=ReadPreference.SECONDARY
    )

    return list(users.find().limit(100))

# å‰¯æœ¬é›†çŠ¶æ€ç›‘æ§
def check_replica_status():
    """æ£€æŸ¥å‰¯æœ¬é›†çŠ¶æ€"""
    status = db.command('replSetGetStatus')

    print("å‰¯æœ¬é›†çŠ¶æ€ï¼š")
    for member in status['members']:
        print(f"  èŠ‚ç‚¹: {member['name']}")
        print(f"  çŠ¶æ€: {member['stateStr']}")
        print(f"  å¥åº·: {'æ­£å¸¸' if member['health'] == 1 else 'å¼‚å¸¸'}")
        print()

    return status
</code></pre>
<h2 id="7-æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§"><a class="header" href="#7-æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§">7. æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§</a></h2>
<h3 id="71-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a class="header" href="#71-æ€§èƒ½ä¼˜åŒ–æŠ€å·§">7.1 æ€§èƒ½ä¼˜åŒ–æŠ€å·§</a></h3>
<pre><code class="language-python"># æ‰¹é‡æ“ä½œä¼˜åŒ–
def bulk_insert_users(user_list):
    """æ‰¹é‡æ’å…¥ä¼˜åŒ–"""
    from pymongo import InsertOne

    # ä½¿ç”¨bulk_writeæé«˜æ€§èƒ½
    operations = [
        InsertOne({
            'username': user['username'],
            'email': user['email'],
            'createdAt': datetime.utcnow()
        })
        for user in user_list
    ]

    result = users.bulk_write(operations, ordered=False)
    print(f"âœ… æ‰¹é‡æ’å…¥å®Œæˆ: {result.inserted_count} æ¡")
    return result

# è¿æ¥æ± é…ç½®
from pymongo import MongoClient

client = MongoClient(
    'mongodb://localhost:27017/',
    maxPoolSize=100,  # æœ€å¤§è¿æ¥æ•°
    minPoolSize=10,   # æœ€å°è¿æ¥æ•°
    maxIdleTimeMS=30000,  # ç©ºé—²è¿æ¥è¶…æ—¶
    waitQueueTimeoutMS=5000,  # ç­‰å¾…è¶…æ—¶
    serverSelectionTimeoutMS=5000  # æœåŠ¡å™¨é€‰æ‹©è¶…æ—¶
)

# æŸ¥è¯¢ä¼˜åŒ–
def optimized_query_with_hints():
    """ä½¿ç”¨ç´¢å¼•æç¤ºä¼˜åŒ–æŸ¥è¯¢"""

    # å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç´¢å¼•
    results = users.find(
        {'age': {'$gte': 25}},
        hint=[('age', 1), ('createdAt', -1)]
    ).limit(100)

    return list(results)

# æŠ•å½±ä¼˜åŒ–ï¼ˆåªè¿”å›éœ€è¦çš„å­—æ®µï¼‰
def query_with_projection():
    """ä½¿ç”¨æŠ•å½±å‡å°‘æ•°æ®ä¼ è¾“"""

    results = users.find(
        {'age': {'$gte': 25}},
        {'username': 1, 'email': 1, '_id': 0}
    ).limit(100)

    return list(results)

# èšåˆä¼˜åŒ–
def optimized_aggregation():
    """ä¼˜åŒ–èšåˆæŸ¥è¯¢"""

    pipeline = [
        # 1. å°½æ—©è¿‡æ»¤ï¼ˆå‡å°‘å¤„ç†æ•°æ®é‡ï¼‰
        {'$match': {'status': 'active'}},

        # 2. å°½æ—©æŠ•å½±ï¼ˆå‡å°‘å­—æ®µï¼‰
        {'$project': {
            'userId': 1,
            'totalAmount': 1,
            'createdAt': 1
        }},

        # 3. ä½¿ç”¨ç´¢å¼•çš„æ’åº
        {'$sort': {'createdAt': -1}},

        # 4. é™åˆ¶ç»“æœ
        {'$limit': 1000}
    ]

    return list(db.orders.aggregate(pipeline, allowDiskUse=True))
</code></pre>
<h3 id="72-ç›‘æ§ä¸è¯Šæ–­"><a class="header" href="#72-ç›‘æ§ä¸è¯Šæ–­">7.2 ç›‘æ§ä¸è¯Šæ–­</a></h3>
<pre><code class="language-python"># æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯
def get_database_stats():
    """è·å–æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯"""
    stats = db.command('dbStats')

    print("æ•°æ®åº“ç»Ÿè®¡ï¼š")
    print(f"  é›†åˆæ•°: {stats['collections']}")
    print(f"  æ–‡æ¡£æ•°: {stats['objects']}")
    print(f"  æ•°æ®å¤§å°: {stats['dataSize'] / 1024 / 1024:.2f} MB")
    print(f"  å­˜å‚¨å¤§å°: {stats['storageSize'] / 1024 / 1024:.2f} MB")
    print(f"  ç´¢å¼•æ•°: {stats['indexes']}")
    print(f"  ç´¢å¼•å¤§å°: {stats['indexSize'] / 1024 / 1024:.2f} MB")

    return stats

# æ…¢æŸ¥è¯¢åˆ†æ
def get_slow_queries():
    """è·å–æ…¢æŸ¥è¯¢"""
    # å¯ç”¨æ€§èƒ½åˆ†æ
    db.set_profiling_level(1, slow_ms=100)  # è®°å½•è¶…è¿‡100msçš„æŸ¥è¯¢

    # æŸ¥è¯¢æ…¢æŸ¥è¯¢æ—¥å¿—
    slow_queries = db.system.profile.find({
        'millis': {'$gt': 100}
    }).sort('ts', -1).limit(10)

    print("æ…¢æŸ¥è¯¢TOP 10ï¼š")
    for query in slow_queries:
        print(f"  æ‰§è¡Œæ—¶é—´: {query['millis']}ms")
        print(f"  æ“ä½œ: {query['op']}")
        print(f"  å‘½åç©ºé—´: {query['ns']}")
        print(f"  æŸ¥è¯¢: {query.get('command', {})}")
        print()

    return list(slow_queries)
</code></pre>
<h2 id="8-å­¦ä¹ éªŒè¯ä¸æ€»ç»“"><a class="header" href="#8-å­¦ä¹ éªŒè¯ä¸æ€»ç»“">8. å­¦ä¹ éªŒè¯ä¸æ€»ç»“</a></h2>
<h3 id="81-æŠ€èƒ½éªŒè¯æ¸…å•"><a class="header" href="#81-æŠ€èƒ½éªŒè¯æ¸…å•">8.1 æŠ€èƒ½éªŒè¯æ¸…å•</a></h3>
<p><strong>åˆçº§éªŒè¯ï¼ˆå¿…é¡»100%å®Œæˆï¼‰ï¼š</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
ç†è§£æ–‡æ¡£æ¨¡å‹å’ŒBSONæ•°æ®ç±»å‹</li>
<li><input disabled="" type="checkbox"/>
æŒæ¡åŸºæœ¬CRUDæ“ä½œ</li>
<li><input disabled="" type="checkbox"/>
èƒ½å¤Ÿåˆ›å»ºå’Œä½¿ç”¨åŸºæœ¬ç´¢å¼•</li>
<li><input disabled="" type="checkbox"/>
ç†è§£åµŒå¥—æ–‡æ¡£å’Œæ•°ç»„æ“ä½œ</li>
<li><input disabled="" type="checkbox"/>
æŒæ¡åŸºæœ¬èšåˆæ“ä½œ</li>
</ul>
<p><strong>ä¸­çº§éªŒè¯ï¼ˆå¿…é¡»80%å®Œæˆï¼‰ï¼š</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
ç†Ÿç»ƒä½¿ç”¨èšåˆç®¡é“è¿›è¡Œå¤æ‚æŸ¥è¯¢</li>
<li><input disabled="" type="checkbox"/>
ç†è§£å¹¶é…ç½®å‰¯æœ¬é›†</li>
<li><input disabled="" type="checkbox"/>
æŒæ¡ç´¢å¼•ä¼˜åŒ–ç­–ç•¥</li>
<li><input disabled="" type="checkbox"/>
èƒ½å¤Ÿå¤„ç†å¤šæ–‡æ¡£äº‹åŠ¡</li>
<li><input disabled="" type="checkbox"/>
æŒæ¡æŸ¥è¯¢æ€§èƒ½åˆ†æ</li>
</ul>
<p><strong>é«˜çº§éªŒè¯ï¼ˆå¿…é¡»70%å®Œæˆï¼‰ï¼š</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
è®¾è®¡å’Œå®æ–½åˆ†ç‰‡é›†ç¾¤</li>
<li><input disabled="" type="checkbox"/>
ä¼˜åŒ–å¤§è§„æ¨¡æ•°æ®æŸ¥è¯¢æ€§èƒ½</li>
<li><input disabled="" type="checkbox"/>
å®ç°é«˜å¯ç”¨æ¶æ„æ–¹æ¡ˆ</li>
<li><input disabled="" type="checkbox"/>
æŒæ¡å¤‡ä»½æ¢å¤ç­–ç•¥</li>
<li><input disabled="" type="checkbox"/>
è¿›è¡Œå®¹é‡è§„åˆ’å’Œæ€§èƒ½è°ƒä¼˜</li>
</ul>
<h3 id="82-æœ€ä½³å®è·µæ€»ç»“"><a class="header" href="#82-æœ€ä½³å®è·µæ€»ç»“">8.2 æœ€ä½³å®è·µæ€»ç»“</a></h3>
<ol>
<li><strong>æ–‡æ¡£è®¾è®¡</strong>ï¼šåˆç†ä½¿ç”¨åµŒå¥—å’Œå¼•ç”¨ï¼Œé¿å…è¿‡æ·±åµŒå¥—</li>
<li><strong>ç´¢å¼•ç­–ç•¥</strong>ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢åˆ›å»ºåˆé€‚ç´¢å¼•ï¼Œå®šæœŸå®¡æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ</li>
<li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šä½¿ç”¨æŠ•å½±å‡å°‘æ•°æ®ä¼ è¾“ï¼Œé¿å…å…¨è¡¨æ‰«æ</li>
<li><strong>è¿æ¥ç®¡ç†</strong>ï¼šä½¿ç”¨è¿æ¥æ± ï¼Œåˆç†è®¾ç½®è¿æ¥æ•°</li>
<li><strong>äº‹åŠ¡ä½¿ç”¨</strong>ï¼šä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨äº‹åŠ¡ï¼Œä¿æŒäº‹åŠ¡ç®€çŸ­</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šç›‘æ§æ…¢æŸ¥è¯¢ã€å¤åˆ¶å»¶è¿Ÿã€ç£ç›˜ç©ºé—´</li>
<li><strong>å¤‡ä»½ç­–ç•¥</strong>ï¼šå®šæœŸå¤‡ä»½ï¼Œæµ‹è¯•æ¢å¤æµç¨‹</li>
<li><strong>å®‰å…¨åŠ å›º</strong>ï¼šå¯ç”¨è®¤è¯ï¼Œé™åˆ¶ç½‘ç»œè®¿é—®ï¼Œä½¿ç”¨SSL</li>
</ol>
<h3 id="83-å­¦ä¹ èµ„æº"><a class="header" href="#83-å­¦ä¹ èµ„æº">8.3 å­¦ä¹ èµ„æº</a></h3>
<p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong></p>
<ul>
<li>MongoDBå®˜æ–¹æ–‡æ¡£: https://docs.mongodb.com/</li>
<li>MongoDBå¤§å­¦: https://university.mongodb.com/</li>
</ul>
<p><strong>æ¨èä¹¦ç±ï¼š</strong></p>
<ul>
<li>ã€ŠMongoDBæƒå¨æŒ‡å—ã€‹ï¼ˆç¬¬3ç‰ˆï¼‰</li>
<li>ã€ŠMongoDBå®æˆ˜ã€‹ï¼ˆç¬¬2ç‰ˆï¼‰</li>
<li>ã€ŠMongoDBæ€§èƒ½è°ƒä¼˜ã€‹</li>
</ul>
<p><strong>åœ¨çº¿èµ„æºï¼š</strong></p>
<ul>
<li>MongoDBä¸­æ–‡ç¤¾åŒº: https://mongoing.com/</li>
<li>Stack Overflow MongoDBæ ‡ç­¾</li>
</ul>
<hr />
<p>é€šè¿‡ç³»ç»Ÿå­¦ä¹ MongoDBï¼Œä½ å°†èƒ½å¤Ÿï¼š
âœ… è®¾è®¡çµæ´»çš„æ–‡æ¡£æ•°æ®æ¨¡å‹
âœ… æ„å»ºé«˜æ€§èƒ½çš„NoSQLåº”ç”¨
âœ… å®æ–½ä¼ä¸šçº§é«˜å¯ç”¨æ¶æ„
âœ… ä¼˜åŒ–å¤§è§„æ¨¡æ•°æ®æŸ¥è¯¢
âœ… èƒœä»»MongoDB DBAå·¥ä½œ</p>
<p><strong>æŒç»­å­¦ä¹ ï¼Œä¸æ–­å®è·µï¼Œæˆä¸ºMongoDBä¸“å®¶ï¼</strong> ğŸš€</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ç¼–ç¨‹/database/02-redis.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ç¼–ç¨‹/database/04-minio.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ç¼–ç¨‹/database/02-redis.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ç¼–ç¨‹/database/04-minio.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

