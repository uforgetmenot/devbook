<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TaroJS 多端开发学习笔记 - 开发</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">开发</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="搜索本书内容..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="tarojs-多端开发学习笔记"><a class="header" href="#tarojs-多端开发学习笔记">TaroJS 多端开发学习笔记</a></h1>
<blockquote>
<p>适用人群：有React基础，希望学习跨平台小程序开发
学习目标：掌握TaroJS多端统一开发，能够开发微信小程序、H5、React Native等多端应用</p>
</blockquote>
<h2 id="一tarojs基础"><a class="header" href="#一tarojs基础">一、TaroJS基础</a></h2>
<h3 id="11-什么是taro"><a class="header" href="#11-什么是taro">1.1 什么是Taro</a></h3>
<p>Taro是由京东凹凸实验室开发的多端统一开发框架，支持用React语法编写一次代码，生成能够在多个平台运行的应用。</p>
<p><strong>支持的平台：</strong></p>
<ul>
<li>微信小程序</li>
<li>支付宝小程序</li>
<li>百度小程序</li>
<li>字节跳动小程序</li>
<li>QQ小程序</li>
<li>京东小程序</li>
<li>H5</li>
<li>React Native</li>
<li>快应用</li>
</ul>
<p><strong>核心特性：</strong></p>
<ul>
<li>React语法，学习成本低</li>
<li>组件化开发</li>
<li>TypeScript支持</li>
<li>多端适配自动化</li>
<li>完整的开发工具链</li>
</ul>
<h3 id="12-环境搭建"><a class="header" href="#12-环境搭建">1.2 环境搭建</a></h3>
<h4 id="121-安装taro-cli"><a class="header" href="#121-安装taro-cli">1.2.1 安装Taro CLI</a></h4>
<pre><code class="language-bash"># 全局安装Taro CLI
npm install -g @tarojs/cli

# 或使用yarn
yarn global add @tarojs/cli

# 查看版本
taro -V
</code></pre>
<h4 id="122-创建项目"><a class="header" href="#122-创建项目">1.2.2 创建项目</a></h4>
<pre><code class="language-bash"># 创建新项目
taro init myapp

# 选择模板
? 请输入项目名称 myapp
? 请选择框架 React
? 请选择语言 TypeScript
? 请选择CSS预处理器 Sass
? 请选择模板源 默认模板
? 请选择模板 默认模板

# 进入项目目录
cd myapp

# 安装依赖
npm install
</code></pre>
<h4 id="123-运行项目"><a class="header" href="#123-运行项目">1.2.3 运行项目</a></h4>
<pre><code class="language-bash"># 微信小程序
npm run dev:weapp

# H5
npm run dev:h5

# 支付宝小程序
npm run dev:alipay

# 编译生产版本
npm run build:weapp
</code></pre>
<h3 id="13-项目结构"><a class="header" href="#13-项目结构">1.3 项目结构</a></h3>
<pre><code>myapp/
├── dist/                    # 编译输出目录
├── config/                  # 配置文件
│   ├── dev.js              # 开发环境配置
│   ├── prod.js             # 生产环境配置
│   └── index.js            # 通用配置
├── src/
│   ├── app.config.ts       # 全局配置
│   ├── app.scss            # 全局样式
│   ├── app.tsx             # 入口组件
│   ├── pages/              # 页面目录
│   │   └── index/
│   │       ├── index.config.ts  # 页面配置
│   │       ├── index.scss       # 页面样式
│   │       └── index.tsx        # 页面组件
│   ├── components/         # 公共组件
│   ├── utils/              # 工具函数
│   ├── services/           # API服务
│   └── store/              # 状态管理
├── package.json
├── project.config.json     # 微信小程序配置
└── tsconfig.json           # TypeScript配置
</code></pre>
<h3 id="14-配置文件详解"><a class="header" href="#14-配置文件详解">1.4 配置文件详解</a></h3>
<h4 id="141-appconfigts全局配置"><a class="header" href="#141-appconfigts全局配置">1.4.1 app.config.ts（全局配置）</a></h4>
<pre><code class="language-typescript">export default defineAppConfig({
  pages: [
    'pages/index/index',
    'pages/user/index',
    'pages/detail/index'
  ],
  window: {
    backgroundTextStyle: 'light',
    navigationBarBackgroundColor: '#fff',
    navigationBarTitleText: 'TaroApp',
    navigationBarTextStyle: 'black'
  },
  tabBar: {
    color: '#666',
    selectedColor: '#1296db',
    backgroundColor: '#fff',
    list: [
      {
        pagePath: 'pages/index/index',
        text: '首页',
        iconPath: 'assets/home.png',
        selectedIconPath: 'assets/home-active.png'
      },
      {
        pagePath: 'pages/user/index',
        text: '我的',
        iconPath: 'assets/user.png',
        selectedIconPath: 'assets/user-active.png'
      }
    ]
  }
})
</code></pre>
<h4 id="142-页面配置"><a class="header" href="#142-页面配置">1.4.2 页面配置</a></h4>
<pre><code class="language-typescript">// pages/index/index.config.ts
export default definePageConfig({
  navigationBarTitleText: '首页',
  enablePullDownRefresh: true,
  backgroundTextStyle: 'dark'
})
</code></pre>
<h2 id="二基础开发"><a class="header" href="#二基础开发">二、基础开发</a></h2>
<h3 id="21-jsx语法"><a class="header" href="#21-jsx语法">2.1 JSX语法</a></h3>
<pre><code class="language-typescript">import { View, Text, Button } from '@tarojs/components'
import { useState } from 'react'
import './index.scss'

export default function Index() {
  const [count, setCount] = useState(0)

  const handleClick = () =&gt; {
    setCount(count + 1)
  }

  return (
    &lt;View className='index'&gt;
      {/* 条件渲染 */}
      {count &gt; 0 &amp;&amp; &lt;Text&gt;计数: {count}&lt;/Text&gt;}

      {/* 列表渲染 */}
      {[1, 2, 3].map(item =&gt; (
        &lt;View key={item}&gt;项目 {item}&lt;/View&gt;
      ))}

      {/* 事件绑定 */}
      &lt;Button onClick={handleClick}&gt;点击+1&lt;/Button&gt;

      {/* 三元表达式 */}
      &lt;Text&gt;{count &gt; 10 ? '大于10' : '小于等于10'}&lt;/Text&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h3 id="22-内置组件"><a class="header" href="#22-内置组件">2.2 内置组件</a></h3>
<h4 id="221-视图容器"><a class="header" href="#221-视图容器">2.2.1 视图容器</a></h4>
<pre><code class="language-typescript">import { View, ScrollView, Swiper, SwiperItem, Image } from '@tarojs/components'

export default function ViewDemo() {
  return (
    &lt;View&gt;
      {/* View - 基础容器 */}
      &lt;View className='container'&gt;
        &lt;Text&gt;内容&lt;/Text&gt;
      &lt;/View&gt;

      {/* ScrollView - 可滚动容器 */}
      &lt;ScrollView
        scrollY
        style={{ height: '100vh' }}
        onScrollToLower={() =&gt; console.log('到底了')}
      &gt;
        &lt;View className='content'&gt;滚动内容&lt;/View&gt;
      &lt;/ScrollView&gt;

      {/* Swiper - 轮播容器 */}
      &lt;Swiper
        className='swiper'
        indicatorDots
        autoplay
        interval={3000}
        circular
      &gt;
        &lt;SwiperItem&gt;
          &lt;Image src='image1.jpg' /&gt;
        &lt;/SwiperItem&gt;
        &lt;SwiperItem&gt;
          &lt;Image src='image2.jpg' /&gt;
        &lt;/SwiperItem&gt;
      &lt;/Swiper&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h4 id="222-表单组件"><a class="header" href="#222-表单组件">2.2.2 表单组件</a></h4>
<pre><code class="language-typescript">import { View, Input, Textarea, Button, Checkbox, Radio, Switch, Picker, Label, RadioGroup } from '@tarojs/components'
import { useState } from 'react'

export default function FormDemo() {
  const [formData, setFormData] = useState({
    username: '',
    bio: '',
    gender: '',
    agree: false,
    vip: false,
    city: ''
  })

  const cities = ['北京', '上海', '广州', '深圳']

  const handleSubmit = () =&gt; {
    console.log('提交表单:', formData)
  }

  return (
    &lt;View className='form'&gt;
      {/* Input - 输入框 */}
      &lt;View className='form-item'&gt;
        &lt;Text&gt;用户名：&lt;/Text&gt;
        &lt;Input
          type='text'
          placeholder='请输入用户名'
          value={formData.username}
          onInput={(e) =&gt; setFormData({ ...formData, username: e.detail.value })}
        /&gt;
      &lt;/View&gt;

      {/* Textarea - 多行输入 */}
      &lt;View className='form-item'&gt;
        &lt;Text&gt;个人简介：&lt;/Text&gt;
        &lt;Textarea
          placeholder='请输入简介'
          value={formData.bio}
          maxlength={200}
          onInput={(e) =&gt; setFormData({ ...formData, bio: e.detail.value })}
        /&gt;
      &lt;/View&gt;

      {/* Radio - 单选 */}
      &lt;View className='form-item'&gt;
        &lt;Text&gt;性别：&lt;/Text&gt;
        &lt;RadioGroup onChange={(e) =&gt; setFormData({ ...formData, gender: e.detail.value })}&gt;
          &lt;Label&gt;&lt;Radio value='male' /&gt;男&lt;/Label&gt;
          &lt;Label&gt;&lt;Radio value='female' /&gt;女&lt;/Label&gt;
        &lt;/RadioGroup&gt;
      &lt;/View&gt;

      {/* Checkbox - 复选 */}
      &lt;View className='form-item'&gt;
        &lt;Label&gt;
          &lt;Checkbox
            checked={formData.agree}
            onChange={(e) =&gt; setFormData({ ...formData, agree: e.detail.value })}
          /&gt;
          同意用户协议
        &lt;/Label&gt;
      &lt;/View&gt;

      {/* Button - 按钮 */}
      &lt;Button type='primary' onClick={handleSubmit}&gt;提交&lt;/Button&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h3 id="23-样式处理"><a class="header" href="#23-样式处理">2.3 样式处理</a></h3>
<h4 id="231-sass样式"><a class="header" href="#231-sass样式">2.3.1 Sass样式</a></h4>
<pre><code class="language-scss">// index.scss
.index {
  padding: 20px;

  .title {
    font-size: 32px;
    color: #333;
    font-weight: bold;
  }

  .content {
    margin-top: 20px;

    .item {
      padding: 10px;
      background: #f5f5f5;
      border-radius: 8px;

      &amp;:hover {
        background: #e5e5e5;
      }
    }
  }
}
</code></pre>
<h4 id="232-样式单位转换"><a class="header" href="#232-样式单位转换">2.3.2 样式单位转换</a></h4>
<p>Taro会自动将px转换为对应平台的单位：</p>
<pre><code class="language-scss">// 写法1：使用px（推荐）
.title {
  font-size: 32px;  // 小程序转为32rpx，H5转为0.42667rem
}

// 写法2：使用PX（不转换）
.fixed {
  font-size: 16PX;  // 保持16px不转换
}
</code></pre>
<h2 id="三路由导航"><a class="header" href="#三路由导航">三、路由导航</a></h2>
<h3 id="31-路由跳转"><a class="header" href="#31-路由跳转">3.1 路由跳转</a></h3>
<pre><code class="language-typescript">import Taro from '@tarojs/taro'

export default function Navigation() {

  // 1. 跳转到新页面（保留当前页面）
  const navigateTo = () =&gt; {
    Taro.navigateTo({
      url: '/pages/detail/index?id=123'
    })
  }

  // 2. 重定向（关闭当前页面）
  const redirectTo = () =&gt; {
    Taro.redirectTo({
      url: '/pages/detail/index?id=123'
    })
  }

  // 3. 切换Tab页
  const switchTab = () =&gt; {
    Taro.switchTab({
      url: '/pages/user/index'
    })
  }

  // 4. 返回上一页
  const navigateBack = () =&gt; {
    Taro.navigateBack({
      delta: 1  // 返回的页面数
    })
  }

  return (
    &lt;View&gt;
      &lt;Button onClick={navigateTo}&gt;跳转详情&lt;/Button&gt;
      &lt;Button onClick={navigateBack}&gt;返回&lt;/Button&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h3 id="32-参数传递与接收"><a class="header" href="#32-参数传递与接收">3.2 参数传递与接收</a></h3>
<pre><code class="language-typescript">// 页面A：传递参数
const gotoDetail = (id: number, name: string) =&gt; {
  Taro.navigateTo({
    url: `/pages/detail/index?id=${id}&amp;name=${encodeURIComponent(name)}`
  })
}

// 页面B：接收参数
import { useRouter } from '@tarojs/taro'
import { useEffect, useState } from 'react'

export default function Detail() {
  const router = useRouter()
  const [info, setInfo] = useState({ id: '', name: '' })

  useEffect(() =&gt; {
    // 获取路由参数
    const { id, name } = router.params
    setInfo({
      id: id || '',
      name: decodeURIComponent(name || '')
    })
  }, [])

  return (
    &lt;View&gt;
      &lt;Text&gt;ID: {info.id}&lt;/Text&gt;
      &lt;Text&gt;名称: {info.name}&lt;/Text&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h2 id="四网络请求"><a class="header" href="#四网络请求">四、网络请求</a></h2>
<h3 id="41-封装请求方法"><a class="header" href="#41-封装请求方法">4.1 封装请求方法</a></h3>
<pre><code class="language-typescript">// src/utils/request.ts
import Taro from '@tarojs/taro'

interface RequestOptions {
  url: string
  method?: 'GET' | 'POST' | 'PUT' | 'DELETE'
  data?: any
  header?: any
}

const BASE_URL = 'https://api.example.com'

// 请求拦截器
const interceptRequest = (options: RequestOptions) =&gt; {
  const token = Taro.getStorageSync('token')
  if (token) {
    options.header = {
      ...options.header,
      'Authorization': `Bearer ${token}`
    }
  }
  Taro.showLoading({ title: '加载中...' })
  return options
}

// 响应拦截器
const interceptResponse = (response: any) =&gt; {
  Taro.hideLoading()
  const { statusCode, data } = response

  if (statusCode === 200) {
    if (data.code === 0) {
      return data.data
    } else {
      Taro.showToast({ title: data.message || '请求失败', icon: 'none' })
      return Promise.reject(data)
    }
  } else if (statusCode === 401) {
    Taro.removeStorageSync('token')
    Taro.redirectTo({ url: '/pages/login/index' })
    return Promise.reject('未授权')
  } else {
    Taro.showToast({ title: '网络错误', icon: 'none' })
    return Promise.reject('网络错误')
  }
}

// 封装request
export const request = &lt;T&gt;(options: RequestOptions): Promise&lt;T&gt; =&gt; {
  const requestOptions = interceptRequest({
    url: BASE_URL + options.url,
    method: options.method || 'GET',
    data: options.data,
    header: {
      'content-type': 'application/json',
      ...options.header
    },
    timeout: 10000
  })

  return Taro.request(requestOptions)
    .then(interceptResponse)
    .catch(error =&gt; {
      Taro.hideLoading()
      return Promise.reject(error)
    })
}

// 便捷方法
export const get = &lt;T&gt;(url: string, data?: any): Promise&lt;T&gt; =&gt; {
  return request&lt;T&gt;({ url, method: 'GET', data })
}

export const post = &lt;T&gt;(url: string, data?: any): Promise&lt;T&gt; =&gt; {
  return request&lt;T&gt;({ url, method: 'POST', data })
}
</code></pre>
<h3 id="42-api服务层"><a class="header" href="#42-api服务层">4.2 API服务层</a></h3>
<pre><code class="language-typescript">// src/services/user.ts
import { get, post } from '../utils/request'

export interface User {
  id: number
  username: string
  avatar: string
  email: string
}

export interface LoginParams {
  username: string
  password: string
}

export const userApi = {
  login: (params: LoginParams) =&gt; {
    return post&lt;{ token: string; user: User }&gt;('/api/login', params)
  },

  getUserInfo: () =&gt; {
    return get&lt;User&gt;('/api/user/info')
  },

  getUserList: (page: number, size: number) =&gt; {
    return get&lt;User[]&gt;('/api/users', { page, size })
  }
}
</code></pre>
<h2 id="五状态管理"><a class="header" href="#五状态管理">五、状态管理</a></h2>
<h3 id="51-使用redux"><a class="header" href="#51-使用redux">5.1 使用Redux</a></h3>
<pre><code class="language-bash"># 安装依赖
npm install redux react-redux redux-thunk @tarojs/redux
</code></pre>
<pre><code class="language-typescript">// src/store/index.ts
import { createStore, applyMiddleware, combineReducers } from 'redux'
import thunk from 'redux-thunk'
import userReducer from './modules/user'

const rootReducer = combineReducers({
  user: userReducer
})

const store = createStore(rootReducer, applyMiddleware(thunk))

export type RootState = ReturnType&lt;typeof rootReducer&gt;
export default store

// src/store/modules/user.ts
import { User } from '@/services/user'

interface UserState {
  userInfo: User | null
  isLogin: boolean
}

const initialState: UserState = {
  userInfo: null,
  isLogin: false
}

const SET_USER_INFO = 'SET_USER_INFO'
const LOGOUT = 'LOGOUT'

export const setUserInfo = (user: User) =&gt; ({
  type: SET_USER_INFO,
  payload: user
})

export const logout = () =&gt; ({
  type: LOGOUT
})

export default function userReducer(state = initialState, action: any): UserState {
  switch (action.type) {
    case SET_USER_INFO:
      return {
        ...state,
        userInfo: action.payload,
        isLogin: true
      }
    case LOGOUT:
      return {
        ...state,
        userInfo: null,
        isLogin: false
      }
    default:
      return state
  }
}

// app.tsx - 配置Provider
import { Provider } from 'react-redux'
import store from './store'

function App({ children }) {
  return (
    &lt;Provider store={store}&gt;
      {children}
    &lt;/Provider&gt;
  )
}

export default App

// 组件中使用
import { useSelector, useDispatch } from 'react-redux'
import { RootState } from '@/store'
import { setUserInfo, logout } from '@/store/modules/user'

export default function UserProfile() {
  const dispatch = useDispatch()
  const { userInfo, isLogin } = useSelector((state: RootState) =&gt; state.user)

  const handleLogin = () =&gt; {
    const user = {
      id: 1,
      username: '张三',
      avatar: 'avatar.jpg',
      email: 'zhangsan@example.com'
    }
    dispatch(setUserInfo(user))
  }

  return (
    &lt;View&gt;
      {isLogin ? (
        &lt;View&gt;
          &lt;Text&gt;欢迎，{userInfo?.username}&lt;/Text&gt;
          &lt;Button onClick={() =&gt; dispatch(logout())}&gt;退出登录&lt;/Button&gt;
        &lt;/View&gt;
      ) : (
        &lt;Button onClick={handleLogin}&gt;登录&lt;/Button&gt;
      )}
    &lt;/View&gt;
  )
}
</code></pre>
<h2 id="六生命周期与hooks"><a class="header" href="#六生命周期与hooks">六、生命周期与Hooks</a></h2>
<pre><code class="language-typescript">import { useEffect, useDidShow, useDidHide, usePullDownRefresh, useReachBottom } from '@tarojs/taro'
import { useState } from 'react'

export default function Lifecycle() {
  const [data, setData] = useState([])

  // 组件挂载
  useEffect(() =&gt; {
    console.log('组件挂载')
    loadData()

    return () =&gt; {
      console.log('组件卸载')
    }
  }, [])

  // 页面显示
  useDidShow(() =&gt; {
    console.log('页面显示')
    refreshData()
  })

  // 页面隐藏
  useDidHide(() =&gt; {
    console.log('页面隐藏')
  })

  // 下拉刷新
  usePullDownRefresh(() =&gt; {
    console.log('下拉刷新')
    refreshData()
  })

  // 上拉触底
  useReachBottom(() =&gt; {
    console.log('触底加载')
    loadMore()
  })

  const loadData = async () =&gt; {
    // 加载数据
  }

  const refreshData = async () =&gt; {
    // 刷新数据
    Taro.stopPullDownRefresh()
  }

  const loadMore = async () =&gt; {
    // 加载更多
  }

  return &lt;View&gt;内容&lt;/View&gt;
}
</code></pre>
<h2 id="七实战案例todo应用"><a class="header" href="#七实战案例todo应用">七、实战案例：Todo应用</a></h2>
<pre><code class="language-typescript">// src/pages/todo/index.tsx
import { View, Input, Button, Checkbox, Text } from '@tarojs/components'
import { useState } from 'react'
import Taro from '@tarojs/taro'
import './index.scss'

interface Todo {
  id: number
  title: string
  completed: boolean
  createdAt: number
}

export default function TodoApp() {
  const [todos, setTodos] = useState&lt;Todo[]&gt;([])
  const [inputValue, setInputValue] = useState('')
  const [filter, setFilter] = useState&lt;'all' | 'active' | 'completed'&gt;('all')

  // 添加Todo
  const handleAdd = () =&gt; {
    if (!inputValue.trim()) {
      Taro.showToast({ title: '请输入内容', icon: 'none' })
      return
    }

    const newTodo: Todo = {
      id: Date.now(),
      title: inputValue,
      completed: false,
      createdAt: Date.now()
    }

    setTodos([newTodo, ...todos])
    setInputValue('')
    Taro.showToast({ title: '添加成功', icon: 'success' })
  }

  // 切换完成状态
  const handleToggle = (id: number) =&gt; {
    setTodos(todos.map(todo =&gt;
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    ))
  }

  // 删除Todo
  const handleDelete = (id: number) =&gt; {
    Taro.showModal({
      title: '确认删除',
      content: '确定要删除这个待办事项吗？',
      success: (res) =&gt; {
        if (res.confirm) {
          setTodos(todos.filter(todo =&gt; todo.id !== id))
          Taro.showToast({ title: '删除成功', icon: 'success' })
        }
      }
    })
  }

  // 过滤显示
  const filteredTodos = todos.filter(todo =&gt; {
    if (filter === 'active') return !todo.completed
    if (filter === 'completed') return todo.completed
    return true
  })

  const activeCount = todos.filter(t =&gt; !t.completed).length

  return (
    &lt;View className='todo-app'&gt;
      {/* 输入区域 */}
      &lt;View className='input-area'&gt;
        &lt;Input
          className='input'
          type='text'
          placeholder='添加待办事项...'
          value={inputValue}
          onInput={(e) =&gt; setInputValue(e.detail.value)}
          onConfirm={handleAdd}
        /&gt;
        &lt;Button className='add-btn' type='primary' onClick={handleAdd}&gt;
          添加
        &lt;/Button&gt;
      &lt;/View&gt;

      {/* 过滤器 */}
      &lt;View className='filter-bar'&gt;
        &lt;View
          className={`filter-item ${filter === 'all' ? 'active' : ''}`}
          onClick={() =&gt; setFilter('all')}
        &gt;
          全部({todos.length})
        &lt;/View&gt;
        &lt;View
          className={`filter-item ${filter === 'active' ? 'active' : ''}`}
          onClick={() =&gt; setFilter('active')}
        &gt;
          未完成({activeCount})
        &lt;/View&gt;
        &lt;View
          className={`filter-item ${filter === 'completed' ? 'active' : ''}`}
          onClick={() =&gt; setFilter('completed')}
        &gt;
          已完成({todos.length - activeCount})
        &lt;/View&gt;
      &lt;/View&gt;

      {/* Todo列表 */}
      &lt;View className='todo-list'&gt;
        {filteredTodos.length === 0 ? (
          &lt;View className='empty'&gt;暂无数据&lt;/View&gt;
        ) : (
          filteredTodos.map(todo =&gt; (
            &lt;View key={todo.id} className='todo-item'&gt;
              &lt;Checkbox
                checked={todo.completed}
                onChange={() =&gt; handleToggle(todo.id)}
              /&gt;
              &lt;Text className={`title ${todo.completed ? 'completed' : ''}`}&gt;
                {todo.title}
              &lt;/Text&gt;
              &lt;Button
                className='delete-btn'
                size='mini'
                type='warn'
                onClick={() =&gt; handleDelete(todo.id)}
              &gt;
                删除
              &lt;/Button&gt;
            &lt;/View&gt;
          ))
        )}
      &lt;/View&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<h2 id="八平台差异化处理"><a class="header" href="#八平台差异化处理">八、平台差异化处理</a></h2>
<h3 id="81-条件编译"><a class="header" href="#81-条件编译">8.1 条件编译</a></h3>
<pre><code class="language-typescript">// 根据编译平台显示不同内容
export default function PlatformDemo() {
  return (
    &lt;View&gt;
      {process.env.TARO_ENV === 'weapp' &amp;&amp; &lt;Text&gt;微信小程序&lt;/Text&gt;}
      {process.env.TARO_ENV === 'h5' &amp;&amp; &lt;Text&gt;H5&lt;/Text&gt;}
      {process.env.TARO_ENV === 'alipay' &amp;&amp; &lt;Text&gt;支付宝小程序&lt;/Text&gt;}
    &lt;/View&gt;
  )
}
</code></pre>
<h2 id="九学习验证标准"><a class="header" href="#九学习验证标准">九、学习验证标准</a></h2>
<p>完成TaroJS学习后，你应该能够：</p>
<ol>
<li><strong>环境搭建</strong>：独立创建Taro项目并运行在多个平台</li>
<li><strong>组件开发</strong>：熟练使用Taro内置组件和自定义组件</li>
<li><strong>路由导航</strong>：掌握页面跳转和参数传递</li>
<li><strong>网络请求</strong>：封装request并实现API服务层</li>
<li><strong>状态管理</strong>：使用Redux管理全局状态</li>
<li><strong>综合应用</strong>：能够开发完整的多端应用</li>
</ol>
<h2 id="十扩展资源"><a class="header" href="#十扩展资源">十、扩展资源</a></h2>
<ol>
<li><strong>官方文档</strong>：https://taro-docs.jd.com</li>
<li><strong>GitHub</strong>：https://github.com/NervJS/taro</li>
<li><strong>Taro UI</strong>：https://taro-ui.jd.com</li>
<li><strong>社区</strong>：Taro官方论坛</li>
</ol>
<hr />
<p><strong>学习建议</strong>：从简单的Todo应用开始，逐步实践电商、社交等复杂应用场景。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../编程/android/Android.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../编程/bigdata/0-DataX.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../编程/android/Android.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../编程/bigdata/0-DataX.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

