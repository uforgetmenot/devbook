# Qt5完整学习笔记

## 学习目标定位
- **目标群体**: 有C++基础的GUI开发学习者
- **学习周期**: 8-12周
- **前置要求**: C++基础、面向对象编程概念
- **学习成果**: 独立开发跨平台桌面应用程序

## 学习路径

```
环境搭建(Week 1) → Qt基础(Week 2-3) → GUI控件(Week 4-5)
→ 信号槽(Week 6) → 文件/网络(Week 7-8) → 数据库/多线程(Week 9-10)
→ 高级特性(Week 11) → 项目实战(Week 12)
```

---

## 第一模块：Qt环境搭建

### 1.1 Qt框架概述

**Qt是什么？**
- 跨平台C++应用程序开发框架
- 支持Windows、Linux、macOS、Android、iOS
- 提供丰富的GUI组件和非GUI功能
- 采用信号槽机制实现组件通信

**Qt版本选择**
- Qt5（稳定，广泛使用）
- Qt6（最新，性能优化）
- 本教程基于Qt5

### 1.2 开发环境搭建

#### Windows环境
```bash
# 下载Qt在线安装器
# https://www.qt.io/download-open-source

# 安装组件选择
- Qt 5.15.2 (或最新LTS版本)
- MinGW 或 MSVC编译器
- Qt Creator IDE
- Qt Charts (可选图表组件)
```

#### Linux环境
```bash
# Ubuntu/Debian
sudo apt-get install qt5-default qtcreator

# 或安装完整Qt包
sudo apt-get install qt5-*
```

### 1.3 第一个Qt程序

```cpp
#include <QApplication>
#include <QLabel>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QLabel label("Hello, Qt!");
    label.setWindowTitle("My First Qt App");
    label.resize(300, 200);
    label.show();

    return app.exec();
}
```

**编译运行**
```bash
# 方法1：使用qmake
qmake -project
qmake
make

# 方法2：直接编译
g++ main.cpp -o hello -I/usr/include/qt5 -lQt5Widgets -fPIC
./hello
```

---

## 第二模块：Qt核心机制

### 2.1 信号与槽（Signal-Slot）

#### 基本概念
- **信号**: 对象状态变化时发出的通知
- **槽**: 响应信号的函数
- **连接**: 将信号与槽关联

#### 基础示例
```cpp
#include <QApplication>
#include <QPushButton>
#include <QMessageBox>

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    QPushButton button("Click Me");

    // 连接信号和槽
    QObject::connect(&button, &QPushButton::clicked, []() {
        QMessageBox::information(nullptr, "提示", "按钮被点击了!");
    });

    button.resize(200, 100);
    button.show();

    return app.exec();
}
```

#### 自定义信号槽
```cpp
#include <QObject>

class Counter : public QObject {
    Q_OBJECT  // 必须包含此宏

private:
    int value;

public:
    Counter() : value(0) {}

    void increment() {
        value++;
        emit valueChanged(value);  // 发射信号
    }

signals:
    void valueChanged(int newValue);  // 信号声明

public slots:
    void reset() {  // 槽函数
        value = 0;
        emit valueChanged(value);
    }
};

// 使用示例
int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    Counter counter;

    // 连接信号槽
    QObject::connect(&counter, &Counter::valueChanged, [](int val) {
        qDebug() << "Value changed to:" << val;
    });

    counter.increment();  // 输出: Value changed to: 1
    counter.increment();  // 输出: Value changed to: 2
    counter.reset();      // 输出: Value changed to: 0

    return 0;
}
```

### 2.2 Qt对象模型

#### 父子关系
```cpp
#include <QWidget>
#include <QPushButton>

void parent_child_demo() {
    QWidget *window = new QWidget();
    window->setWindowTitle("Parent Window");

    // 子对象会自动删除
    QPushButton *btn1 = new QPushButton("Button 1", window);
    QPushButton *btn2 = new QPushButton("Button 2", window);

    window->show();

    // 删除window时，btn1和btn2会自动删除
    // 不需要手动delete btn1和btn2
}
```

#### 对象属性
```cpp
QPushButton button;

// 设置动态属性
button.setProperty("myProperty", 123);

// 获取属性
int value = button.property("myProperty").toInt();

// 对象名称
button.setObjectName("mainButton");
QString name = button.objectName();
```

---

## 第三模块：GUI控件与布局

### 3.1 常用控件

#### 按钮类
```cpp
#include <QWidget>
#include <QPushButton>
#include <QRadioButton>
#include <QCheckBox>
#include <QVBoxLayout>

class ButtonDemo : public QWidget {
public:
    ButtonDemo() {
        // 普通按钮
        QPushButton *pushBtn = new QPushButton("Push Button", this);
        connect(pushBtn, &QPushButton::clicked, []() {
            qDebug() << "Push button clicked";
        });

        // 单选按钮
        QRadioButton *radio1 = new QRadioButton("Option 1", this);
        QRadioButton *radio2 = new QRadioButton("Option 2", this);

        // 复选框
        QCheckBox *checkBox = new QCheckBox("Enable Feature", this);
        connect(checkBox, &QCheckBox::stateChanged, [](int state) {
            qDebug() << "Checkbox state:" << state;
        });

        // 布局
        QVBoxLayout *layout = new QVBoxLayout(this);
        layout->addWidget(pushBtn);
        layout->addWidget(radio1);
        layout->addWidget(radio2);
        layout->addWidget(checkBox);
    }
};
```

#### 文本输入
```cpp
#include <QLineEdit>
#include <QTextEdit>
#include <QPlainTextEdit>

void text_input_demo() {
    // 单行输入
    QLineEdit *lineEdit = new QLineEdit();
    lineEdit->setPlaceholderText("输入你的名字");
    lineEdit->setMaxLength(20);

    // 密码输入
    QLineEdit *passwordEdit = new QLineEdit();
    passwordEdit->setEchoMode(QLineEdit::Password);

    // 多行文本
    QTextEdit *textEdit = new QTextEdit();
    textEdit->setPlainText("多行文本编辑器");

    // 信号连接
    QObject::connect(lineEdit, &QLineEdit::textChanged, [](const QString &text) {
        qDebug() << "Text changed:" << text;
    });
}
```

#### 列表和树形控件
```cpp
#include <QListWidget>
#include <QTreeWidget>

void list_tree_demo() {
    // 列表控件
    QListWidget *list = new QListWidget();
    list->addItem("Item 1");
    list->addItem("Item 2");
    list->addItem("Item 3");

    QObject::connect(list, &QListWidget::itemClicked, [](QListWidgetItem *item) {
        qDebug() << "Clicked:" << item->text();
    });

    // 树形控件
    QTreeWidget *tree = new QTreeWidget();
    tree->setHeaderLabels({"名称", "值"});

    QTreeWidgetItem *root = new QTreeWidgetItem(tree);
    root->setText(0, "根节点");

    QTreeWidgetItem *child1 = new QTreeWidgetItem(root);
    child1->setText(0, "子节点1");
    child1->setText(1, "100");

    tree->expandAll();
}
```

#### 表格控件
```cpp
#include <QTableWidget>

void table_demo() {
    QTableWidget *table = new QTableWidget(3, 4);  // 3行4列

    // 设置表头
    table->setHorizontalHeaderLabels({"姓名", "年龄", "性别", "城市"});

    // 填充数据
    table->setItem(0, 0, new QTableWidgetItem("张三"));
    table->setItem(0, 1, new QTableWidgetItem("25"));
    table->setItem(0, 2, new QTableWidgetItem("男"));
    table->setItem(0, 3, new QTableWidgetItem("北京"));

    table->setItem(1, 0, new QTableWidgetItem("李四"));
    table->setItem(1, 1, new QTableWidgetItem("30"));

    // 调整列宽
    table->resizeColumnsToContents();

    // 禁止编辑
    table->setEditTriggers(QAbstractItemView::NoEditTriggers);
}
```

### 3.2 布局管理

#### 垂直和水平布局
```cpp
#include <QVBoxLayout>
#include <QHBoxLayout>

void layout_demo() {
    QWidget window;

    // 垂直布局
    QVBoxLayout *mainLayout = new QVBoxLayout();

    // 水平布局（用于按钮组）
    QHBoxLayout *buttonLayout = new QHBoxLayout();
    buttonLayout->addWidget(new QPushButton("确定"));
    buttonLayout->addWidget(new QPushButton("取消"));
    buttonLayout->addStretch();  // 弹性空间

    mainLayout->addWidget(new QLabel("用户名:"));
    mainLayout->addWidget(new QLineEdit());
    mainLayout->addWidget(new QLabel("密码:"));
    mainLayout->addWidget(new QLineEdit());
    mainLayout->addLayout(buttonLayout);

    window.setLayout(mainLayout);
    window.show();
}
```

#### 网格布局
```cpp
#include <QGridLayout>

void grid_layout_demo() {
    QWidget window;
    QGridLayout *grid = new QGridLayout();

    // 计算器布局示例
    QLineEdit *display = new QLineEdit();
    grid->addWidget(display, 0, 0, 1, 4);  // 跨4列

    QString buttons[4][4] = {
        {"7", "8", "9", "/"},
        {"4", "5", "6", "*"},
        {"1", "2", "3", "-"},
        {"0", ".", "=", "+"}
    };

    for (int row = 0; row < 4; ++row) {
        for (int col = 0; col < 4; ++col) {
            QPushButton *btn = new QPushButton(buttons[row][col]);
            grid->addWidget(btn, row + 1, col);
        }
    }

    window.setLayout(grid);
    window.show();
}
```

---

## 第四模块：窗口与对话框

### 4.1 主窗口

```cpp
#include <QMainWindow>
#include <QMenuBar>
#include <QToolBar>
#include <QStatusBar>
#include <QTextEdit>

class MainWindow : public QMainWindow {
public:
    MainWindow() {
        // 中心部件
        QTextEdit *editor = new QTextEdit(this);
        setCentralWidget(editor);

        // 菜单栏
        QMenu *fileMenu = menuBar()->addMenu("文件(&F)");
        QAction *newAction = fileMenu->addAction("新建(&N)");
        QAction *openAction = fileMenu->addAction("打开(&O)");
        fileMenu->addSeparator();
        QAction *exitAction = fileMenu->addAction("退出(&X)");

        // 工具栏
        QToolBar *toolBar = addToolBar("主工具栏");
        toolBar->addAction(newAction);
        toolBar->addAction(openAction);

        // 状态栏
        statusBar()->showMessage("就绪");

        // 信号连接
        connect(newAction, &QAction::triggered, []() {
            qDebug() << "新建文件";
        });

        connect(exitAction, &QAction::triggered, this, &QMainWindow::close);

        resize(800, 600);
        setWindowTitle("主窗口示例");
    }
};
```

### 4.2 对话框

#### 标准对话框
```cpp
#include <QFileDialog>
#include <QColorDialog>
#include <QFontDialog>
#include <QInputDialog>
#include <QMessageBox>

void standard_dialogs_demo() {
    // 文件对话框
    QString fileName = QFileDialog::getOpenFileName(
        nullptr,
        "打开文件",
        QDir::homePath(),
        "文本文件 (*.txt);;所有文件 (*.*)"
    );

    // 颜色对话框
    QColor color = QColorDialog::getColor(Qt::white, nullptr, "选择颜色");

    // 字体对话框
    bool ok;
    QFont font = QFontDialog::getFont(&ok, QFont("Arial", 12), nullptr);

    // 输入对话框
    QString text = QInputDialog::getText(nullptr, "输入", "请输入你的名字:");

    // 消息框
    QMessageBox::information(nullptr, "提示", "操作成功");
    QMessageBox::warning(nullptr, "警告", "这是一个警告");
    QMessageBox::critical(nullptr, "错误", "发生错误");

    int ret = QMessageBox::question(nullptr, "确认", "确定要删除吗?");
    if (ret == QMessageBox::Yes) {
        // 执行删除
    }
}
```

#### 自定义对话框
```cpp
#include <QDialog>
#include <QDialogButtonBox>

class LoginDialog : public QDialog {
public:
    LoginDialog(QWidget *parent = nullptr) : QDialog(parent) {
        setWindowTitle("用户登录");

        QLineEdit *userEdit = new QLineEdit(this);
        userEdit->setPlaceholderText("用户名");

        QLineEdit *passEdit = new QLineEdit(this);
        passEdit->setPlaceholderText("密码");
        passEdit->setEchoMode(QLineEdit::Password);

        QDialogButtonBox *buttonBox = new QDialogButtonBox(
            QDialogButtonBox::Ok | QDialogButtonBox::Cancel,
            this
        );

        connect(buttonBox, &QDialogButtonBox::accepted, this, &QDialog::accept);
        connect(buttonBox, &QDialogButtonBox::rejected, this, &QDialog::reject);

        QVBoxLayout *layout = new QVBoxLayout(this);
        layout->addWidget(new QLabel("请登录:"));
        layout->addWidget(userEdit);
        layout->addWidget(passEdit);
        layout->addWidget(buttonBox);
    }
};

// 使用
void use_login_dialog() {
    LoginDialog dialog;
    if (dialog.exec() == QDialog::Accepted) {
        qDebug() << "登录成功";
    } else {
        qDebug() << "取消登录";
    }
}
```

---

## 第五模块：绘图与图形

### 5.1 QPainter绘图

```cpp
#include <QWidget>
#include <QPainter>

class DrawWidget : public QWidget {
protected:
    void paintEvent(QPaintEvent *event) override {
        QPainter painter(this);

        // 设置抗锯齿
        painter.setRenderHint(QPainter::Antialiasing);

        // 绘制线条
        painter.setPen(QPen(Qt::blue, 2));
        painter.drawLine(10, 10, 100, 100);

        // 绘制矩形
        painter.setBrush(Qt::red);
        painter.drawRect(50, 50, 100, 80);

        // 绘制圆形
        painter.setBrush(QBrush(Qt::green, Qt::SolidPattern));
        painter.drawEllipse(200, 50, 80, 80);

        // 绘制文本
        painter.setPen(Qt::black);
        painter.setFont(QFont("Arial", 16));
        painter.drawText(50, 200, "Hello Qt!");

        // 绘制路径
        QPainterPath path;
        path.moveTo(300, 50);
        path.lineTo(350, 100);
        path.lineTo(300, 150);
        path.closeSubpath();
        painter.fillPath(path, Qt::yellow);
    }
};
```

### 5.2 图形视图框架

```cpp
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsRectItem>
#include <QGraphicsEllipseItem>

void graphics_view_demo() {
    // 创建场景
    QGraphicsScene *scene = new QGraphicsScene();

    // 添加图形项
    QGraphicsRectItem *rect = scene->addRect(0, 0, 100, 100, QPen(Qt::black), QBrush(Qt::red));
    rect->setFlag(QGraphicsItem::ItemIsMovable);  // 可移动

    QGraphicsEllipseItem *ellipse = scene->addEllipse(120, 0, 80, 80, QPen(Qt::blue), QBrush(Qt::green));
    ellipse->setFlag(QGraphicsItem::ItemIsMovable);

    QGraphicsTextItem *text = scene->addText("可拖动的图形", QFont("Arial", 14));
    text->setPos(50, 120);
    text->setFlag(QGraphicsItem::ItemIsMovable);

    // 创建视图
    QGraphicsView *view = new QGraphicsView(scene);
    view->setRenderHint(QPainter::Antialiasing);
    view->setWindowTitle("图形视图框架");
    view->resize(400, 300);
    view->show();
}
```

---

## 第六模块：文件与网络

### 6.1 文件操作

```cpp
#include <QFile>
#include <QTextStream>
#include <QDir>
#include <QFileInfo>

void file_operations_demo() {
    // 写文件
    QFile file("data.txt");
    if (file.open(QIODevice::WriteOnly | QIODevice::Text)) {
        QTextStream out(&file);
        out << "Hello Qt!" << endl;
        out << "Line 2" << endl;
        file.close();
    }

    // 读文件
    if (file.open(QIODevice::ReadOnly | QIODevice::Text)) {
        QTextStream in(&file);
        while (!in.atEnd()) {
            QString line = in.readLine();
            qDebug() << line;
        }
        file.close();
    }

    // 目录操作
    QDir dir;
    dir.mkpath("test/folder");
    QStringList files = dir.entryList(QDir::Files);

    // 文件信息
    QFileInfo fileInfo("data.txt");
    qDebug() << "File size:" << fileInfo.size();
    qDebug() << "Last modified:" << fileInfo.lastModified();
    qDebug() << "Absolute path:" << fileInfo.absoluteFilePath();
}

// JSON处理
#include <QJsonDocument>
#include <QJsonObject>
#include <QJsonArray>

void json_demo() {
    // 创建JSON
    QJsonObject person;
    person["name"] = "张三";
    person["age"] = 25;

    QJsonArray hobbies;
    hobbies.append("读书");
    hobbies.append("游泳");
    person["hobbies"] = hobbies;

    QJsonDocument doc(person);
    QString jsonString = doc.toJson();

    // 解析JSON
    QJsonDocument doc2 = QJsonDocument::fromJson(jsonString.toUtf8());
    QJsonObject obj = doc2.object();
    QString name = obj["name"].toString();
    int age = obj["age"].toInt();
}
```

### 6.2 网络编程

```cpp
#include <QNetworkAccessManager>
#include <QNetworkReply>
#include <QNetworkRequest>

class HttpClient : public QObject {
    Q_OBJECT

private:
    QNetworkAccessManager *manager;

public:
    HttpClient() {
        manager = new QNetworkAccessManager(this);
        connect(manager, &QNetworkAccessManager::finished,
                this, &HttpClient::onReplyFinished);
    }

    void get(const QString &url) {
        QNetworkRequest request(url);
        manager->get(request);
    }

    void post(const QString &url, const QByteArray &data) {
        QNetworkRequest request(url);
        request.setHeader(QNetworkRequest::ContentTypeHeader, "application/json");
        manager->post(request, data);
    }

private slots:
    void onReplyFinished(QNetworkReply *reply) {
        if (reply->error() == QNetworkReply::NoError) {
            QByteArray data = reply->readAll();
            qDebug() << "Response:" << data;
        } else {
            qDebug() << "Error:" << reply->errorString();
        }
        reply->deleteLater();
    }
};

// 使用示例
void http_demo() {
    HttpClient client;
    client.get("https://api.github.com/users/github");
}
```

---

## 第七模块：数据库与多线程

### 7.1 数据库操作

```cpp
#include <QSqlDatabase>
#include <QSqlQuery>
#include <QSqlError>

void database_demo() {
    // 创建SQLite数据库连接
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("mydb.db");

    if (!db.open()) {
        qDebug() << "Error:" << db.lastError().text();
        return;
    }

    // 创建表
    QSqlQuery query;
    query.exec("CREATE TABLE IF NOT EXISTS users ("
               "id INTEGER PRIMARY KEY AUTOINCREMENT, "
               "name TEXT, "
               "age INTEGER)");

    // 插入数据
    query.prepare("INSERT INTO users (name, age) VALUES (:name, :age)");
    query.bindValue(":name", "张三");
    query.bindValue(":age", 25);
    query.exec();

    // 查询数据
    query.exec("SELECT * FROM users");
    while (query.next()) {
        int id = query.value(0).toInt();
        QString name = query.value(1).toString();
        int age = query.value(2).toInt();
        qDebug() << id << name << age;
    }

    // 更新数据
    query.exec("UPDATE users SET age = 26 WHERE name = '张三'");

    // 删除数据
    query.exec("DELETE FROM users WHERE id = 1");

    db.close();
}
```

### 7.2 多线程编程

```cpp
#include <QThread>

// 方法1：继承QThread
class WorkerThread : public QThread {
protected:
    void run() override {
        for (int i = 0; i < 10; ++i) {
            qDebug() << "Thread:" << i;
            QThread::msleep(100);
        }
    }
};

// 方法2：使用QObject + moveToThread（推荐）
class Worker : public QObject {
    Q_OBJECT

public slots:
    void doWork() {
        for (int i = 0; i < 10; ++i) {
            qDebug() << "Working:" << i;
            QThread::msleep(100);
            emit progress(i * 10);
        }
        emit finished();
    }

signals:
    void progress(int percent);
    void finished();
};

void thread_demo() {
    // 方法1
    WorkerThread *thread1 = new WorkerThread();
    thread1->start();

    // 方法2（推荐）
    QThread *thread2 = new QThread();
    Worker *worker = new Worker();
    worker->moveToThread(thread2);

    QObject::connect(thread2, &QThread::started, worker, &Worker::doWork);
    QObject::connect(worker, &Worker::finished, thread2, &QThread::quit);
    QObject::connect(worker, &Worker::finished, worker, &Worker::deleteLater);
    QObject::connect(thread2, &QThread::finished, thread2, &QThread::deleteLater);

    QObject::connect(worker, &Worker::progress, [](int p) {
        qDebug() << "Progress:" << p << "%";
    });

    thread2->start();
}
```

---

## 第八模块：实战项目

### 8.1 简易文本编辑器

```cpp
#include <QMainWindow>
#include <QTextEdit>
#include <QMenuBar>
#include <QFileDialog>
#include <QMessageBox>

class TextEditor : public QMainWindow {
public:
    TextEditor() {
        textEdit = new QTextEdit(this);
        setCentralWidget(textEdit);

        createMenus();
        setWindowTitle("简易文本编辑器");
        resize(800, 600);
    }

private:
    QTextEdit *textEdit;
    QString currentFile;

    void createMenus() {
        QMenu *fileMenu = menuBar()->addMenu("文件");

        QAction *newAction = fileMenu->addAction("新建");
        connect(newAction, &QAction::triggered, this, &TextEditor::newFile);

        QAction *openAction = fileMenu->addAction("打开");
        connect(openAction, &QAction::triggered, this, &TextEditor::openFile);

        QAction *saveAction = fileMenu->addAction("保存");
        connect(saveAction, &QAction::triggered, this, &TextEditor::saveFile);

        fileMenu->addSeparator();

        QAction *exitAction = fileMenu->addAction("退出");
        connect(exitAction, &QAction::triggered, this, &QMainWindow::close);
    }

    void newFile() {
        textEdit->clear();
        currentFile.clear();
        setWindowTitle("简易文本编辑器 - 新文件");
    }

    void openFile() {
        QString fileName = QFileDialog::getOpenFileName(this, "打开文件", "", "文本文件 (*.txt);;所有文件 (*.*)");
        if (fileName.isEmpty()) return;

        QFile file(fileName);
        if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
            QMessageBox::warning(this, "错误", "无法打开文件");
            return;
        }

        QTextStream in(&file);
        textEdit->setPlainText(in.readAll());
        file.close();

        currentFile = fileName;
        setWindowTitle("简易文本编辑器 - " + fileName);
    }

    void saveFile() {
        QString fileName = currentFile;
        if (fileName.isEmpty()) {
            fileName = QFileDialog::getSaveFileName(this, "保存文件", "", "文本文件 (*.txt)");
            if (fileName.isEmpty()) return;
        }

        QFile file(fileName);
        if (!file.open(QIODevice::WriteOnly | QIODevice::Text)) {
            QMessageBox::warning(this, "错误", "无法保存文件");
            return;
        }

        QTextStream out(&file);
        out << textEdit->toPlainText();
        file.close();

        currentFile = fileName;
        setWindowTitle("简易文本编辑器 - " + fileName);
        QMessageBox::information(this, "成功", "文件保存成功");
    }
};
```

---

## 学习验证标准

### 基础验证（Week 1-3）
- [ ] 成功搭建Qt开发环境
- [ ] 理解信号槽机制
- [ ] 能创建简单的Qt窗口应用

### GUI验证（Week 4-6）
- [ ] 熟练使用10种以上常用控件
- [ ] 掌握3种布局管理器
- [ ] 能设计复杂的用户界面

### 进阶验证（Week 7-10）
- [ ] 实现文件读写功能
- [ ] 完成网络请求处理
- [ ] 使用SQLite数据库
- [ ] 创建多线程应用

### 项目验证（Week 11-12）
- [ ] 完成至少一个包含以下特性的项目：
  - 完整的GUI界面
  - 菜单和工具栏
  - 文件或数据库操作
  - 异常处理

---

## 常见错误与解决

### 1. 信号槽连接失败
```cpp
// ❌ 错误：忘记Q_OBJECT宏
class MyClass : public QObject {
    // 缺少Q_OBJECT
signals:
    void mySignal();
};

// ✅ 正确
class MyClass : public QObject {
    Q_OBJECT  // 必须添加
signals:
    void mySignal();
};
```

### 2. 内存泄漏
```cpp
// ❌ 忘记设置父对象
void bad_practice() {
    QWidget *widget = new QWidget();
    QPushButton *btn = new QPushButton("Click");  // 内存泄漏
}

// ✅ 设置父对象
void good_practice() {
    QWidget *widget = new QWidget();
    QPushButton *btn = new QPushButton("Click", widget);  // 自动管理
}
```

### 3. UI更新死锁
```cpp
// ❌ 在非UI线程直接更新UI
void worker_thread() {
    label->setText("Updated");  // 危险！
}

// ✅ 使用信号槽
class Worker : public QObject {
    Q_OBJECT
signals:
    void updateText(QString text);
};

// 在主线程连接
connect(worker, &Worker::updateText, label, &QLabel::setText);
```

---

## 推荐学习资源

### 官方资源
- Qt官方文档: https://doc.qt.io/
- Qt示例代码: Qt Creator中的Examples

### 推荐书籍
1. **《C++ GUI Programming with Qt 5》** - 官方教程
2. **《Qt 5编程入门》** - 霍亚飞
3. **《Qt Creator快速入门》** - 第三版

### 实践项目建议
1. **计算器**: 熟悉布局和事件处理
2. **记事本**: 文件操作和菜单栏
3. **聊天客户端**: 网络编程和多线程
4. **数据管理系统**: 数据库操作和Model/View

---

**学习建议**:
1. 多看Qt官方示例代码
2. 每个控件都亲自实践
3. 重点理解信号槽机制
4. 学习Qt Designer加速开发
5. 阅读Qt源码提升理解