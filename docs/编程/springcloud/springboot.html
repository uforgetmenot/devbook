<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Spring Boot æŠ€æœ¯å­¦ä¹ ç¬”è®° - å¼€å‘</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">å¼€å‘</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="æœç´¢æœ¬ä¹¦å†…å®¹..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="spring-boot-æŠ€æœ¯å­¦ä¹ ç¬”è®°"><a class="header" href="#spring-boot-æŠ€æœ¯å­¦ä¹ ç¬”è®°">Spring Boot æŠ€æœ¯å­¦ä¹ ç¬”è®°</a></h1>
<blockquote>
<p><strong>å­¦ä¹ ç›®æ ‡å®šä½</strong>: é¢å‘0-5å¹´ç»éªŒçš„Javaå¼€å‘è€…ï¼Œç³»ç»ŸæŒæ¡Spring Bootæ¡†æ¶ï¼Œä»é›¶åŸºç¡€åˆ°ä¼ä¸šçº§åº”ç”¨å¼€å‘</p>
<p><strong>é¢„æœŸå­¦ä¹ æˆæœ</strong>:</p>
<ul>
<li>æ·±å…¥ç†è§£Spring Bootæ ¸å¿ƒæ¦‚å¿µå’Œè‡ªåŠ¨é…ç½®åŸç†</li>
<li>ç†Ÿç»ƒä½¿ç”¨Spring Bootè¿›è¡ŒWebå¼€å‘å’Œæ•°æ®è®¿é—®</li>
<li>æŒæ¡Spring Bootä¸ä¸»æµä¸­é—´ä»¶çš„é›†æˆæ–¹æ³•</li>
<li>å…·å¤‡ä¼ä¸šçº§Spring Bootåº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²èƒ½åŠ›</li>
</ul>
</blockquote>
<hr />
<h2 id="-å­¦ä¹ è·¯å¾„è§„åˆ’"><a class="header" href="#-å­¦ä¹ è·¯å¾„è§„åˆ’">ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’</a></h2>
<pre><code class="language-mermaid">graph LR
    A[Spring BootåŸºç¡€] --&gt; B[é…ç½®ç®¡ç†]
    B --&gt; C[Webå¼€å‘]
    C --&gt; D[æ•°æ®è®¿é—®]
    D --&gt; E[ä¸­é—´ä»¶é›†æˆ]
    E --&gt; F[ç›‘æ§éƒ¨ç½²]
    F --&gt; G[é«˜çº§ç‰¹æ€§]
</code></pre>
<p><strong>å»ºè®®å­¦ä¹ æ—¶é—´</strong>: 15-20å¤©</p>
<ul>
<li>åŸºç¡€å…¥é—¨ï¼ˆ1-3å¤©ï¼‰: é¡¹ç›®åˆ›å»º + æ ¸å¿ƒæ³¨è§£ + é…ç½®ç®¡ç†</li>
<li>Webå¼€å‘ï¼ˆ4-7å¤©ï¼‰: RESTful API + å¼‚å¸¸å¤„ç† + æ‹¦æˆªå™¨</li>
<li>æ•°æ®è®¿é—®ï¼ˆ8-10å¤©ï¼‰: JDBC + JPA + MyBatis</li>
<li>ä¸­é—´ä»¶é›†æˆï¼ˆ11-14å¤©ï¼‰: Redis + RabbitMQ + å®‰å…¨æ¡†æ¶</li>
<li>è¿ç»´éƒ¨ç½²ï¼ˆ15-17å¤©ï¼‰: ç›‘æ§ + æ—¥å¿— + Dockeréƒ¨ç½²</li>
<li>é«˜çº§è¿›é˜¶ï¼ˆ18-20å¤©ï¼‰: è‡ªåŠ¨é…ç½®åŸç† + æºç åˆ†æ</li>
</ul>
<hr />
<h2 id="1-spring-boot-åŸºç¡€"><a class="header" href="#1-spring-boot-åŸºç¡€">1. Spring Boot åŸºç¡€</a></h2>
<h3 id="11-spring-boot-ç®€ä»‹"><a class="header" href="#11-spring-boot-ç®€ä»‹">1.1 Spring Boot ç®€ä»‹</a></h3>
<h4 id="ä»€ä¹ˆæ˜¯spring-boot"><a class="header" href="#ä»€ä¹ˆæ˜¯spring-boot">ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿ</a></h4>
<p><strong>Spring Boot</strong> æ˜¯åŸºäºSpring Frameworkçš„å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ–Springåº”ç”¨çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>ï¼š</p>
<ul>
<li><strong>çº¦å®šä¼˜äºé…ç½®</strong> (Convention over Configuration)</li>
<li><strong>å¼€ç®±å³ç”¨</strong> (Out of the Box)</li>
<li><strong>ç‹¬ç«‹è¿è¡Œ</strong> (Standalone)</li>
</ul>
<h4 id="spring-bootçš„ä¼˜åŠ¿"><a class="header" href="#spring-bootçš„ä¼˜åŠ¿">Spring Bootçš„ä¼˜åŠ¿</a></h4>
<div class="table-wrapper"><table><thead><tr><th>ä¼ ç»ŸSpringå¼€å‘</th><th>Spring Bootå¼€å‘</th></tr></thead><tbody>
<tr><td>ç¹ççš„XMLé…ç½®</td><td>é›¶é…ç½®æˆ–æå°‘é…ç½®</td></tr>
<tr><td>å¤æ‚çš„ä¾èµ–ç®¡ç†</td><td>è‡ªåŠ¨ä¾èµ–ç®¡ç†</td></tr>
<tr><td>éœ€è¦å¤–éƒ¨å®¹å™¨</td><td>å†…åµŒServletå®¹å™¨</td></tr>
<tr><td>æ‰‹åŠ¨æ•´åˆæ¡†æ¶</td><td>è‡ªåŠ¨é…ç½®é›†æˆ</td></tr>
<tr><td>éƒ¨ç½²å¤æ‚</td><td>ç›´æ¥è¿è¡ŒJARåŒ…</td></tr>
</tbody></table>
</div>
<p><strong>Spring Bootæ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p>
<pre><code class="language-yaml">æ ¸å¿ƒç‰¹æ€§:
  1. è‡ªåŠ¨é…ç½®: æ ¹æ®classpathè‡ªåŠ¨é…ç½®Springå’Œç¬¬ä¸‰æ–¹åº“
  2. Starterä¾èµ–: ç®€åŒ–Maven/Gradleä¾èµ–é…ç½®
  3. å†…åµŒå®¹å™¨: Tomcatã€Jettyã€Undertow
  4. ç”Ÿäº§å°±ç»ª: Actuatoræä¾›ç›‘æ§ã€å¥åº·æ£€æŸ¥
  5. æ— ä»£ç ç”Ÿæˆ: æ— éœ€ç”Ÿæˆä»£ç å’ŒXMLé…ç½®
</code></pre>
<h4 id="spring-bootä¸springçš„å…³ç³»"><a class="header" href="#spring-bootä¸springçš„å…³ç³»">Spring Bootä¸Springçš„å…³ç³»</a></h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Spring Boot                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   è‡ªåŠ¨é…ç½® + Starter + å†…åµŒå®¹å™¨    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Spring Framework                â”‚  â”‚
â”‚  â”‚   IOC + AOP + MVC + Data + Security  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="12-å¿«é€Ÿå…¥é—¨"><a class="header" href="#12-å¿«é€Ÿå…¥é—¨">1.2 å¿«é€Ÿå…¥é—¨</a></h3>
<h4 id="åˆ›å»ºspring-booté¡¹ç›®"><a class="header" href="#åˆ›å»ºspring-booté¡¹ç›®">åˆ›å»ºSpring Booté¡¹ç›®</a></h4>
<p><strong>æ–¹å¼1: ä½¿ç”¨Spring Initializr (æ¨è)</strong></p>
<pre><code class="language-bash"># è®¿é—® https://start.spring.io/
# æˆ–ä½¿ç”¨IDEAå†…ç½®çš„Spring Initializr

é…ç½®:
  - Project: Maven
  - Language: Java
  - Spring Boot: 3.1.5
  - Packaging: Jar
  - Java: 17
  - Dependencies: Spring Web, Lombok
</code></pre>
<p><strong>æ–¹å¼2: Mavenæ‰‹åŠ¨åˆ›å»º</strong></p>
<pre><code class="language-xml">&lt;!-- pom.xml --&gt;
&lt;project&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.1.5&lt;/version&gt;
    &lt;/parent&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;demo&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- Webä¾èµ– --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- å¼€å‘å·¥å…· --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;!-- Lombok --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;!-- æµ‹è¯• --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<h4 id="é¡¹ç›®ç»“æ„è§£æ"><a class="header" href="#é¡¹ç›®ç»“æ„è§£æ">é¡¹ç›®ç»“æ„è§£æ</a></h4>
<pre><code>demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/
â”‚   â”‚   â”‚       â””â”€â”€ example/
â”‚   â”‚   â”‚           â””â”€â”€ demo/
â”‚   â”‚   â”‚               â”œâ”€â”€ DemoApplication.java    # å¯åŠ¨ç±»
â”‚   â”‚   â”‚               â”œâ”€â”€ controller/              # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚               â”œâ”€â”€ service/                 # æœåŠ¡å±‚
â”‚   â”‚   â”‚               â”œâ”€â”€ repository/              # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚               â”œâ”€â”€ entity/                  # å®ä½“ç±»
â”‚   â”‚   â”‚               â””â”€â”€ config/                  # é…ç½®ç±»
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml                     # é…ç½®æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ static/                             # é™æ€èµ„æº
â”‚   â”‚       â””â”€â”€ templates/                          # æ¨¡æ¿æ–‡ä»¶
â”‚   â””â”€â”€ test/                                       # æµ‹è¯•ä»£ç 
â”œâ”€â”€ pom.xml                                         # Mavené…ç½®
â””â”€â”€ README.md
</code></pre>
<h4 id="ç¬¬ä¸€ä¸ªhelloworldåº”ç”¨"><a class="header" href="#ç¬¬ä¸€ä¸ªhelloworldåº”ç”¨">ç¬¬ä¸€ä¸ªHelloWorldåº”ç”¨</a></h4>
<p><strong>1. å¯åŠ¨ç±»</strong></p>
<pre><code class="language-java">package com.example.demo;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication  // æ ¸å¿ƒæ³¨è§£ï¼ŒåŒ…å«3ä¸ªæ³¨è§£
public class DemoApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
</code></pre>
<p><strong>2. Controller</strong></p>
<pre><code class="language-java">package com.example.demo.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

    @GetMapping("/hello")
    public String hello() {
        return "Hello, Spring Boot!";
    }
}
</code></pre>
<p><strong>3. å¯åŠ¨æµ‹è¯•</strong></p>
<pre><code class="language-bash"># æ–¹å¼1: IDEAè¿è¡ŒDemoApplication
# æ–¹å¼2: Mavenå‘½ä»¤
mvn spring-boot:run

# æ–¹å¼3: æ‰“åŒ…åè¿è¡Œ
mvn clean package
java -jar target/demo-1.0.0.jar

# è®¿é—®: http://localhost:8080/hello
# è¾“å‡º: Hello, Spring Boot!
</code></pre>
<h3 id="13-æ ¸å¿ƒæ³¨è§£"><a class="header" href="#13-æ ¸å¿ƒæ³¨è§£">1.3 æ ¸å¿ƒæ³¨è§£</a></h3>
<h4 id="springbootapplication"><a class="header" href="#springbootapplication">@SpringBootApplication</a></h4>
<p><strong>@SpringBootApplication = 3ä¸ªæ³¨è§£çš„ç»„åˆ</strong>:</p>
<pre><code class="language-java">@SpringBootApplication
public class DemoApplication {
    // ç­‰ä»·äº:
    @SpringBootConfiguration    // æ ‡è¯†ä¸ºé…ç½®ç±»
    @EnableAutoConfiguration    // å¯ç”¨è‡ªåŠ¨é…ç½®
    @ComponentScan              // ç»„ä»¶æ‰«æ
}
</code></pre>
<p><strong>è¯¦è§£</strong>ï¼š</p>
<pre><code class="language-java">// 1. @SpringBootConfiguration: å°±æ˜¯@Configuration
@Configuration
public class MyConfig {
    @Bean
    public MyBean myBean() {
        return new MyBean();
    }
}

// 2. @EnableAutoConfiguration: è‡ªåŠ¨é…ç½®æ ¸å¿ƒ
// ä¼šè‡ªåŠ¨æ‰«æspring-boot-autoconfigureåŒ…ä¸‹çš„é…ç½®ç±»
// æ ¹æ®æ¡ä»¶æ³¨è§£å†³å®šæ˜¯å¦ç”Ÿæ•ˆ

// 3. @ComponentScan: æ‰«æå½“å‰åŒ…åŠå­åŒ…ä¸‹çš„ç»„ä»¶
// é»˜è®¤æ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŒ…
</code></pre>
<h4 id="restcontroller"><a class="header" href="#restcontroller">@RestController</a></h4>
<pre><code class="language-java">@RestController = @Controller + @ResponseBody

@RestController
public class UserController {

    @GetMapping("/user/{id}")
    public User getUser(@PathVariable Long id) {
        // è¿”å›å¯¹è±¡è‡ªåŠ¨è½¬JSON
        return userService.findById(id);
    }
}
</code></pre>
<h4 id="requestmappingç³»åˆ—"><a class="header" href="#requestmappingç³»åˆ—">@RequestMappingç³»åˆ—</a></h4>
<pre><code class="language-java">@RestController
@RequestMapping("/api/users")  // ç±»çº§åˆ«æ˜ å°„
public class UserController {

    // GETè¯·æ±‚: /api/users
    @GetMapping
    public List&lt;User&gt; list() { }

    // GETè¯·æ±‚: /api/users/{id}
    @GetMapping("/{id}")
    public User get(@PathVariable Long id) { }

    // POSTè¯·æ±‚: /api/users
    @PostMapping
    public User create(@RequestBody User user) { }

    // PUTè¯·æ±‚: /api/users/{id}
    @PutMapping("/{id}")
    public User update(@PathVariable Long id, @RequestBody User user) { }

    // DELETEè¯·æ±‚: /api/users/{id}
    @DeleteMapping("/{id}")
    public void delete(@PathVariable Long id) { }
}
</code></pre>
<h4 id="autowiredä¾èµ–æ³¨å…¥"><a class="header" href="#autowiredä¾èµ–æ³¨å…¥">@Autowiredä¾èµ–æ³¨å…¥</a></h4>
<pre><code class="language-java">// å­—æ®µæ³¨å…¥ï¼ˆä¸æ¨èï¼‰
@Autowired
private UserService userService;

// æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰
private final UserService userService;

@Autowired
public UserController(UserService userService) {
    this.userService = userService;
}

// Setteræ³¨å…¥
private UserService userService;

@Autowired
public void setUserService(UserService userService) {
    this.userService = userService;
}

// å¦‚æœåªæœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œ@Autowiredå¯çœç•¥
public UserController(UserService userService) {
    this.userService = userService;
}
</code></pre>
<hr />
<h2 id="2-é…ç½®ç®¡ç†"><a class="header" href="#2-é…ç½®ç®¡ç†">2. é…ç½®ç®¡ç†</a></h2>
<h3 id="21-é…ç½®æ–‡ä»¶"><a class="header" href="#21-é…ç½®æ–‡ä»¶">2.1 é…ç½®æ–‡ä»¶</a></h3>
<h4 id="applicationproperties-vs-applicationyml"><a class="header" href="#applicationproperties-vs-applicationyml">application.properties vs application.yml</a></h4>
<p><strong>application.properties</strong>:</p>
<pre><code class="language-properties"># æœåŠ¡å™¨é…ç½®
server.port=8080
server.servlet.context-path=/api

# æ•°æ®æºé…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/demo
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
</code></pre>
<p><strong>application.yml</strong> (æ¨è):</p>
<pre><code class="language-yaml">server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/demo
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
</code></pre>
<h4 id="é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§"><a class="header" href="#é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§">é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</a></h4>
<pre><code>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½:
1. å‘½ä»¤è¡Œå‚æ•°: java -jar app.jar --server.port=9000
2. SPRING_APPLICATION_JSONç¯å¢ƒå˜é‡
3. ServletConfigåˆå§‹åŒ–å‚æ•°
4. ServletContextåˆå§‹åŒ–å‚æ•°
5. JNDIå±æ€§
6. Javaç³»ç»Ÿå±æ€§: System.getProperties()
7. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
8. RandomValuePropertySource
9. jaråŒ…å¤–çš„application-{profile}.properties/yml
10. jaråŒ…å†…çš„application-{profile}.properties/yml
11. jaråŒ…å¤–çš„application.properties/yml
12. jaråŒ…å†…çš„application.properties/yml
13. @Configurationç±»ä¸Šçš„@PropertySource
14. é»˜è®¤å±æ€§: SpringApplication.setDefaultProperties
</code></pre>
<h3 id="22-é…ç½®ç»‘å®š"><a class="header" href="#22-é…ç½®ç»‘å®š">2.2 é…ç½®ç»‘å®š</a></h3>
<h4 id="valueæ³¨è§£"><a class="header" href="#valueæ³¨è§£">@Valueæ³¨è§£</a></h4>
<pre><code class="language-java">@Component
public class AppConfig {

    @Value("${server.port}")
    private int port;

    @Value("${app.name:defaultApp}")  // é»˜è®¤å€¼
    private String appName;

    @Value("${app.timeout:5000}")
    private long timeout;

    // SpELè¡¨è¾¾å¼
    @Value("#{systemProperties['user.home']}")
    private String userHome;

    @Value("#{T(java.lang.Math).random() * 100}")
    private double randomNumber;
}
</code></pre>
<h4 id="configurationproperties-æ¨è"><a class="header" href="#configurationproperties-æ¨è">@ConfigurationProperties (æ¨è)</a></h4>
<pre><code class="language-yaml"># application.yml
app:
  name: Demo Application
  version: 1.0.0
  timeout: 5000
  servers:
    - dev.example.com
    - prod.example.com
  database:
    url: jdbc:mysql://localhost:3306/demo
    username: root
    password: 123456
</code></pre>
<pre><code class="language-java">@Component
@ConfigurationProperties(prefix = "app")
@Data
public class AppProperties {

    private String name;
    private String version;
    private long timeout;
    private List&lt;String&gt; servers;
    private Database database;

    @Data
    public static class Database {
        private String url;
        private String username;
        private String password;
    }
}
</code></pre>
<p><strong>ä½¿ç”¨é…ç½®ç±»</strong>:</p>
<pre><code class="language-java">@Service
public class AppService {

    private final AppProperties appProperties;

    public AppService(AppProperties appProperties) {
        this.appProperties = appProperties;
    }

    public void printConfig() {
        System.out.println("App Name: " + appProperties.getName());
        System.out.println("Servers: " + appProperties.getServers());
        System.out.println("DB URL: " + appProperties.getDatabase().getUrl());
    }
}
</code></pre>
<h3 id="23-å¤šç¯å¢ƒé…ç½®"><a class="header" href="#23-å¤šç¯å¢ƒé…ç½®">2.3 å¤šç¯å¢ƒé…ç½®</a></h3>
<h4 id="profileé…ç½®"><a class="header" href="#profileé…ç½®">Profileé…ç½®</a></h4>
<p><strong>æ–‡ä»¶å‘½åè§„åˆ™</strong>: <code>application-{profile}.yml</code></p>
<pre><code>resources/
â”œâ”€â”€ application.yml           # é€šç”¨é…ç½®
â”œâ”€â”€ application-dev.yml       # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-test.yml      # æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ application-prod.yml      # ç”Ÿäº§ç¯å¢ƒ
</code></pre>
<p><strong>application.yml (é€šç”¨é…ç½®)</strong>:</p>
<pre><code class="language-yaml">spring:
  application:
    name: demo-app
  profiles:
    active: dev  # æ¿€æ´»devç¯å¢ƒ
</code></pre>
<p><strong>application-dev.yml</strong>:</p>
<pre><code class="language-yaml">server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/demo_dev
    username: root
    password: dev123

logging:
  level:
    root: DEBUG
</code></pre>
<p><strong>application-prod.yml</strong>:</p>
<pre><code class="language-yaml">server:
  port: 80

spring:
  datasource:
    url: jdbc:mysql://prod-db-server:3306/demo_prod
    username: prod_user
    password: ${DB_PASSWORD}  # ä»ç¯å¢ƒå˜é‡è¯»å–

logging:
  level:
    root: WARN
</code></pre>
<h4 id="æ¿€æ´»profileçš„æ–¹å¼"><a class="header" href="#æ¿€æ´»profileçš„æ–¹å¼">æ¿€æ´»Profileçš„æ–¹å¼</a></h4>
<pre><code class="language-bash"># 1. é…ç½®æ–‡ä»¶
spring.profiles.active=dev

# 2. å‘½ä»¤è¡Œå‚æ•°
java -jar app.jar --spring.profiles.active=prod

# 3. ç¯å¢ƒå˜é‡
export SPRING_PROFILES_ACTIVE=prod
java -jar app.jar

# 4. JVMå‚æ•°
java -Dspring.profiles.active=prod -jar app.jar

# 5. IDEé…ç½®ï¼ˆRun Configurationï¼‰
</code></pre>
<h4 id="æ¡ä»¶åŒ–é…ç½®"><a class="header" href="#æ¡ä»¶åŒ–é…ç½®">æ¡ä»¶åŒ–é…ç½®</a></h4>
<pre><code class="language-java">@Configuration
@Profile("dev")  // ä»…åœ¨devç¯å¢ƒç”Ÿæ•ˆ
public class DevConfig {

    @Bean
    public DataSource dataSource() {
        // å¼€å‘ç¯å¢ƒçš„æ•°æ®æºé…ç½®
        return new EmbeddedDatabaseBuilder()
            .setType(EmbeddedDatabaseType.H2)
            .build();
    }
}

@Configuration
@Profile("prod")  // ä»…åœ¨prodç¯å¢ƒç”Ÿæ•ˆ
public class ProdConfig {

    @Bean
    public DataSource dataSource() {
        // ç”Ÿäº§ç¯å¢ƒçš„æ•°æ®æºé…ç½®
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://prod-db:3306/demo");
        return dataSource;
    }
}
</code></pre>
<p><strong>æ¡ä»¶æ³¨è§£</strong>:</p>
<pre><code class="language-java">@Configuration
public class ConditionalConfig {

    // å½“ç±»è·¯å¾„å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ
    @Bean
    @ConditionalOnClass(DataSource.class)
    public MyBean myBean1() { }

    // å½“ä¸å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ
    @Bean
    @ConditionalOnMissingBean(DataSource.class)
    public MyBean myBean2() { }

    // å½“é…ç½®å±æ€§åŒ¹é…æ—¶ç”Ÿæ•ˆ
    @Bean
    @ConditionalOnProperty(name = "app.feature.enabled", havingValue = "true")
    public MyFeature myFeature() { }

    // å½“æŒ‡å®šè¡¨è¾¾å¼ä¸ºtrueæ—¶ç”Ÿæ•ˆ
    @Bean
    @ConditionalOnExpression("${app.enabled:true} and ${app.mode} == 'production'")
    public MyBean myBean3() { }
}
</code></pre>
<hr />
<h2 id="3-webå¼€å‘"><a class="header" href="#3-webå¼€å‘">3. Webå¼€å‘</a></h2>
<h3 id="31-spring-mvcé›†æˆ"><a class="header" href="#31-spring-mvcé›†æˆ">3.1 Spring MVCé›†æˆ</a></h3>
<h4 id="è‡ªåŠ¨é…ç½®åŸç†"><a class="header" href="#è‡ªåŠ¨é…ç½®åŸç†">è‡ªåŠ¨é…ç½®åŸç†</a></h4>
<p><strong>Spring Bootè‡ªåŠ¨é…ç½®äº†ä»¥ä¸‹å†…å®¹</strong>:</p>
<pre><code class="language-yaml">è‡ªåŠ¨é…ç½®å†…å®¹:
  1. DispatcherServlet: æ ¸å¿ƒåˆ†å‘å™¨
  2. è§†å›¾è§£æå™¨:
     - ContentNegotiatingViewResolver
     - BeanNameViewResolver
  3. é™æ€èµ„æºæ˜ å°„:
     - /static
     - /public
     - /resources
     - /META-INF/resources
  4. è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨:
     - HttpMessageConverter: JSONã€XMLè½¬æ¢
     - Formatter: æ—¥æœŸæ ¼å¼åŒ–
  5. é”™è¯¯å¤„ç†:
     - ErrorAttributes
     - BasicErrorController
</code></pre>
<p><strong>è‡ªå®šä¹‰MVCé…ç½®</strong>:</p>
<pre><code class="language-java">@Configuration
public class WebMvcConfig implements WebMvcConfigurer {

    // è·¨åŸŸé…ç½®
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")
            .allowedOrigins("http://localhost:3000")
            .allowedMethods("GET", "POST", "PUT", "DELETE")
            .allowedHeaders("*")
            .allowCredentials(true)
            .maxAge(3600);
    }

    // æ‹¦æˆªå™¨
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LogInterceptor())
            .addPathPatterns("/**")
            .excludePathPatterns("/login", "/register");
    }

    // å‚æ•°è§£æå™¨
    @Override
    public void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers) {
        resolvers.add(new CustomArgumentResolver());
    }

    // æ¶ˆæ¯è½¬æ¢å™¨
    @Override
    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {
        FastJsonHttpMessageConverter converter = new FastJsonHttpMessageConverter();
        converters.add(0, converter);
    }
}
</code></pre>
<h4 id="é™æ€èµ„æºå¤„ç†"><a class="header" href="#é™æ€èµ„æºå¤„ç†">é™æ€èµ„æºå¤„ç†</a></h4>
<p><strong>é»˜è®¤é™æ€èµ„æºè·¯å¾„</strong>:</p>
<pre><code>classpath:/static/
classpath:/public/
classpath:/resources/
classpath:/META-INF/resources/

è®¿é—®: http://localhost:8080/css/style.css
å¯¹åº”: src/main/resources/static/css/style.css
</code></pre>
<p><strong>è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„</strong>:</p>
<pre><code class="language-yaml">spring:
  web:
    resources:
      static-locations:
        - classpath:/static/
        - classpath:/public/
        - file:/opt/app/static/  # å¤–éƒ¨ç›®å½•
</code></pre>
<pre><code class="language-java">@Configuration
public class StaticResourceConfig implements WebMvcConfigurer {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // æ˜ å°„/img/**åˆ°æŒ‡å®šç›®å½•
        registry.addResourceHandler("/img/**")
            .addResourceLocations("file:/opt/images/")
            .setCacheControl(CacheControl.maxAge(1, TimeUnit.HOURS));
    }
}
</code></pre>
<h3 id="32-restful-api"><a class="header" href="#32-restful-api">3.2 RESTful API</a></h3>
<h4 id="resté£æ ¼è®¾è®¡"><a class="header" href="#resté£æ ¼è®¾è®¡">RESTé£æ ¼è®¾è®¡</a></h4>
<p><strong>RESTful APIè®¾è®¡è§„èŒƒ</strong>:</p>
<pre><code>èµ„æºå‘½å: ä½¿ç”¨å¤æ•°åè¯
GET    /api/users         è·å–ç”¨æˆ·åˆ—è¡¨
GET    /api/users/{id}    è·å–æŒ‡å®šç”¨æˆ·
POST   /api/users         åˆ›å»ºæ–°ç”¨æˆ·
PUT    /api/users/{id}    æ›´æ–°æŒ‡å®šç”¨æˆ·
DELETE /api/users/{id}    åˆ é™¤æŒ‡å®šç”¨æˆ·

åµŒå¥—èµ„æº:
GET    /api/users/{userId}/orders        è·å–ç”¨æˆ·çš„è®¢å•åˆ—è¡¨
POST   /api/users/{userId}/orders        ä¸ºç”¨æˆ·åˆ›å»ºè®¢å•

æŸ¥è¯¢å‚æ•°:
GET    /api/users?page=1&amp;size=20         åˆ†é¡µæŸ¥è¯¢
GET    /api/users?sort=age,desc          æ’åºæŸ¥è¯¢
GET    /api/users?name=å¼ ä¸‰               æœç´¢æŸ¥è¯¢
</code></pre>
<h4 id="å®Œæ•´çš„crudç¤ºä¾‹"><a class="header" href="#å®Œæ•´çš„crudç¤ºä¾‹">å®Œæ•´çš„CRUDç¤ºä¾‹</a></h4>
<p><strong>å®ä½“ç±»</strong>:</p>
<pre><code class="language-java">@Data
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, length = 50)
    private String username;

    @Column(nullable = false, length = 100)
    private String email;

    @Column(nullable = false)
    private Integer age;

    @CreationTimestamp
    private LocalDateTime createdAt;

    @UpdateTimestamp
    private LocalDateTime updatedAt;
}
</code></pre>
<p><strong>Repository</strong>:</p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    Optional&lt;User&gt; findByUsername(String username);
    List&lt;User&gt; findByAgeGreaterThan(Integer age);
    Page&lt;User&gt; findByUsernameLike(String username, Pageable pageable);
}
</code></pre>
<p><strong>Service</strong>:</p>
<pre><code class="language-java">@Service
@Transactional
public class UserService {

    private final UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public List&lt;User&gt; findAll() {
        return userRepository.findAll();
    }

    public User findById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -&gt; new ResourceNotFoundException("User not found: " + id));
    }

    public User create(User user) {
        if (userRepository.findByUsername(user.getUsername()).isPresent()) {
            throw new BusinessException("Username already exists");
        }
        return userRepository.save(user);
    }

    public User update(Long id, User user) {
        User existingUser = findById(id);
        existingUser.setUsername(user.getUsername());
        existingUser.setEmail(user.getEmail());
        existingUser.setAge(user.getAge());
        return userRepository.save(existingUser);
    }

    public void delete(Long id) {
        User user = findById(id);
        userRepository.delete(user);
    }
}
</code></pre>
<p><strong>Controller</strong>:</p>
<pre><code class="language-java">@RestController
@RequestMapping("/api/users")
@Validated
public class UserController {

    private final UserService userService;

    public UserController(UserService userService) {
        this.userService = userService;
    }

    /**
     * è·å–ç”¨æˆ·åˆ—è¡¨
     */
    @GetMapping
    public ResponseEntity&lt;List&lt;User&gt;&gt; list() {
        List&lt;User&gt; users = userService.findAll();
        return ResponseEntity.ok(users);
    }

    /**
     * è·å–å•ä¸ªç”¨æˆ·
     */
    @GetMapping("/{id}")
    public ResponseEntity&lt;User&gt; get(@PathVariable Long id) {
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }

    /**
     * åˆ›å»ºç”¨æˆ·
     */
    @PostMapping
    public ResponseEntity&lt;User&gt; create(@Valid @RequestBody User user) {
        User createdUser = userService.create(user);
        return ResponseEntity
            .status(HttpStatus.CREATED)
            .body(createdUser);
    }

    /**
     * æ›´æ–°ç”¨æˆ·
     */
    @PutMapping("/{id}")
    public ResponseEntity&lt;User&gt; update(
        @PathVariable Long id,
        @Valid @RequestBody User user
    ) {
        User updatedUser = userService.update(id, user);
        return ResponseEntity.ok(updatedUser);
    }

    /**
     * åˆ é™¤ç”¨æˆ·
     */
    @DeleteMapping("/{id}")
    public ResponseEntity&lt;Void&gt; delete(@PathVariable Long id) {
        userService.delete(id);
        return ResponseEntity.noContent().build();
    }
}
</code></pre>
<h4 id="å‚æ•°ç»‘å®š"><a class="header" href="#å‚æ•°ç»‘å®š">å‚æ•°ç»‘å®š</a></h4>
<pre><code class="language-java">@RestController
@RequestMapping("/api/demo")
public class DemoController {

    // è·¯å¾„å‚æ•°
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) { }

    // æŸ¥è¯¢å‚æ•°
    @GetMapping("/users")
    public List&lt;User&gt; listUsers(
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "10") int size,
        @RequestParam(required = false) String name
    ) { }

    // è¯·æ±‚ä½“
    @PostMapping("/users")
    public User createUser(@RequestBody User user) { }

    // è¯·æ±‚å¤´
    @GetMapping("/info")
    public String getInfo(
        @RequestHeader("User-Agent") String userAgent,
        @RequestHeader(value = "Authorization", required = false) String token
    ) { }

    // Cookie
    @GetMapping("/session")
    public String getSession(@CookieValue("JSESSIONID") String sessionId) { }

    // å¤šä¸ªå‚æ•°å¯¹è±¡
    @GetMapping("/search")
    public List&lt;User&gt; search(UserSearchCriteria criteria) { }
}

@Data
public class UserSearchCriteria {
    private String name;
    private Integer minAge;
    private Integer maxAge;
    private LocalDate startDate;
    private LocalDate endDate;
}
</code></pre>
<h3 id="33-å¼‚å¸¸å¤„ç†"><a class="header" href="#33-å¼‚å¸¸å¤„ç†">3.3 å¼‚å¸¸å¤„ç†</a></h3>
<h4 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a class="header" href="#å…¨å±€å¼‚å¸¸å¤„ç†">å…¨å±€å¼‚å¸¸å¤„ç†</a></h4>
<pre><code class="language-java">@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    /**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleBusinessException(BusinessException ex) {
        log.error("Business exception: {}", ex.getMessage());
        ErrorResponse error = ErrorResponse.builder()
            .code(ex.getCode())
            .message(ex.getMessage())
            .timestamp(LocalDateTime.now())
            .build();
        return ResponseEntity
            .status(HttpStatus.BAD_REQUEST)
            .body(error);
    }

    /**
     * å¤„ç†èµ„æºæœªæ‰¾åˆ°å¼‚å¸¸
     */
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleResourceNotFoundException(
        ResourceNotFoundException ex
    ) {
        log.error("Resource not found: {}", ex.getMessage());
        ErrorResponse error = ErrorResponse.builder()
            .code("RESOURCE_NOT_FOUND")
            .message(ex.getMessage())
            .timestamp(LocalDateTime.now())
            .build();
        return ResponseEntity
            .status(HttpStatus.NOT_FOUND)
            .body(error);
    }

    /**
     * å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleValidationException(
        MethodArgumentNotValidException ex
    ) {
        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();
        ex.getBindingResult().getFieldErrors().forEach(error -&gt;
            errors.put(error.getField(), error.getDefaultMessage())
        );

        ErrorResponse error = ErrorResponse.builder()
            .code("VALIDATION_ERROR")
            .message("Validation failed")
            .errors(errors)
            .timestamp(LocalDateTime.now())
            .build();

        return ResponseEntity
            .status(HttpStatus.BAD_REQUEST)
            .body(error);
    }

    /**
     * å¤„ç†å…¶ä»–æ‰€æœ‰å¼‚å¸¸
     */
    @ExceptionHandler(Exception.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleGlobalException(Exception ex) {
        log.error("Unexpected error", ex);
        ErrorResponse error = ErrorResponse.builder()
            .code("INTERNAL_SERVER_ERROR")
            .message("An unexpected error occurred")
            .timestamp(LocalDateTime.now())
            .build();
        return ResponseEntity
            .status(HttpStatus.INTERNAL_SERVER_ERROR)
            .body(error);
    }
}

@Data
@Builder
public class ErrorResponse {
    private String code;
    private String message;
    private Map&lt;String, String&gt; errors;
    private LocalDateTime timestamp;
}
</code></pre>
<p><strong>è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸</strong>:</p>
<pre><code class="language-java">@Getter
public class BusinessException extends RuntimeException {
    private final String code;

    public BusinessException(String code, String message) {
        super(message);
        this.code = code;
    }

    public BusinessException(String message) {
        this("BUSINESS_ERROR", message);
    }
}

public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}
</code></pre>
<hr />
<h2 id="4-æ•°æ®è®¿é—®"><a class="header" href="#4-æ•°æ®è®¿é—®">4. æ•°æ®è®¿é—®</a></h2>
<h3 id="41-jdbcæ”¯æŒ"><a class="header" href="#41-jdbcæ”¯æŒ">4.1 JDBCæ”¯æŒ</a></h3>
<h4 id="æ•°æ®æºé…ç½®"><a class="header" href="#æ•°æ®æºé…ç½®">æ•°æ®æºé…ç½®</a></h4>
<p><strong>application.yml</strong>:</p>
<pre><code class="language-yaml">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/demo?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver

    # HikariCPè¿æ¥æ± é…ç½®ï¼ˆSpring Boot 2.xé»˜è®¤ï¼‰
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      connection-test-query: SELECT 1
</code></pre>
<h4 id="jdbctemplate"><a class="header" href="#jdbctemplate">JdbcTemplate</a></h4>
<pre><code class="language-java">@Repository
public class UserDao {

    private final JdbcTemplate jdbcTemplate;

    public UserDao(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    /**
     * æŸ¥è¯¢å•ä¸ªå¯¹è±¡
     */
    public User findById(Long id) {
        String sql = "SELECT * FROM users WHERE id = ?";
        return jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;&gt;(User.class), id);
    }

    /**
     * æŸ¥è¯¢åˆ—è¡¨
     */
    public List&lt;User&gt; findAll() {
        String sql = "SELECT * FROM users";
        return jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;(User.class));
    }

    /**
     * æ’å…¥
     */
    public int insert(User user) {
        String sql = "INSERT INTO users (username, email, age) VALUES (?, ?, ?)";
        return jdbcTemplate.update(sql, user.getUsername(), user.getEmail(), user.getAge());
    }

    /**
     * æ›´æ–°
     */
    public int update(User user) {
        String sql = "UPDATE users SET username = ?, email = ?, age = ? WHERE id = ?";
        return jdbcTemplate.update(sql,
            user.getUsername(),
            user.getEmail(),
            user.getAge(),
            user.getId()
        );
    }

    /**
     * åˆ é™¤
     */
    public int delete(Long id) {
        String sql = "DELETE FROM users WHERE id = ?";
        return jdbcTemplate.update(sql, id);
    }

    /**
     * æ‰¹é‡æ’å…¥
     */
    public int[] batchInsert(List&lt;User&gt; users) {
        String sql = "INSERT INTO users (username, email, age) VALUES (?, ?, ?)";
        return jdbcTemplate.batchUpdate(sql, new BatchPreparedStatementSetter() {
            @Override
            public void setValues(PreparedStatement ps, int i) throws SQLException {
                User user = users.get(i);
                ps.setString(1, user.getUsername());
                ps.setString(2, user.getEmail());
                ps.setInt(3, user.getAge());
            }

            @Override
            public int getBatchSize() {
                return users.size();
            }
        });
    }
}
</code></pre>
<h4 id="äº‹åŠ¡ç®¡ç†"><a class="header" href="#äº‹åŠ¡ç®¡ç†">äº‹åŠ¡ç®¡ç†</a></h4>
<pre><code class="language-java">@Service
@Transactional  // ç±»çº§åˆ«ï¼šæ‰€æœ‰æ–¹æ³•éƒ½å¼€å¯äº‹åŠ¡
public class UserService {

    private final UserDao userDao;

    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }

    /**
     * é»˜è®¤äº‹åŠ¡é…ç½®
     */
    public void createUser(User user) {
        userDao.insert(user);
    }

    /**
     * åªè¯»äº‹åŠ¡
     */
    @Transactional(readOnly = true)
    public User getUser(Long id) {
        return userDao.findById(id);
    }

    /**
     * æŒ‡å®šå¼‚å¸¸å›æ»š
     */
    @Transactional(rollbackFor = Exception.class)
    public void updateUser(User user) {
        userDao.update(user);
        // ä»»ä½•å¼‚å¸¸éƒ½ä¼šå›æ»š
    }

    /**
     * æŒ‡å®šä¼ æ’­è¡Œä¸º
     */
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void createUserInNewTransaction(User user) {
        // æ€»æ˜¯åœ¨æ–°äº‹åŠ¡ä¸­æ‰§è¡Œ
        userDao.insert(user);
    }
}
</code></pre>
<h3 id="42-jpaé›†æˆ"><a class="header" href="#42-jpaé›†æˆ">4.2 JPAé›†æˆ</a></h3>
<h4 id="spring-data-jpaé…ç½®"><a class="header" href="#spring-data-jpaé…ç½®">Spring Data JPAé…ç½®</a></h4>
<p><strong>pom.xml</strong>:</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>application.yml</strong>:</p>
<pre><code class="language-yaml">spring:
  jpa:
    hibernate:
      ddl-auto: update  # none, validate, update, create, create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect
    open-in-view: false  # å…³é—­OSIV
</code></pre>
<h4 id="å®ä½“ç±»æ˜ å°„"><a class="header" href="#å®ä½“ç±»æ˜ å°„">å®ä½“ç±»æ˜ å°„</a></h4>
<pre><code class="language-java">@Entity
@Table(name = "users", indexes = {
    @Index(name = "idx_username", columnList = "username"),
    @Index(name = "idx_email", columnList = "email")
})
@Data
@NoArgsConstructor
@AllArgsConstructor
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, unique = true, length = 50)
    private String username;

    @Column(nullable = false, length = 100)
    private String email;

    @Column(name = "age")
    private Integer age;

    @Enumerated(EnumType.STRING)
    @Column(name = "status", length = 20)
    private UserStatus status;

    @CreatedDate
    @Column(name = "created_at", nullable = false, updatable = false)
    private LocalDateTime createdAt;

    @LastModifiedDate
    @Column(name = "updated_at")
    private LocalDateTime updatedAt;

    // ä¸€å¯¹å¤šå…³ç³»
    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL, orphanRemoval = true)
    private List&lt;Order&gt; orders = new ArrayList&lt;&gt;();

    // å¤šå¯¹ä¸€å…³ç³»
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "department_id")
    private Department department;

    // å¤šå¯¹å¤šå…³ç³»
    @ManyToMany
    @JoinTable(
        name = "user_roles",
        joinColumns = @JoinColumn(name = "user_id"),
        inverseJoinColumns = @JoinColumn(name = "role_id")
    )
    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();
}

public enum UserStatus {
    ACTIVE, INACTIVE, SUSPENDED
}
</code></pre>
<h4 id="repositoryæ¥å£"><a class="header" href="#repositoryæ¥å£">Repositoryæ¥å£</a></h4>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt;,
                                        JpaSpecificationExecutor&lt;User&gt; {

    // æ–¹æ³•åæŸ¥è¯¢
    Optional&lt;User&gt; findByUsername(String username);

    List&lt;User&gt; findByAgeGreaterThan(Integer age);

    List&lt;User&gt; findByEmailContaining(String email);

    Page&lt;User&gt; findByStatus(UserStatus status, Pageable pageable);

    // @QueryæŸ¥è¯¢
    @Query("SELECT u FROM User u WHERE u.username = :username")
    Optional&lt;User&gt; findByUsernameCustom(@Param("username") String username);

    @Query("SELECT u FROM User u WHERE u.age BETWEEN :minAge AND :maxAge")
    List&lt;User&gt; findByAgeBetween(@Param("minAge") Integer minAge,
                                 @Param("maxAge") Integer maxAge);

    // åŸç”ŸSQL
    @Query(value = "SELECT * FROM users WHERE email LIKE %:keyword%", nativeQuery = true)
    List&lt;User&gt; searchByEmail(@Param("keyword") String keyword);

    // æ›´æ–°æ“ä½œ
    @Modifying
    @Query("UPDATE User u SET u.status = :status WHERE u.id = :id")
    int updateStatus(@Param("id") Long id, @Param("status") UserStatus status);

    // åˆ é™¤æ“ä½œ
    @Modifying
    @Query("DELETE FROM User u WHERE u.status = :status")
    int deleteByStatus(@Param("status") UserStatus status);

    // æŠ•å½±æŸ¥è¯¢
    @Query("SELECT new com.example.demo.dto.UserDTO(u.id, u.username, u.email) " +
           "FROM User u WHERE u.status = :status")
    List&lt;UserDTO&gt; findUserDTOsByStatus(@Param("status") UserStatus status);
}
</code></pre>
<p><strong>åŠ¨æ€æŸ¥è¯¢ (Specification)</strong>:</p>
<pre><code class="language-java">@Service
public class UserService {

    private final UserRepository userRepository;

    public List&lt;User&gt; findUsers(UserSearchCriteria criteria) {
        return userRepository.findAll((root, query, cb) -&gt; {
            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();

            if (criteria.getUsername() != null) {
                predicates.add(cb.like(root.get("username"), "%" + criteria.getUsername() + "%"));
            }

            if (criteria.getMinAge() != null) {
                predicates.add(cb.greaterThanOrEqualTo(root.get("age"), criteria.getMinAge()));
            }

            if (criteria.getMaxAge() != null) {
                predicates.add(cb.lessThanOrEqualTo(root.get("age"), criteria.getMaxAge()));
            }

            if (criteria.getStatus() != null) {
                predicates.add(cb.equal(root.get("status"), criteria.getStatus()));
            }

            return cb.and(predicates.toArray(new Predicate[0]));
        });
    }
}
</code></pre>
<h3 id="43-mybatisé›†æˆ"><a class="header" href="#43-mybatisé›†æˆ">4.3 MyBatisé›†æˆ</a></h3>
<h4 id="mybatisé…ç½®"><a class="header" href="#mybatisé…ç½®">MyBatisé…ç½®</a></h4>
<p><strong>pom.xml</strong>:</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.0.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>application.yml</strong>:</p>
<pre><code class="language-yaml">mybatis:
  type-aliases-package: com.example.demo.entity
  mapper-locations: classpath:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true  # é©¼å³°å‘½åè½¬æ¢
    cache-enabled: true                  # å¼€å¯äºŒçº§ç¼“å­˜
    lazy-loading-enabled: true           # å¼€å¯å»¶è¿ŸåŠ è½½
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre>
<h4 id="mapperæ¥å£"><a class="header" href="#mapperæ¥å£">Mapperæ¥å£</a></h4>
<pre><code class="language-java">@Mapper
public interface UserMapper {

    /**
     * æ³¨è§£æ–¹å¼
     */
    @Select("SELECT * FROM users WHERE id = #{id}")
    User findById(@Param("id") Long id);

    @Select("SELECT * FROM users")
    List&lt;User&gt; findAll();

    @Insert("INSERT INTO users (username, email, age) VALUES (#{username}, #{email}, #{age})")
    @Options(useGeneratedKeys = true, keyProperty = "id")
    int insert(User user);

    @Update("UPDATE users SET username = #{username}, email = #{email}, age = #{age} WHERE id = #{id}")
    int update(User user);

    @Delete("DELETE FROM users WHERE id = #{id}")
    int delete(@Param("id") Long id);

    /**
     * XMLæ–¹å¼ï¼ˆæ¨èï¼‰
     */
    User findByUsername(@Param("username") String username);

    List&lt;User&gt; findByCondition(UserSearchCriteria criteria);

    int batchInsert(@Param("users") List&lt;User&gt; users);
}
</code></pre>
<h4 id="sqlæ˜ å°„æ–‡ä»¶"><a class="header" href="#sqlæ˜ å°„æ–‡ä»¶">SQLæ˜ å°„æ–‡ä»¶</a></h4>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;

&lt;mapper namespace="com.example.demo.mapper.UserMapper"&gt;

    &lt;!-- ç»“æœæ˜ å°„ --&gt;
    &lt;resultMap id="BaseResultMap" type="User"&gt;
        &lt;id property="id" column="id"/&gt;
        &lt;result property="username" column="username"/&gt;
        &lt;result property="email" column="email"/&gt;
        &lt;result property="age" column="age"/&gt;
        &lt;result property="createdAt" column="created_at"/&gt;
        &lt;result property="updatedAt" column="updated_at"/&gt;
    &lt;/resultMap&gt;

    &lt;!-- æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ --&gt;
    &lt;select id="findByUsername" resultMap="BaseResultMap"&gt;
        SELECT * FROM users WHERE username = #{username}
    &lt;/select&gt;

    &lt;!-- åŠ¨æ€SQLæŸ¥è¯¢ --&gt;
    &lt;select id="findByCondition" resultMap="BaseResultMap"&gt;
        SELECT * FROM users
        &lt;where&gt;
            &lt;if test="username != null and username != ''"&gt;
                AND username LIKE CONCAT('%', #{username}, '%')
            &lt;/if&gt;
            &lt;if test="minAge != null"&gt;
                AND age &amp;gt;= #{minAge}
            &lt;/if&gt;
            &lt;if test="maxAge != null"&gt;
                AND age &amp;lt;= #{maxAge}
            &lt;/if&gt;
            &lt;if test="status != null"&gt;
                AND status = #{status}
            &lt;/if&gt;
        &lt;/where&gt;
        ORDER BY created_at DESC
    &lt;/select&gt;

    &lt;!-- æ‰¹é‡æ’å…¥ --&gt;
    &lt;insert id="batchInsert" useGeneratedKeys="true" keyProperty="id"&gt;
        INSERT INTO users (username, email, age)
        VALUES
        &lt;foreach collection="users" item="user" separator=","&gt;
            (#{user.username}, #{user.email}, #{user.age})
        &lt;/foreach&gt;
    &lt;/insert&gt;

    &lt;!-- å…³è”æŸ¥è¯¢ --&gt;
    &lt;select id="findWithOrders" resultMap="UserWithOrdersMap"&gt;
        SELECT u.*, o.id as order_id, o.order_no, o.amount
        FROM users u
        LEFT JOIN orders o ON u.id = o.user_id
        WHERE u.id = #{id}
    &lt;/select&gt;

    &lt;resultMap id="UserWithOrdersMap" type="User"&gt;
        &lt;id property="id" column="id"/&gt;
        &lt;result property="username" column="username"/&gt;
        &lt;collection property="orders" ofType="Order"&gt;
            &lt;id property="id" column="order_id"/&gt;
            &lt;result property="orderNo" column="order_no"/&gt;
            &lt;result property="amount" column="amount"/&gt;
        &lt;/collection&gt;
    &lt;/resultMap&gt;

&lt;/mapper&gt;
</code></pre>
<hr />
<h2 id="5-å®‰å…¨ç®¡ç†"><a class="header" href="#5-å®‰å…¨ç®¡ç†">5. å®‰å…¨ç®¡ç†</a></h2>
<h3 id="51-spring-securityé›†æˆ"><a class="header" href="#51-spring-securityé›†æˆ">5.1 Spring Securityé›†æˆ</a></h3>
<h4 id="ä¾èµ–é…ç½®"><a class="header" href="#ä¾èµ–é…ç½®">ä¾èµ–é…ç½®</a></h4>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="åŸºç¡€é…ç½®"><a class="header" href="#åŸºç¡€é…ç½®">åŸºç¡€é…ç½®</a></h4>
<pre><code class="language-java">@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(authorize -&gt; authorize
                .requestMatchers("/api/public/**").permitAll()
                .requestMatchers("/api/admin/**").hasRole("ADMIN")
                .requestMatchers("/api/user/**").hasAnyRole("USER", "ADMIN")
                .anyRequest().authenticated()
            )
            .formLogin(form -&gt; form
                .loginPage("/login")
                .defaultSuccessUrl("/home")
                .permitAll()
            )
            .logout(logout -&gt; logout
                .logoutUrl("/logout")
                .logoutSuccessUrl("/login")
                .permitAll()
            )
            .csrf(csrf -&gt; csrf.disable())  // å¼€å‘ç¯å¢ƒå¯ç¦ç”¨
            .httpBasic(Customizer.withDefaults());

        return http.build();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
</code></pre>
<h4 id="ç”¨æˆ·è®¤è¯"><a class="header" href="#ç”¨æˆ·è®¤è¯">ç”¨æˆ·è®¤è¯</a></h4>
<pre><code class="language-java">@Service
public class UserDetailsServiceImpl implements UserDetailsService {

    private final UserRepository userRepository;

    public UserDetailsServiceImpl(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username)
            .orElseThrow(() -&gt; new UsernameNotFoundException("User not found: " + username));

        return org.springframework.security.core.userdetails.User
            .withUsername(user.getUsername())
            .password(user.getPassword())
            .authorities(getAuthorities(user))
            .accountExpired(false)
            .accountLocked(false)
            .credentialsExpired(false)
            .disabled(false)
            .build();
    }

    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(User user) {
        return user.getRoles().stream()
            .map(role -&gt; new SimpleGrantedAuthority("ROLE_" + role.getName()))
            .collect(Collectors.toList());
    }
}
</code></pre>
<h3 id="52-jwtè®¤è¯"><a class="header" href="#52-jwtè®¤è¯">5.2 JWTè®¤è¯</a></h3>
<h4 id="jwtå·¥å…·ç±»"><a class="header" href="#jwtå·¥å…·ç±»">JWTå·¥å…·ç±»</a></h4>
<pre><code class="language-java">@Component
public class JwtTokenProvider {

    @Value("${app.jwt.secret}")
    private String jwtSecret;

    @Value("${app.jwt.expiration}")
    private long jwtExpiration;

    /**
     * ç”ŸæˆToken
     */
    public String generateToken(Authentication authentication) {
        UserDetails userDetails = (UserDetails) authentication.getPrincipal();
        Date now = new Date();
        Date expiryDate = new Date(now.getTime() + jwtExpiration);

        return Jwts.builder()
            .setSubject(userDetails.getUsername())
            .setIssuedAt(now)
            .setExpiration(expiryDate)
            .signWith(SignatureAlgorithm.HS512, jwtSecret)
            .compact();
    }

    /**
     * ä»Tokenè·å–ç”¨æˆ·å
     */
    public String getUsernameFromToken(String token) {
        Claims claims = Jwts.parser()
            .setSigningKey(jwtSecret)
            .parseClaimsJws(token)
            .getBody();

        return claims.getSubject();
    }

    /**
     * éªŒè¯Token
     */
    public boolean validateToken(String token) {
        try {
            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);
            return true;
        } catch (SignatureException ex) {
            log.error("Invalid JWT signature");
        } catch (MalformedJwtException ex) {
            log.error("Invalid JWT token");
        } catch (ExpiredJwtException ex) {
            log.error("Expired JWT token");
        } catch (UnsupportedJwtException ex) {
            log.error("Unsupported JWT token");
        } catch (IllegalArgumentException ex) {
            log.error("JWT claims string is empty");
        }
        return false;
    }
}
</code></pre>
<h4 id="jwtè¿‡æ»¤å™¨"><a class="header" href="#jwtè¿‡æ»¤å™¨">JWTè¿‡æ»¤å™¨</a></h4>
<pre><code class="language-java">@Component
public class JwtAuthenticationFilter extends OncePerRequestFilter {

    @Autowired
    private JwtTokenProvider tokenProvider;

    @Autowired
    private UserDetailsService userDetailsService;

    @Override
    protected void doFilterInternal(
        HttpServletRequest request,
        HttpServletResponse response,
        FilterChain filterChain
    ) throws ServletException, IOException {
        try {
            String jwt = getJwtFromRequest(request);

            if (StringUtils.hasText(jwt) &amp;&amp; tokenProvider.validateToken(jwt)) {
                String username = tokenProvider.getUsernameFromToken(jwt);
                UserDetails userDetails = userDetailsService.loadUserByUsername(username);

                UsernamePasswordAuthenticationToken authentication =
                    new UsernamePasswordAuthenticationToken(
                        userDetails,
                        null,
                        userDetails.getAuthorities()
                    );

                authentication.setDetails(
                    new WebAuthenticationDetailsSource().buildDetails(request)
                );

                SecurityContextHolder.getContext().setAuthentication(authentication);
            }
        } catch (Exception ex) {
            logger.error("Could not set user authentication in security context", ex);
        }

        filterChain.doFilter(request, response);
    }

    private String getJwtFromRequest(HttpServletRequest request) {
        String bearerToken = request.getHeader("Authorization");
        if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith("Bearer ")) {
            return bearerToken.substring(7);
        }
        return null;
    }
}
</code></pre>
<h4 id="è®¤è¯æ¥å£"><a class="header" href="#è®¤è¯æ¥å£">è®¤è¯æ¥å£</a></h4>
<pre><code class="language-java">@RestController
@RequestMapping("/api/auth")
public class AuthController {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Autowired
    private JwtTokenProvider tokenProvider;

    @Autowired
    private UserRepository userRepository;

    @Autowired
    private PasswordEncoder passwordEncoder;

    /**
     * ç™»å½•
     */
    @PostMapping("/login")
    public ResponseEntity&lt;?&gt; login(@Valid @RequestBody LoginRequest loginRequest) {
        Authentication authentication = authenticationManager.authenticate(
            new UsernamePasswordAuthenticationToken(
                loginRequest.getUsername(),
                loginRequest.getPassword()
            )
        );

        SecurityContextHolder.getContext().setAuthentication(authentication);
        String token = tokenProvider.generateToken(authentication);

        return ResponseEntity.ok(new JwtAuthenticationResponse(token));
    }

    /**
     * æ³¨å†Œ
     */
    @PostMapping("/register")
    public ResponseEntity&lt;?&gt; register(@Valid @RequestBody RegisterRequest registerRequest) {
        if (userRepository.existsByUsername(registerRequest.getUsername())) {
            return ResponseEntity
                .badRequest()
                .body(new ApiResponse(false, "Username is already taken"));
        }

        User user = new User();
        user.setUsername(registerRequest.getUsername());
        user.setEmail(registerRequest.getEmail());
        user.setPassword(passwordEncoder.encode(registerRequest.getPassword()));

        userRepository.save(user);

        return ResponseEntity.ok(new ApiResponse(true, "User registered successfully"));
    }
}
</code></pre>
<hr />
<h2 id="6-ç¼“å­˜ç®¡ç†"><a class="header" href="#6-ç¼“å­˜ç®¡ç†">6. ç¼“å­˜ç®¡ç†</a></h2>
<h3 id="61-spring-cache"><a class="header" href="#61-spring-cache">6.1 Spring Cache</a></h3>
<h4 id="ä¾èµ–é…ç½®-1"><a class="header" href="#ä¾èµ–é…ç½®-1">ä¾èµ–é…ç½®</a></h4>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="å¯ç”¨ç¼“å­˜"><a class="header" href="#å¯ç”¨ç¼“å­˜">å¯ç”¨ç¼“å­˜</a></h4>
<pre><code class="language-java">@SpringBootApplication
@EnableCaching
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
</code></pre>
<h4 id="ç¼“å­˜æ³¨è§£"><a class="header" href="#ç¼“å­˜æ³¨è§£">ç¼“å­˜æ³¨è§£</a></h4>
<pre><code class="language-java">@Service
@CacheConfig(cacheNames = "users")
public class UserService {

    private final UserRepository userRepository;

    /**
     * ç¼“å­˜æŸ¥è¯¢ç»“æœ
     */
    @Cacheable(key = "#id")
    public User findById(Long id) {
        System.out.println("Fetching user from database: " + id);
        return userRepository.findById(id).orElse(null);
    }

    /**
     * æ¡ä»¶ç¼“å­˜
     */
    @Cacheable(key = "#username", condition = "#username.length() &gt; 3")
    public User findByUsername(String username) {
        return userRepository.findByUsername(username).orElse(null);
    }

    /**
     * æ›´æ–°ç¼“å­˜
     */
    @CachePut(key = "#user.id")
    public User update(User user) {
        return userRepository.save(user);
    }

    /**
     * åˆ é™¤ç¼“å­˜
     */
    @CacheEvict(key = "#id")
    public void delete(Long id) {
        userRepository.deleteById(id);
    }

    /**
     * æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
     */
    @CacheEvict(allEntries = true)
    public void deleteAll() {
        userRepository.deleteAll();
    }

    /**
     * å¤šç¼“å­˜æ“ä½œ
     */
    @Caching(
        evict = {
            @CacheEvict(value = "users", key = "#user.id"),
            @CacheEvict(value = "userList", allEntries = true)
        }
    )
    public void complexUpdate(User user) {
        userRepository.save(user);
    }
}
</code></pre>
<h3 id="62-redisç¼“å­˜"><a class="header" href="#62-redisç¼“å­˜">6.2 Redisç¼“å­˜</a></h3>
<h4 id="redisé…ç½®"><a class="header" href="#redisé…ç½®">Redisé…ç½®</a></h4>
<pre><code class="language-yaml">spring:
  redis:
    host: localhost
    port: 6379
    password:
    database: 0
    timeout: 3000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1ms
  cache:
    type: redis
    redis:
      time-to-live: 600000  # 10åˆ†é’Ÿè¿‡æœŸ
</code></pre>
<pre><code class="language-java">@Configuration
@EnableCaching
public class RedisConfig {

    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(
        RedisConnectionFactory connectionFactory
    ) {
        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();
        template.setConnectionFactory(connectionFactory);

        // JSONåºåˆ—åŒ–
        Jackson2JsonRedisSerializer&lt;Object&gt; serializer =
            new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.activateDefaultTyping(
            LaissezFaireSubTypeValidator.instance,
            ObjectMapper.DefaultTyping.NON_FINAL
        );
        serializer.setObjectMapper(om);

        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(serializer);
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setHashValueSerializer(serializer);
        template.afterPropertiesSet();

        return template;
    }

    @Bean
    public CacheManager cacheManager(RedisConnectionFactory connectionFactory) {
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofMinutes(10))
            .serializeKeysWith(
                RedisSerializationContext.SerializationPair.fromSerializer(
                    new StringRedisSerializer()
                )
            )
            .serializeValuesWith(
                RedisSerializationContext.SerializationPair.fromSerializer(
                    new GenericJackson2JsonRedisSerializer()
                )
            )
            .disableCachingNullValues();

        return RedisCacheManager.builder(connectionFactory)
            .cacheDefaults(config)
            .build();
    }
}
</code></pre>
<hr />
<h2 id="7-ç›‘æ§ä¸è¿ç»´"><a class="header" href="#7-ç›‘æ§ä¸è¿ç»´">7. ç›‘æ§ä¸è¿ç»´</a></h2>
<h3 id="71-spring-boot-actuator"><a class="header" href="#71-spring-boot-actuator">7.1 Spring Boot Actuator</a></h3>
<h4 id="ä¾èµ–é…ç½®-2"><a class="header" href="#ä¾èµ–é…ç½®-2">ä¾èµ–é…ç½®</a></h4>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="é…ç½®"><a class="header" href="#é…ç½®">é…ç½®</a></h4>
<pre><code class="language-yaml">management:
  endpoints:
    web:
      exposure:
        include: "*"  # æš´éœ²æ‰€æœ‰ç«¯ç‚¹
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    shutdown:
      enabled: true
  metrics:
    export:
      prometheus:
        enabled: true
</code></pre>
<h4 id="å¸¸ç”¨ç«¯ç‚¹"><a class="header" href="#å¸¸ç”¨ç«¯ç‚¹">å¸¸ç”¨ç«¯ç‚¹</a></h4>
<pre><code class="language-bash"># å¥åº·æ£€æŸ¥
GET /actuator/health

# åº”ç”¨ä¿¡æ¯
GET /actuator/info

# æŒ‡æ ‡ä¿¡æ¯
GET /actuator/metrics
GET /actuator/metrics/jvm.memory.used

# ç¯å¢ƒé…ç½®
GET /actuator/env

# Beanä¿¡æ¯
GET /actuator/beans

# æ—¥å¿—é…ç½®
GET /actuator/loggers
POST /actuator/loggers/com.example.demo

# çº¿ç¨‹è½¬å‚¨
GET /actuator/threaddump

# å †è½¬å‚¨
GET /actuator/heapdump

# å…³é—­åº”ç”¨ï¼ˆéœ€è¦å¯ç”¨ï¼‰
POST /actuator/shutdown
</code></pre>
<h4 id="è‡ªå®šä¹‰health-indicator"><a class="header" href="#è‡ªå®šä¹‰health-indicator">è‡ªå®šä¹‰Health Indicator</a></h4>
<pre><code class="language-java">@Component
public class CustomHealthIndicator implements HealthIndicator {

    @Override
    public Health health() {
        // æ£€æŸ¥è‡ªå®šä¹‰å¥åº·æŒ‡æ ‡
        if (checkCustomCondition()) {
            return Health.up()
                .withDetail("status", "Available")
                .withDetail("message", "Custom service is running")
                .build();
        } else {
            return Health.down()
                .withDetail("status", "Unavailable")
                .withDetail("message", "Custom service is down")
                .build();
        }
    }

    private boolean checkCustomCondition() {
        // å®é™…æ£€æŸ¥é€»è¾‘
        return true;
    }
}
</code></pre>
<h4 id="è‡ªå®šä¹‰ç«¯ç‚¹"><a class="header" href="#è‡ªå®šä¹‰ç«¯ç‚¹">è‡ªå®šä¹‰ç«¯ç‚¹</a></h4>
<pre><code class="language-java">@Component
@Endpoint(id = "custom")
public class CustomEndpoint {

    @ReadOperation
    public Map&lt;String, Object&gt; customInfo() {
        Map&lt;String, Object&gt; info = new HashMap&lt;&gt;();
        info.put("appName", "Demo Application");
        info.put("version", "1.0.0");
        info.put("timestamp", System.currentTimeMillis());
        return info;
    }

    @WriteOperation
    public void updateSetting(@Selector String name, String value) {
        // æ›´æ–°é…ç½®
        System.out.println("Updating " + name + " to " + value);
    }

    @DeleteOperation
    public void clearCache() {
        // æ¸…é™¤ç¼“å­˜
        System.out.println("Cache cleared");
    }
}
</code></pre>
<h3 id="72-æ—¥å¿—ç®¡ç†"><a class="header" href="#72-æ—¥å¿—ç®¡ç†">7.2 æ—¥å¿—ç®¡ç†</a></h3>
<h4 id="logbacké…ç½®"><a class="header" href="#logbacké…ç½®">Logbacké…ç½®</a></h4>
<p><strong>logback-spring.xml</strong>:</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;
    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- æ–‡ä»¶è¾“å‡º --&gt;
    &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;logs/application.log&lt;/file&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;logs/application-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- é”™è¯¯æ—¥å¿— --&gt;
    &lt;appender name="ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;logs/error.log&lt;/file&gt;
        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;logs/error-%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- å¼‚æ­¥æ—¥å¿— --&gt;
    &lt;appender name="ASYNC_FILE" class="ch.qos.logback.classic.AsyncAppender"&gt;
        &lt;queueSize&gt;512&lt;/queueSize&gt;
        &lt;appender-ref ref="FILE"/&gt;
    &lt;/appender&gt;

    &lt;!-- Root Logger --&gt;
    &lt;root level="INFO"&gt;
        &lt;appender-ref ref="CONSOLE"/&gt;
        &lt;appender-ref ref="ASYNC_FILE"/&gt;
        &lt;appender-ref ref="ERROR"/&gt;
    &lt;/root&gt;

    &lt;!-- ç‰¹å®šåŒ…æ—¥å¿—çº§åˆ« --&gt;
    &lt;logger name="com.example.demo" level="DEBUG"/&gt;
    &lt;logger name="org.springframework.web" level="INFO"/&gt;
    &lt;logger name="org.hibernate.SQL" level="DEBUG"/&gt;
&lt;/configuration&gt;
</code></pre>
<h4 id="åº”ç”¨ä¸­ä½¿ç”¨æ—¥å¿—"><a class="header" href="#åº”ç”¨ä¸­ä½¿ç”¨æ—¥å¿—">åº”ç”¨ä¸­ä½¿ç”¨æ—¥å¿—</a></h4>
<pre><code class="language-java">@Service
@Slf4j
public class UserService {

    public User findById(Long id) {
        log.debug("Finding user by id: {}", id);

        try {
            User user = userRepository.findById(id).orElse(null);
            if (user == null) {
                log.warn("User not found: {}", id);
            } else {
                log.info("User found: {}", user.getUsername());
            }
            return user;
        } catch (Exception e) {
            log.error("Error finding user: {}", id, e);
            throw e;
        }
    }
}
</code></pre>
<hr />
<h2 id="8-æµ‹è¯•"><a class="header" href="#8-æµ‹è¯•">8. æµ‹è¯•</a></h2>
<h3 id="81-å•å…ƒæµ‹è¯•"><a class="header" href="#81-å•å…ƒæµ‹è¯•">8.1 å•å…ƒæµ‹è¯•</a></h3>
<h4 id="åŸºç¡€æµ‹è¯•"><a class="header" href="#åŸºç¡€æµ‹è¯•">åŸºç¡€æµ‹è¯•</a></h4>
<pre><code class="language-java">@SpringBootTest
class UserServiceTest {

    @Autowired
    private UserService userService;

    @MockBean
    private UserRepository userRepository;

    @Test
    void testFindById() {
        // Given
        Long userId = 1L;
        User mockUser = new User();
        mockUser.setId(userId);
        mockUser.setUsername("test");

        when(userRepository.findById(userId))
            .thenReturn(Optional.of(mockUser));

        // When
        User result = userService.findById(userId);

        // Then
        assertNotNull(result);
        assertEquals("test", result.getUsername());
        verify(userRepository, times(1)).findById(userId);
    }

    @Test
    void testFindByIdNotFound() {
        // Given
        Long userId = 999L;
        when(userRepository.findById(userId))
            .thenReturn(Optional.empty());

        // When &amp; Then
        assertThrows(ResourceNotFoundException.class, () -&gt; {
            userService.findById(userId);
        });
    }
}
</code></pre>
<h3 id="82-é›†æˆæµ‹è¯•"><a class="header" href="#82-é›†æˆæµ‹è¯•">8.2 é›†æˆæµ‹è¯•</a></h3>
<pre><code class="language-java">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@AutoConfigureMockMvc
class UserControllerIntegrationTest {

    @Autowired
    private MockMvc mockMvc;

    @Autowired
    private ObjectMapper objectMapper;

    @Test
    void testCreateUser() throws Exception {
        User user = new User();
        user.setUsername("newuser");
        user.setEmail("newuser@example.com");
        user.setAge(25);

        mockMvc.perform(post("/api/users")
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(user)))
            .andExpect(status().isCreated())
            .andExpect(jsonPath("$.username").value("newuser"))
            .andExpect(jsonPath("$.email").value("newuser@example.com"));
    }

    @Test
    void testGetUser() throws Exception {
        mockMvc.perform(get("/api/users/1"))
            .andExpect(status().isOk())
            .andExpect(content().contentType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath("$.id").value(1));
    }
}
</code></pre>
<h3 id="83-æ•°æ®åº“æµ‹è¯•"><a class="header" href="#83-æ•°æ®åº“æµ‹è¯•">8.3 æ•°æ®åº“æµ‹è¯•</a></h3>
<pre><code class="language-java">@DataJpaTest
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
class UserRepositoryTest {

    @Autowired
    private UserRepository userRepository;

    @Autowired
    private TestEntityManager entityManager;

    @Test
    void testFindByUsername() {
        // Given
        User user = new User();
        user.setUsername("testuser");
        user.setEmail("test@example.com");
        user.setAge(30);
        entityManager.persist(user);
        entityManager.flush();

        // When
        Optional&lt;User&gt; found = userRepository.findByUsername("testuser");

        // Then
        assertTrue(found.isPresent());
        assertEquals("testuser", found.get().getUsername());
    }
}
</code></pre>
<hr />
<h2 id="9-éƒ¨ç½²"><a class="header" href="#9-éƒ¨ç½²">9. éƒ¨ç½²</a></h2>
<h3 id="91-æ‰“åŒ…éƒ¨ç½²"><a class="header" href="#91-æ‰“åŒ…éƒ¨ç½²">9.1 æ‰“åŒ…éƒ¨ç½²</a></h3>
<h4 id="mavenæ‰“åŒ…"><a class="header" href="#mavenæ‰“åŒ…">Mavenæ‰“åŒ…</a></h4>
<pre><code class="language-bash"># æ‰“åŒ…
mvn clean package

# è·³è¿‡æµ‹è¯•æ‰“åŒ…
mvn clean package -DskipTests

# æ‰“åŒ…åè¿è¡Œ
java -jar target/demo-1.0.0.jar

# æŒ‡å®šé…ç½®æ–‡ä»¶
java -jar target/demo-1.0.0.jar --spring.profiles.active=prod

# æŒ‡å®šå¤–éƒ¨é…ç½®æ–‡ä»¶
java -jar target/demo-1.0.0.jar --spring.config.location=/opt/config/application.yml
</code></pre>
<h3 id="92-dockeréƒ¨ç½²"><a class="header" href="#92-dockeréƒ¨ç½²">9.2 Dockeréƒ¨ç½²</a></h3>
<h4 id="dockerfile"><a class="header" href="#dockerfile">Dockerfile</a></h4>
<pre><code class="language-dockerfile">FROM openjdk:17-jdk-alpine
VOLUME /tmp
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
</code></pre>
<h4 id="å¤šé˜¶æ®µæ„å»º"><a class="header" href="#å¤šé˜¶æ®µæ„å»º">å¤šé˜¶æ®µæ„å»º</a></h4>
<pre><code class="language-dockerfile"># ç¬¬ä¸€é˜¶æ®µï¼šæ„å»º
FROM maven:3.8-openjdk-17 AS builder
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

# ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œ
FROM openjdk:17-jdk-alpine
VOLUME /tmp
COPY --from=builder /app/target/*.jar app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
</code></pre>
<h4 id="docker-compose"><a class="header" href="#docker-compose">Docker Compose</a></h4>
<pre><code class="language-yaml">version: '3.8'

services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      SPRING_PROFILES_ACTIVE: prod
      SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/demo
    depends_on:
      - mysql
      - redis

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: demo
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

volumes:
  mysql_data:
</code></pre>
<hr />
<h2 id="10-é«˜çº§ç‰¹æ€§"><a class="header" href="#10-é«˜çº§ç‰¹æ€§">10. é«˜çº§ç‰¹æ€§</a></h2>
<h3 id="101-è‡ªåŠ¨é…ç½®åŸç†"><a class="header" href="#101-è‡ªåŠ¨é…ç½®åŸç†">10.1 è‡ªåŠ¨é…ç½®åŸç†</a></h3>
<h4 id="è‡ªåŠ¨é…ç½®ç±»åˆ†æ"><a class="header" href="#è‡ªåŠ¨é…ç½®ç±»åˆ†æ">è‡ªåŠ¨é…ç½®ç±»åˆ†æ</a></h4>
<pre><code class="language-java">@Configuration
@ConditionalOnClass(DataSource.class)
@EnableConfigurationProperties(DataSourceProperties.class)
public class DataSourceAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    public DataSource dataSource(DataSourceProperties properties) {
        return properties.initializeDataSourceBuilder().build();
    }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>:</p>
<pre><code>1. @SpringBootApplication
   â””â”€â”€ @EnableAutoConfiguration
       â””â”€â”€ @Import(AutoConfigurationImportSelector.class)
           â””â”€â”€ è¯»å– META-INF/spring.factories
               â””â”€â”€ åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»
                   â””â”€â”€ æ ¹æ®æ¡ä»¶æ³¨è§£å†³å®šæ˜¯å¦ç”Ÿæ•ˆ
</code></pre>
<h4 id="è‡ªå®šä¹‰starter"><a class="header" href="#è‡ªå®šä¹‰starter">è‡ªå®šä¹‰Starter</a></h4>
<p><strong>é¡¹ç›®ç»“æ„</strong>:</p>
<pre><code>my-spring-boot-starter/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/
    â”œâ”€â”€ java/com/example/starter/
    â”‚   â”œâ”€â”€ MyServiceAutoConfiguration.java
    â”‚   â”œâ”€â”€ MyService.java
    â”‚   â””â”€â”€ MyServiceProperties.java
    â””â”€â”€ resources/
        â””â”€â”€ META-INF/
            â””â”€â”€ spring.factories
</code></pre>
<p><strong>è‡ªåŠ¨é…ç½®ç±»</strong>:</p>
<pre><code class="language-java">@Configuration
@EnableConfigurationProperties(MyServiceProperties.class)
@ConditionalOnClass(MyService.class)
public class MyServiceAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    public MyService myService(MyServiceProperties properties) {
        return new MyService(properties);
    }
}
</code></pre>
<p><strong>spring.factories</strong>:</p>
<pre><code class="language-properties">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.starter.MyServiceAutoConfiguration
</code></pre>
<h3 id="102-äº‹ä»¶æœºåˆ¶"><a class="header" href="#102-äº‹ä»¶æœºåˆ¶">10.2 äº‹ä»¶æœºåˆ¶</a></h3>
<h4 id="åº”ç”¨äº‹ä»¶"><a class="header" href="#åº”ç”¨äº‹ä»¶">åº”ç”¨äº‹ä»¶</a></h4>
<pre><code class="language-java">// è‡ªå®šä¹‰äº‹ä»¶
public class UserRegisteredEvent extends ApplicationEvent {
    private final User user;

    public UserRegisteredEvent(Object source, User user) {
        super(source);
        this.user = user;
    }

    public User getUser() {
        return user;
    }
}

// äº‹ä»¶å‘å¸ƒ
@Service
public class UserService {

    @Autowired
    private ApplicationEventPublisher eventPublisher;

    public User register(User user) {
        User savedUser = userRepository.save(user);

        // å‘å¸ƒäº‹ä»¶
        eventPublisher.publishEvent(
            new UserRegisteredEvent(this, savedUser)
        );

        return savedUser;
    }
}

// äº‹ä»¶ç›‘å¬
@Component
public class UserEventListener {

    @EventListener
    public void handleUserRegistered(UserRegisteredEvent event) {
        User user = event.getUser();
        System.out.println("User registered: " + user.getUsername());

        // å‘é€æ¬¢è¿é‚®ä»¶
        sendWelcomeEmail(user);
    }

    @Async
    @EventListener
    @Order(1)
    public void handleUserRegisteredAsync(UserRegisteredEvent event) {
        // å¼‚æ­¥å¤„ç†
    }

    private void sendWelcomeEmail(User user) {
        // å‘é€é‚®ä»¶é€»è¾‘
    }
}
</code></pre>
<h3 id="103-å¼‚æ­¥å¤„ç†"><a class="header" href="#103-å¼‚æ­¥å¤„ç†">10.3 å¼‚æ­¥å¤„ç†</a></h3>
<pre><code class="language-java">@Configuration
@EnableAsync
public class AsyncConfig implements AsyncConfigurer {

    @Override
    public Executor getAsyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);
        executor.setMaxPoolSize(10);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("async-");
        executor.initialize();
        return executor;
    }

    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return (ex, method, params) -&gt; {
            System.err.println("Async method error: " + method.getName());
            ex.printStackTrace();
        };
    }
}

@Service
public class AsyncService {

    @Async
    public CompletableFuture&lt;String&gt; processAsync(String input) {
        // å¼‚æ­¥å¤„ç†
        try {
            Thread.sleep(1000);
            return CompletableFuture.completedFuture("Processed: " + input);
        } catch (InterruptedException e) {
            return CompletableFuture.failedFuture(e);
        }
    }

    @Async
    public void processWithoutReturn() {
        // æ— è¿”å›å€¼çš„å¼‚æ­¥æ–¹æ³•
        System.out.println("Processing asynchronously");
    }
}
</code></pre>
<hr />
<h2 id="11-å­¦ä¹ éªŒè¯æ ‡å‡†"><a class="header" href="#11-å­¦ä¹ éªŒè¯æ ‡å‡†">11. å­¦ä¹ éªŒè¯æ ‡å‡†</a></h2>
<p>å®Œæˆæœ¬ç¬”è®°å­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p>
<h3 id="éªŒè¯æ ‡å‡†1-åŸºç¡€çŸ¥è¯†å¿…é¡»"><a class="header" href="#éªŒè¯æ ‡å‡†1-åŸºç¡€çŸ¥è¯†å¿…é¡»">éªŒè¯æ ‡å‡†1: åŸºç¡€çŸ¥è¯†ï¼ˆå¿…é¡»ï¼‰</a></h3>
<p><strong>æµ‹è¯•ä»»åŠ¡</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"/>
åˆ›å»ºSpring Booté¡¹ç›®å¹¶è¿è¡ŒHelloWorld</li>
<li><input disabled="" type="checkbox"/>
ç†è§£@SpringBootApplicationä¸‰å¤§æ ¸å¿ƒæ³¨è§£</li>
<li><input disabled="" type="checkbox"/>
é…ç½®application.ymlå¹¶ä½¿ç”¨å¤šç¯å¢ƒ</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨@Valueå’Œ@ConfigurationPropertiesç»‘å®šé…ç½®</li>
</ul>
<p><strong>éªŒè¯æ–¹å¼</strong>: ä»é›¶åˆ›å»ºé¡¹ç›®å¹¶å®ŒæˆåŸºç¡€é…ç½®</p>
<h3 id="éªŒè¯æ ‡å‡†2-webå¼€å‘å¿…é¡»"><a class="header" href="#éªŒè¯æ ‡å‡†2-webå¼€å‘å¿…é¡»">éªŒè¯æ ‡å‡†2: Webå¼€å‘ï¼ˆå¿…é¡»ï¼‰</a></h3>
<p><strong>æµ‹è¯•ä»»åŠ¡</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"/>
å®ç°å®Œæ•´çš„RESTful CRUD API</li>
<li><input disabled="" type="checkbox"/>
é…ç½®å…¨å±€å¼‚å¸¸å¤„ç†</li>
<li><input disabled="" type="checkbox"/>
å®ç°å‚æ•°æ ¡éªŒ</li>
<li><input disabled="" type="checkbox"/>
é…ç½®CORSè·¨åŸŸ</li>
</ul>
<p><strong>éªŒè¯æ–¹å¼</strong>: å®Œæˆç”¨æˆ·ç®¡ç†æ¨¡å—çš„å¼€å‘</p>
<h3 id="éªŒè¯æ ‡å‡†3-æ•°æ®è®¿é—®å¿…é¡»"><a class="header" href="#éªŒè¯æ ‡å‡†3-æ•°æ®è®¿é—®å¿…é¡»">éªŒè¯æ ‡å‡†3: æ•°æ®è®¿é—®ï¼ˆå¿…é¡»ï¼‰</a></h3>
<p><strong>æµ‹è¯•ä»»åŠ¡</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨JPAå®ç°æ•°æ®è®¿é—®</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨MyBatiså®ç°å¤æ‚æŸ¥è¯¢</li>
<li><input disabled="" type="checkbox"/>
é…ç½®äº‹åŠ¡ç®¡ç†</li>
<li><input disabled="" type="checkbox"/>
å®ç°åŠ¨æ€æŸ¥è¯¢</li>
</ul>
<p><strong>éªŒè¯æ–¹å¼</strong>: å®ŒæˆåŒ…å«å…³è”æŸ¥è¯¢çš„æ•°æ®è®¿é—®å±‚</p>
<h3 id="éªŒè¯æ ‡å‡†4-å®‰å…¨ä¸ç¼“å­˜æ¨è"><a class="header" href="#éªŒè¯æ ‡å‡†4-å®‰å…¨ä¸ç¼“å­˜æ¨è">éªŒè¯æ ‡å‡†4: å®‰å…¨ä¸ç¼“å­˜ï¼ˆæ¨èï¼‰</a></h3>
<p><strong>æµ‹è¯•ä»»åŠ¡</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"/>
é›†æˆSpring Security</li>
<li><input disabled="" type="checkbox"/>
å®ç°JWTè®¤è¯</li>
<li><input disabled="" type="checkbox"/>
é…ç½®Redisç¼“å­˜</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨ç¼“å­˜æ³¨è§£</li>
</ul>
<p><strong>éªŒè¯æ–¹å¼</strong>: å®ç°å¸¦è®¤è¯å’Œç¼“å­˜çš„å®Œæ•´åŠŸèƒ½</p>
<h3 id="éªŒè¯æ ‡å‡†5-éƒ¨ç½²ä¸è¿ç»´è¿›é˜¶"><a class="header" href="#éªŒè¯æ ‡å‡†5-éƒ¨ç½²ä¸è¿ç»´è¿›é˜¶">éªŒè¯æ ‡å‡†5: éƒ¨ç½²ä¸è¿ç»´ï¼ˆè¿›é˜¶ï¼‰</a></h3>
<p><strong>æµ‹è¯•ä»»åŠ¡</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"/>
æ‰“åŒ…Spring Bootåº”ç”¨</li>
<li><input disabled="" type="checkbox"/>
ç¼–å†™Dockerfile</li>
<li><input disabled="" type="checkbox"/>
é…ç½®Actuatorç›‘æ§</li>
<li><input disabled="" type="checkbox"/>
æŸ¥çœ‹åº”ç”¨æŒ‡æ ‡</li>
</ul>
<p><strong>éªŒè¯æ–¹å¼</strong>: å°†åº”ç”¨éƒ¨ç½²åˆ°Dockerå®¹å™¨</p>
<hr />
<h2 id="12-æ‰©å±•èµ„æº"><a class="header" href="#12-æ‰©å±•èµ„æº">12. æ‰©å±•èµ„æº</a></h2>
<h3 id="å®˜æ–¹æ–‡æ¡£"><a class="header" href="#å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></h3>
<ul>
<li>Spring Bootå®˜æ–¹æ–‡æ¡£: https://spring.io/projects/spring-boot</li>
<li>Spring Bootå‚è€ƒæŒ‡å—: https://docs.spring.io/spring-boot/docs/current/reference/html/</li>
<li>Spring Data JPAæ–‡æ¡£: https://spring.io/projects/spring-data-jpa</li>
</ul>
<h3 id="æ¨èä¹¦ç±"><a class="header" href="#æ¨èä¹¦ç±">æ¨èä¹¦ç±</a></h3>
<ul>
<li>ã€ŠSpring Bootå®æˆ˜ã€‹</li>
<li>ã€ŠSpring Bootç¼–ç¨‹æ€æƒ³ã€‹</li>
<li>ã€ŠSpring Bootå¾®æœåŠ¡å®æˆ˜ã€‹</li>
</ul>
<h3 id="è§†é¢‘æ•™ç¨‹"><a class="header" href="#è§†é¢‘æ•™ç¨‹">è§†é¢‘æ•™ç¨‹</a></h3>
<ul>
<li>å°šç¡…è°·Spring Bootæ•™ç¨‹</li>
<li>é»‘é©¬ç¨‹åºå‘˜Spring Bootä¸“é¢˜</li>
<li>Bilibili Spring Bootå®æˆ˜ç³»åˆ—</li>
</ul>
<h3 id="å®è·µé¡¹ç›®"><a class="header" href="#å®è·µé¡¹ç›®">å®è·µé¡¹ç›®</a></h3>
<ol>
<li>ä¸ªäººåšå®¢ç³»ç»Ÿ</li>
<li>ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ</li>
<li>åœ¨çº¿æ•™è‚²å¹³å°</li>
</ol>
<h3 id="è¿›é˜¶ä¸»é¢˜"><a class="header" href="#è¿›é˜¶ä¸»é¢˜">è¿›é˜¶ä¸»é¢˜</a></h3>
<ul>
<li>Spring Bootæºç åˆ†æ</li>
<li>è‡ªå®šä¹‰Starterå¼€å‘</li>
<li>Spring Bootæ€§èƒ½ä¼˜åŒ–</li>
<li>å¾®æœåŠ¡æ¶æ„è®¾è®¡</li>
</ul>
<hr />
<h2 id="-å­¦ä¹ è®°å½•"><a class="header" href="#-å­¦ä¹ è®°å½•">ğŸ“ å­¦ä¹ è®°å½•</a></h2>
<pre><code class="language-yaml">å­¦ä¹ æ—¥å¿—æ¨¡æ¿:
  æ—¥æœŸ: 2024-01-15
  å­¦ä¹ å†…å®¹: Spring Boot Webå¼€å‘
  å®è·µæ¡ˆä¾‹:
    - å®Œæˆäº†ç”¨æˆ·CRUDæ¥å£
    - å®ç°äº†å…¨å±€å¼‚å¸¸å¤„ç†
    - é…ç½®äº†å‚æ•°æ ¡éªŒ
  é‡åˆ°çš„é—®é¢˜:
    - JPAæ‡’åŠ è½½å¯¼è‡´sessionå…³é—­å¼‚å¸¸
    - è§£å†³æ–¹æ¡ˆ: é…ç½®open-in-viewæˆ–ä½¿ç”¨DTO
  å¿ƒå¾—ä½“ä¼š:
    - Spring Bootçº¦å®šä¼˜äºé…ç½®å¤§å¤§ç®€åŒ–äº†å¼€å‘
    - éœ€è¦ç†è§£è‡ªåŠ¨é…ç½®åŸç†æ‰èƒ½æ›´å¥½åœ°å®šåˆ¶
  ä¸‹ä¸€æ­¥è®¡åˆ’:
    - å­¦ä¹ Spring Security
    - é›†æˆRedisç¼“å­˜
</code></pre>
<hr />
<h2 id="-æ€»ç»“"><a class="header" href="#-æ€»ç»“">ğŸ¯ æ€»ç»“</a></h2>
<p>Spring Bootæ˜¯ç°ä»£Javaå¼€å‘çš„é¦–é€‰æ¡†æ¶ï¼š</p>
<ul>
<li>ğŸš€ <strong>å¿«é€Ÿå¼€å‘</strong>: å¼€ç®±å³ç”¨ï¼Œä¸“æ³¨ä¸šåŠ¡</li>
<li>ğŸ”§ <strong>çµæ´»é…ç½®</strong>: çº¦å®šä¼˜äºé…ç½®ï¼ŒæŒ‰éœ€å®šåˆ¶</li>
<li>ğŸ­ <strong>ç”Ÿäº§å°±ç»ª</strong>: å†…ç½®ç›‘æ§ã€å¥åº·æ£€æŸ¥</li>
<li>ğŸŒ <strong>ç”Ÿæ€å®Œå–„</strong>: ä¸Spring Cloudæ— ç¼é›†æˆ</li>
</ul>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>æŒæ¡æ ¸å¿ƒæ³¨è§£</strong>: @SpringBootApplicationã€@RestControllerã€@Autowired</li>
<li><strong>ç†è§£è‡ªåŠ¨é…ç½®</strong>: çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶</li>
<li><strong>å–„ç”¨Starter</strong>: å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹åº“</li>
<li><strong>ç”Ÿäº§å®è·µ</strong>: ç›‘æ§ã€æ—¥å¿—ã€å®‰å…¨ä¸€ä¸ªä¸èƒ½å°‘</li>
</ol>
<p>ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼Œæˆä¸ºSpring Booté«˜æ‰‹ï¼ğŸ‰</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ç¼–ç¨‹/springcloud/Istio.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ç¼–ç¨‹/springcloud/springcloud.alibaba.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ç¼–ç¨‹/springcloud/Istio.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ç¼–ç¨‹/springcloud/springcloud.alibaba.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

