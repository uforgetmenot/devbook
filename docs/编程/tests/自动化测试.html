<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæ•´å­¦ä¹ æŒ‡å— - å¼€å‘</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">å¼€å‘</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="æœç´¢æœ¬ä¹¦å†…å®¹..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæ•´å­¦ä¹ æŒ‡å—"><a class="header" href="#è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæ•´å­¦ä¹ æŒ‡å—">è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæ•´å­¦ä¹ æŒ‡å—</a></h1>
<blockquote>
<p><strong>å­¦ä¹ ç›®æ ‡å®šä½</strong>: æœ¬ç¬”è®°é¢å‘0-5å¹´ç»éªŒçš„è½¯ä»¶æµ‹è¯•å·¥ç¨‹å¸ˆã€å¼€å‘å·¥ç¨‹å¸ˆä»¥åŠå¸Œæœ›è½¬å‹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»ä¸šè€…</p>
<p><strong>é¢„æœŸå­¦ä¹ æˆæœ</strong>: é€šè¿‡æœ¬ç¬”è®°çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿç‹¬ç«‹è®¾è®¡ã€å¼€å‘å’Œç»´æŠ¤è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼ŒæŒæ¡ä¸»æµæµ‹è¯•å·¥å…·å’Œæœ€ä½³å®è·µ</p>
</blockquote>
<hr />
<h2 id="-ç›®å½•å¯¼èˆª"><a class="header" href="#-ç›®å½•å¯¼èˆª">ğŸ“‹ ç›®å½•å¯¼èˆª</a></h2>
<ul>
<li><a href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80">ç¬¬ä¸€ç« : è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-web%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%AE%9E%E6%88%98">ç¬¬äºŒç« : Webè‡ªåŠ¨åŒ–æµ‹è¯•å®æˆ˜</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-api%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95">ç¬¬ä¸‰ç« : APIè‡ªåŠ¨åŒ–æµ‹è¯•</a></li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95">ç¬¬å››ç« : ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•</a></li>
<li><a href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0">ç¬¬äº”ç« : æµ‹è¯•æ¡†æ¶è®¾è®¡ä¸å®ç°</a></li>
<li><a href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-cicd%E9%9B%86%E6%88%90">ç¬¬å…­ç« : CI/CDé›†æˆ</a></li>
<li><a href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%8C%96">ç¬¬ä¸ƒç« : æ€§èƒ½æµ‹è¯•è‡ªåŠ¨åŒ–</a></li>
<li><a href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E4%B8%8E%E7%9B%91%E6%8E%A7">ç¬¬å…«ç« : æµ‹è¯•æŠ¥å‘Šä¸ç›‘æ§</a></li>
</ul>
<hr />
<h2 id="ç¬¬ä¸€ç« -è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€"><a class="header" href="#ç¬¬ä¸€ç« -è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€">ç¬¬ä¸€ç« : è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€</a></h2>
<h3 id="11-è‡ªåŠ¨åŒ–æµ‹è¯•æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#11-è‡ªåŠ¨åŒ–æµ‹è¯•æ ¸å¿ƒæ¦‚å¿µ">1.1 è‡ªåŠ¨åŒ–æµ‹è¯•æ ¸å¿ƒæ¦‚å¿µ</a></h3>
<h4 id="111-ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•"><a class="header" href="#111-ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•">1.1.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•</a></h4>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯æŒ‡ä½¿ç”¨ä¸“é—¨çš„æµ‹è¯•å·¥å…·å’Œè„šæœ¬ï¼Œæ¨¡æ‹Ÿæ‰‹åŠ¨æµ‹è¯•è¿‡ç¨‹ï¼Œè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶éªŒè¯æµ‹è¯•ç»“æœçš„è¿‡ç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹å¾</strong>:</p>
<ul>
<li><strong>å¯é‡å¤æ€§</strong>: æµ‹è¯•ç”¨ä¾‹å¯ä»¥å¤šæ¬¡æ‰§è¡Œï¼Œç»“æœä¸€è‡´</li>
<li><strong>é«˜æ•ˆæ€§</strong>: èƒ½å¤Ÿå¿«é€Ÿæ‰§è¡Œå¤§é‡æµ‹è¯•ç”¨ä¾‹</li>
<li><strong>å‡†ç¡®æ€§</strong>: å‡å°‘äººä¸ºé”™è¯¯ï¼Œæé«˜æµ‹è¯•ç²¾åº¦</li>
<li><strong>æŒç»­æ€§</strong>: å¯é›†æˆåˆ°CI/CDæµç¨‹ä¸­æŒç»­æ‰§è¡Œ</li>
</ul>
<h4 id="112-è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼ä¸å±€é™"><a class="header" href="#112-è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼ä¸å±€é™">1.1.2 è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼ä¸å±€é™</a></h4>
<p><strong>âœ… ä¼˜åŠ¿</strong>:</p>
<ol>
<li><strong>æé«˜æµ‹è¯•æ•ˆç‡</strong>: è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥åœ¨çŸ­æ—¶é—´å†…æ‰§è¡Œå¤§é‡æµ‹è¯•ç”¨ä¾‹</li>
<li><strong>é™ä½é•¿æœŸæˆæœ¬</strong>: è™½ç„¶åˆæœŸæŠ•å…¥è¾ƒé«˜ï¼Œä½†é•¿æœŸæ¥çœ‹å¯ä»¥æ˜¾è‘—é™ä½æµ‹è¯•æˆæœ¬</li>
<li><strong>æé«˜æµ‹è¯•è¦†ç›–ç‡</strong>: å¯ä»¥æ‰§è¡Œæ›´å¤šçš„æµ‹è¯•åœºæ™¯å’Œè¾¹ç•Œæ¡ä»¶</li>
<li><strong>æ”¯æŒæŒç»­é›†æˆ</strong>: å¯ä»¥åœ¨ä»£ç æäº¤åè‡ªåŠ¨è§¦å‘æµ‹è¯•</li>
<li><strong>æé«˜äº§å“è´¨é‡</strong>: åŠæ—©å‘ç°ç¼ºé™·ï¼Œå‡å°‘ç”Ÿäº§ç¯å¢ƒé—®é¢˜</li>
</ol>
<p><strong>âŒ å±€é™æ€§</strong>:</p>
<ol>
<li><strong>åˆæœŸæŠ•å…¥é«˜</strong>: éœ€è¦å­¦ä¹ æˆæœ¬ã€æ¡†æ¶æ­å»ºã€ç”¨ä¾‹ç¼–å†™</li>
<li><strong>ç»´æŠ¤æˆæœ¬</strong>: UIå˜åŒ–ã€éœ€æ±‚å˜æ›´éœ€è¦åŒæ­¥æ›´æ–°æµ‹è¯•ç”¨ä¾‹</li>
<li><strong>ä¸é€‚åˆæ¢ç´¢æ€§æµ‹è¯•</strong>: æ— æ³•æ›¿ä»£äººçš„åˆ›é€ æ€§æ€ç»´</li>
<li><strong>æ— æ³•æµ‹è¯•ç”¨æˆ·ä½“éªŒ</strong>: æ— æ³•è¯„ä¼°ç•Œé¢ç¾è§‚åº¦ã€æ˜“ç”¨æ€§ç­‰ä¸»è§‚å› ç´ </li>
<li><strong>å·¥å…·ä¾èµ–æ€§</strong>: å—é™äºå·¥å…·çš„èƒ½åŠ›å’Œç¨³å®šæ€§</li>
</ol>
<h4 id="113-è‡ªåŠ¨åŒ–æµ‹è¯•é€‚ç”¨åœºæ™¯"><a class="header" href="#113-è‡ªåŠ¨åŒ–æµ‹è¯•é€‚ç”¨åœºæ™¯">1.1.3 è‡ªåŠ¨åŒ–æµ‹è¯•é€‚ç”¨åœºæ™¯</a></h4>
<p><strong>ğŸ¯ é€‚åˆè‡ªåŠ¨åŒ–çš„åœºæ™¯</strong>:</p>
<ul>
<li>å›å½’æµ‹è¯•ï¼ˆåŠŸèƒ½ç¨³å®šï¼Œé¢‘ç¹æ‰§è¡Œï¼‰</li>
<li>å†’çƒŸæµ‹è¯•ï¼ˆæ ¸å¿ƒåŠŸèƒ½éªŒè¯ï¼‰</li>
<li>æ•°æ®é©±åŠ¨æµ‹è¯•ï¼ˆç›¸åŒé€»è¾‘ï¼Œä¸åŒæ•°æ®ï¼‰</li>
<li>æ€§èƒ½æµ‹è¯•å’Œå‹åŠ›æµ‹è¯•</li>
<li>APIæ¥å£æµ‹è¯•</li>
<li>è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•</li>
</ul>
<p><strong>ğŸš« ä¸é€‚åˆè‡ªåŠ¨åŒ–çš„åœºæ™¯</strong>:</p>
<ul>
<li>éœ€æ±‚é¢‘ç¹å˜åŠ¨çš„åŠŸèƒ½</li>
<li>ä¸€æ¬¡æ€§æµ‹è¯•åœºæ™¯</li>
<li>å¤æ‚çš„ç”¨æˆ·ä½“éªŒæµ‹è¯•</li>
<li>éœ€è¦äººå·¥åˆ¤æ–­çš„åœºæ™¯</li>
<li>æŠ•å…¥äº§å‡ºæ¯”è¿‡ä½çš„åœºæ™¯</li>
</ul>
<h4 id="114-æµ‹è¯•é‡‘å­—å¡”ç†è®º"><a class="header" href="#114-æµ‹è¯•é‡‘å­—å¡”ç†è®º">1.1.4 æµ‹è¯•é‡‘å­—å¡”ç†è®º</a></h4>
<p>æµ‹è¯•é‡‘å­—å¡”ç”±Mike Cohnæå‡ºï¼Œæè¿°äº†ä¸åŒå±‚æ¬¡æµ‹è¯•çš„æ¯”ä¾‹å…³ç³»ï¼š</p>
<pre><code>        /\
       /  \      E2E Tests (10%)
      /----\     UIè‡ªåŠ¨åŒ–æµ‹è¯•
     /------\
    /--------\   Integration Tests (20%)
   /----------\  é›†æˆæµ‹è¯•
  /------------\
 /--------------\ Unit Tests (70%)
/----------------\ å•å…ƒæµ‹è¯•
</code></pre>
<p><strong>å„å±‚æ¬¡æµ‹è¯•ç‰¹ç‚¹</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>æµ‹è¯•å±‚æ¬¡</th><th>æ¯”ä¾‹</th><th>æ‰§è¡Œé€Ÿåº¦</th><th>ç»´æŠ¤æˆæœ¬</th><th>åé¦ˆé€Ÿåº¦</th><th>è¦†ç›–èŒƒå›´</th></tr></thead><tbody>
<tr><td>å•å…ƒæµ‹è¯•</td><td>70%</td><td>æå¿«</td><td>ä½</td><td>ç§’çº§</td><td>ä»£ç çº§</td></tr>
<tr><td>é›†æˆæµ‹è¯•</td><td>20%</td><td>è¾ƒå¿«</td><td>ä¸­</td><td>åˆ†é’Ÿçº§</td><td>æ¨¡å—çº§</td></tr>
<tr><td>E2Eæµ‹è¯•</td><td>10%</td><td>è¾ƒæ…¢</td><td>é«˜</td><td>å°æ—¶çº§</td><td>ä¸šåŠ¡çº§</td></tr>
</tbody></table>
</div>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>:</p>
<ol>
<li>ä¼˜å…ˆç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡</li>
<li>é€‚é‡çš„é›†æˆæµ‹è¯•éªŒè¯æ¨¡å—åä½œ</li>
<li>å°‘é‡E2Eæµ‹è¯•è¦†ç›–å…³é”®ä¸šåŠ¡æµç¨‹</li>
<li>é¿å…"å€’ç½®é‡‘å­—å¡”"ï¼ˆè¿‡åº¦ä¾èµ–UIæµ‹è¯•ï¼‰</li>
</ol>
<hr />
<h3 id="12-æµ‹è¯•ç±»å‹è¯¦è§£"><a class="header" href="#12-æµ‹è¯•ç±»å‹è¯¦è§£">1.2 æµ‹è¯•ç±»å‹è¯¦è§£</a></h3>
<h4 id="121-å•å…ƒæµ‹è¯•-unit-testing"><a class="header" href="#121-å•å…ƒæµ‹è¯•-unit-testing">1.2.1 å•å…ƒæµ‹è¯• (Unit Testing)</a></h4>
<p><strong>å®šä¹‰</strong>: å¯¹è½¯ä»¶ä¸­æœ€å°å¯æµ‹è¯•å•å…ƒï¼ˆå‡½æ•°ã€æ–¹æ³•ã€ç±»ï¼‰è¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>:</p>
<ul>
<li>æµ‹è¯•ç²’åº¦æœ€å°</li>
<li>æ‰§è¡Œé€Ÿåº¦æœ€å¿«</li>
<li>ç”±å¼€å‘äººå‘˜ç¼–å†™</li>
<li>é«˜åº¦éš”ç¦»ï¼ˆä½¿ç”¨Mock/Stubï¼‰</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹ - Python pytest</strong>:</p>
<pre><code class="language-python"># calculator.py
class Calculator:
    def add(self, a, b):
        """åŠ æ³•è¿ç®—"""
        return a + b

    def divide(self, a, b):
        """é™¤æ³•è¿ç®—"""
        if b == 0:
            raise ValueError("é™¤æ•°ä¸èƒ½ä¸º0")
        return a / b

# test_calculator.py
import pytest
from calculator import Calculator

class TestCalculator:
    def setup_method(self):
        """æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰çš„å‡†å¤‡å·¥ä½œ"""
        self.calc = Calculator()

    def test_add_positive_numbers(self):
        """æµ‹è¯•æ­£æ•°ç›¸åŠ """
        result = self.calc.add(3, 5)
        assert result == 8

    def test_add_negative_numbers(self):
        """æµ‹è¯•è´Ÿæ•°ç›¸åŠ """
        result = self.calc.add(-3, -5)
        assert result == -8

    def test_divide_normal(self):
        """æµ‹è¯•æ­£å¸¸é™¤æ³•"""
        result = self.calc.divide(10, 2)
        assert result == 5.0

    def test_divide_by_zero(self):
        """æµ‹è¯•é™¤ä»¥é›¶å¼‚å¸¸"""
        with pytest.raises(ValueError, match="é™¤æ•°ä¸èƒ½ä¸º0"):
            self.calc.divide(10, 0)

    @pytest.mark.parametrize("a,b,expected", [
        (0, 0, 0),
        (1, 0, 1),
        (100, 200, 300),
        (-10, 10, 0)
    ])
    def test_add_multiple_cases(self, a, b, expected):
        """å‚æ•°åŒ–æµ‹è¯•å¤šä¸ªåœºæ™¯"""
        assert self.calc.add(a, b) == expected
</code></pre>
<p><strong>æ‰§è¡Œæµ‹è¯•</strong>:</p>
<pre><code class="language-bash"># è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest test_calculator.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest test_calculator.py::TestCalculator::test_add_positive_numbers

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=calculator --cov-report=html
</code></pre>
<h4 id="122-é›†æˆæµ‹è¯•-integration-testing"><a class="header" href="#122-é›†æˆæµ‹è¯•-integration-testing">1.2.2 é›†æˆæµ‹è¯• (Integration Testing)</a></h4>
<p><strong>å®šä¹‰</strong>: æµ‹è¯•å¤šä¸ªæ¨¡å—æˆ–ç»„ä»¶ä¹‹é—´çš„äº¤äº’å’Œåä½œã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ - æ•°æ®åº“é›†æˆæµ‹è¯•</strong>:</p>
<pre><code class="language-python"># models.py
from sqlalchemy import Column, Integer, String, create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

Base = declarative_base()

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    username = Column(String(50), unique=True, nullable=False)
    email = Column(String(100), nullable=False)

class UserRepository:
    def __init__(self, session):
        self.session = session

    def create_user(self, username, email):
        user = User(username=username, email=email)
        self.session.add(user)
        self.session.commit()
        return user

    def get_user_by_username(self, username):
        return self.session.query(User).filter_by(username=username).first()

# test_integration.py
import pytest
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from models import Base, User, UserRepository

@pytest.fixture(scope='function')
def db_session():
    """åˆ›å»ºæµ‹è¯•æ•°æ®åº“ä¼šè¯"""
    engine = create_engine('sqlite:///:memory:')  # ä½¿ç”¨å†…å­˜æ•°æ®åº“
    Base.metadata.create_all(engine)
    Session = sessionmaker(bind=engine)
    session = Session()

    yield session

    session.close()

class TestUserRepository:
    def test_create_and_retrieve_user(self, db_session):
        """æµ‹è¯•ç”¨æˆ·åˆ›å»ºå’ŒæŸ¥è¯¢"""
        repo = UserRepository(db_session)

        # åˆ›å»ºç”¨æˆ·
        user = repo.create_user("testuser", "test@example.com")
        assert user.id is not None
        assert user.username == "testuser"

        # æŸ¥è¯¢ç”¨æˆ·
        retrieved_user = repo.get_user_by_username("testuser")
        assert retrieved_user is not None
        assert retrieved_user.email == "test@example.com"

    def test_duplicate_username(self, db_session):
        """æµ‹è¯•é‡å¤ç”¨æˆ·å"""
        repo = UserRepository(db_session)
        repo.create_user("testuser", "test1@example.com")

        with pytest.raises(Exception):  # ä¼šè§¦å‘æ•°æ®åº“å”¯ä¸€çº¦æŸå¼‚å¸¸
            repo.create_user("testuser", "test2@example.com")
</code></pre>
<h4 id="123-ç«¯åˆ°ç«¯æµ‹è¯•-e2e-testing"><a class="header" href="#123-ç«¯åˆ°ç«¯æµ‹è¯•-e2e-testing">1.2.3 ç«¯åˆ°ç«¯æµ‹è¯• (E2E Testing)</a></h4>
<p><strong>å®šä¹‰</strong>: ä»ç”¨æˆ·è§†è§’æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹ï¼ŒéªŒè¯ç³»ç»Ÿå„ç»„ä»¶çš„ååŒå·¥ä½œã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹å°†åœ¨Webè‡ªåŠ¨åŒ–æµ‹è¯•ç« èŠ‚è¯¦ç»†è®²è§£</strong></p>
<hr />
<h3 id="13-è‡ªåŠ¨åŒ–æµ‹è¯•å­¦ä¹ è·¯å¾„"><a class="header" href="#13-è‡ªåŠ¨åŒ–æµ‹è¯•å­¦ä¹ è·¯å¾„">1.3 è‡ªåŠ¨åŒ–æµ‹è¯•å­¦ä¹ è·¯å¾„</a></h3>
<pre><code class="language-mermaid">graph TD
    A[è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€] --&gt; B[ç¼–ç¨‹åŸºç¡€]
    B --&gt; C[é€‰æ‹©æµ‹è¯•é¢†åŸŸ]
    C --&gt; D[Webè‡ªåŠ¨åŒ–]
    C --&gt; E[APIè‡ªåŠ¨åŒ–]
    C --&gt; F[ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–]
    D --&gt; G[æ¡†æ¶è®¾è®¡]
    E --&gt; G
    F --&gt; G
    G --&gt; H[CI/CDé›†æˆ]
    H --&gt; I[è¿›é˜¶ä¸»é¢˜]
    I --&gt; J[å®é™…é¡¹ç›®åº”ç”¨]
</code></pre>
<p><strong>æ¨èå­¦ä¹ æ—¶é—´çº¿</strong>:</p>
<ul>
<li><strong>ç¬¬1-2å‘¨</strong>: è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€ç†è®º + ç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼ˆPython/Javaï¼‰</li>
<li><strong>ç¬¬3-6å‘¨</strong>: é€‰æ‹©ä¸€ä¸ªé¢†åŸŸæ·±å…¥å­¦ä¹ ï¼ˆWeb/API/ç§»åŠ¨ç«¯ï¼‰</li>
<li><strong>ç¬¬7-8å‘¨</strong>: å­¦ä¹ æµ‹è¯•æ¡†æ¶å’Œè®¾è®¡æ¨¡å¼ï¼ˆPOMã€æ•°æ®é©±åŠ¨ç­‰ï¼‰</li>
<li><strong>ç¬¬9-10å‘¨</strong>: CI/CDé›†æˆå’ŒæŒç»­æµ‹è¯•</li>
<li><strong>ç¬¬11-12å‘¨</strong>: å®é™…é¡¹ç›®å®è·µå’Œé—®é¢˜è§£å†³</li>
</ul>
<hr />
<h2 id="ç¬¬äºŒç« -webè‡ªåŠ¨åŒ–æµ‹è¯•å®æˆ˜"><a class="header" href="#ç¬¬äºŒç« -webè‡ªåŠ¨åŒ–æµ‹è¯•å®æˆ˜">ç¬¬äºŒç« : Webè‡ªåŠ¨åŒ–æµ‹è¯•å®æˆ˜</a></h2>
<h3 id="21-selenium-webdriver-æ ¸å¿ƒæŠ€æœ¯"><a class="header" href="#21-selenium-webdriver-æ ¸å¿ƒæŠ€æœ¯">2.1 Selenium WebDriver æ ¸å¿ƒæŠ€æœ¯</a></h3>
<h4 id="211-seleniumç®€ä»‹"><a class="header" href="#211-seleniumç®€ä»‹">2.1.1 Seleniumç®€ä»‹</a></h4>
<p>Seleniumæ˜¯Webè‡ªåŠ¨åŒ–æµ‹è¯•çš„äº‹å®æ ‡å‡†ï¼Œæ”¯æŒå¤šç§æµè§ˆå™¨å’Œç¼–ç¨‹è¯­è¨€ã€‚</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>:</p>
<ul>
<li><strong>Selenium WebDriver</strong>: æµè§ˆå™¨è‡ªåŠ¨åŒ–API</li>
<li><strong>Selenium Grid</strong>: åˆ†å¸ƒå¼æµ‹è¯•æ‰§è¡Œ</li>
<li><strong>Selenium IDE</strong>: å½•åˆ¶å›æ”¾å·¥å…·</li>
</ul>
<p><strong>æ”¯æŒçš„æµè§ˆå™¨</strong>:</p>
<ul>
<li>Chrome/Chromium (ChromeDriver)</li>
<li>Firefox (GeckoDriver)</li>
<li>Safari (SafariDriver)</li>
<li>Edge (EdgeDriver)</li>
</ul>
<h4 id="212-ç¯å¢ƒæ­å»º"><a class="header" href="#212-ç¯å¢ƒæ­å»º">2.1.2 ç¯å¢ƒæ­å»º</a></h4>
<p><strong>Python + Seleniumå®‰è£…</strong>:</p>
<pre><code class="language-bash"># å®‰è£…Selenium
pip install selenium

# å®‰è£…WebDriverç®¡ç†å·¥å…·
pip install webdriver-manager

# å®‰è£…æµ‹è¯•æ¡†æ¶
pip install pytest pytest-html
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç  - åŸºç¡€ä½¿ç”¨</strong>:</p>
<pre><code class="language-python">from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.chrome.service import Service

# è‡ªåŠ¨ç®¡ç†ChromeDriver
service = Service(ChromeDriverManager().install())
driver = webdriver.Chrome(service=service)

try:
    # æ‰“å¼€ç½‘é¡µ
    driver.get("https://www.example.com")

    # æœ€å¤§åŒ–çª—å£
    driver.maximize_window()

    # æŸ¥æ‰¾å…ƒç´ å¹¶ç‚¹å‡»
    element = driver.find_element(By.ID, "submit-button")
    element.click()

    # ç­‰å¾…å…ƒç´ å‡ºç°
    wait = WebDriverWait(driver, 10)
    result = wait.until(
        EC.presence_of_element_located((By.CLASS_NAME, "result"))
    )

    print(f"ç»“æœ: {result.text}")

finally:
    driver.quit()
</code></pre>
<h4 id="213-å…ƒç´ å®šä½ç­–ç•¥"><a class="header" href="#213-å…ƒç´ å®šä½ç­–ç•¥">2.1.3 å…ƒç´ å®šä½ç­–ç•¥</a></h4>
<p><strong>8ç§å®šä½æ–¹å¼</strong>:</p>
<pre><code class="language-python">from selenium.webdriver.common.by import By

# 1. IDå®šä½ï¼ˆæœ€æ¨èï¼Œå”¯ä¸€ä¸”ç¨³å®šï¼‰
element = driver.find_element(By.ID, "username")

# 2. Nameå®šä½
element = driver.find_element(By.NAME, "email")

# 3. Class Nameå®šä½
element = driver.find_element(By.CLASS_NAME, "btn-primary")

# 4. Tag Nameå®šä½
element = driver.find_element(By.TAG_NAME, "button")

# 5. Link Textå®šä½ï¼ˆå®Œæ•´æ–‡æœ¬ï¼‰
element = driver.find_element(By.LINK_TEXT, "ç™»å½•")

# 6. Partial Link Textå®šä½ï¼ˆéƒ¨åˆ†æ–‡æœ¬ï¼‰
element = driver.find_element(By.PARTIAL_LINK_TEXT, "ç™»")

# 7. CSS Selectorå®šä½ï¼ˆæ¨èï¼Œçµæ´»å¼ºå¤§ï¼‰
element = driver.find_element(By.CSS_SELECTOR, "div.container &gt; input[type='text']")

# 8. XPathå®šä½ï¼ˆæœ€çµæ´»ï¼Œä½†æ€§èƒ½è¾ƒå·®ï¼‰
element = driver.find_element(By.XPATH, "//input[@id='username']")
</code></pre>
<p><strong>å®šä½å™¨é€‰æ‹©ä¼˜å…ˆçº§</strong>:</p>
<ol>
<li><strong>ID</strong> &gt; <strong>Name</strong> &gt; <strong>CSS Selector</strong> &gt; <strong>XPath</strong></li>
<li>ä¼˜å…ˆé€‰æ‹©ç¨³å®šçš„å±æ€§ï¼ˆé¿å…åŠ¨æ€ç”Ÿæˆçš„IDï¼‰</li>
<li>é¿å…ä½¿ç”¨ç»å¯¹è·¯å¾„XPath</li>
</ol>
<p><strong>CSS Selectorå®ç”¨æŠ€å·§</strong>:</p>
<pre><code class="language-python"># å±æ€§é€‰æ‹©å™¨
driver.find_element(By.CSS_SELECTOR, "input[name='username']")

# ç±»é€‰æ‹©å™¨ç»„åˆ
driver.find_element(By.CSS_SELECTOR, ".form-control.input-lg")

# å­å…ƒç´ é€‰æ‹©
driver.find_element(By.CSS_SELECTOR, "div.header &gt; nav &gt; a")

# ç¬¬nä¸ªå­å…ƒç´ 
driver.find_element(By.CSS_SELECTOR, "ul &gt; li:nth-child(2)")

# å±æ€§åŒ…å«
driver.find_element(By.CSS_SELECTOR, "a[href*='login']")

# å±æ€§å¼€å¤´
driver.find_element(By.CSS_SELECTOR, "img[src^='https://']")

# å±æ€§ç»“å°¾
driver.find_element(By.CSS_SELECTOR, "a[href$='.pdf']")
</code></pre>
<h4 id="214-å¸¸è§æ“ä½œ"><a class="header" href="#214-å¸¸è§æ“ä½œ">2.1.4 å¸¸è§æ“ä½œ</a></h4>
<p><strong>è¾“å…¥å’Œç‚¹å‡»</strong>:</p>
<pre><code class="language-python">from selenium.webdriver.common.keys import Keys

# è¾“å…¥æ–‡æœ¬
input_field = driver.find_element(By.ID, "search")
input_field.send_keys("è‡ªåŠ¨åŒ–æµ‹è¯•")

# æ¸…ç©ºè¾“å…¥æ¡†
input_field.clear()

# æ¨¡æ‹Ÿé”®ç›˜æ“ä½œ
input_field.send_keys("Selenium")
input_field.send_keys(Keys.ENTER)

# ç‚¹å‡»æŒ‰é’®
button = driver.find_element(By.ID, "submit")
button.click()

# åŒå‡»
from selenium.webdriver.common.action_chains import ActionChains
actions = ActionChains(driver)
actions.double_click(button).perform()

# å³é”®ç‚¹å‡»
actions.context_click(button).perform()
</code></pre>
<p><strong>ä¸‹æ‹‰æ¡†æ“ä½œ</strong>:</p>
<pre><code class="language-python">from selenium.webdriver.support.ui import Select

# å®šä½ä¸‹æ‹‰æ¡†
select_element = driver.find_element(By.ID, "country")
select = Select(select_element)

# é€šè¿‡å¯è§æ–‡æœ¬é€‰æ‹©
select.select_by_visible_text("ä¸­å›½")

# é€šè¿‡å€¼é€‰æ‹©
select.select_by_value("cn")

# é€šè¿‡ç´¢å¼•é€‰æ‹©
select.select_by_index(1)

# è·å–æ‰€æœ‰é€‰é¡¹
all_options = select.options
for option in all_options:
    print(option.text)

# è·å–å½“å‰é€‰ä¸­çš„é€‰é¡¹
selected_option = select.first_selected_option
print(selected_option.text)
</code></pre>
<p><strong>å¤šçª—å£/æ ‡ç­¾é¡µå¤„ç†</strong>:</p>
<pre><code class="language-python"># è·å–å½“å‰çª—å£å¥æŸ„
main_window = driver.current_window_handle

# ç‚¹å‡»æ‰“å¼€æ–°çª—å£çš„é“¾æ¥
driver.find_element(By.LINK_TEXT, "æ‰“å¼€æ–°çª—å£").click()

# è·å–æ‰€æœ‰çª—å£å¥æŸ„
all_windows = driver.window_handles

# åˆ‡æ¢åˆ°æ–°çª—å£
for window in all_windows:
    if window != main_window:
        driver.switch_to.window(window)
        break

# åœ¨æ–°çª—å£ä¸­æ“ä½œ
print(driver.title)

# å…³é—­å½“å‰çª—å£
driver.close()

# åˆ‡æ¢å›ä¸»çª—å£
driver.switch_to.window(main_window)
</code></pre>
<p><strong>iframeå¤„ç†</strong>:</p>
<pre><code class="language-python"># åˆ‡æ¢åˆ°iframeï¼ˆé€šè¿‡ç´¢å¼•ï¼‰
driver.switch_to.frame(0)

# åˆ‡æ¢åˆ°iframeï¼ˆé€šè¿‡nameæˆ–idï¼‰
driver.switch_to.frame("iframe_name")

# åˆ‡æ¢åˆ°iframeï¼ˆé€šè¿‡WebElementï¼‰
iframe_element = driver.find_element(By.TAG_NAME, "iframe")
driver.switch_to.frame(iframe_element)

# åœ¨iframeä¸­æ“ä½œ
driver.find_element(By.ID, "button_in_iframe").click()

# åˆ‡æ¢å›ä¸»æ–‡æ¡£
driver.switch_to.default_content()
</code></pre>
<p><strong>å¼¹çª—å¤„ç†</strong>:</p>
<pre><code class="language-python">from selenium.webdriver.common.alert import Alert

# ç‚¹å‡»è§¦å‘å¼¹çª—çš„æŒ‰é’®
driver.find_element(By.ID, "alert-button").click()

# åˆ‡æ¢åˆ°å¼¹çª—
alert = Alert(driver)

# è·å–å¼¹çª—æ–‡æœ¬
print(alert.text)

# æ¥å—å¼¹çª—ï¼ˆç‚¹å‡»ç¡®å®šï¼‰
alert.accept()

# æ‹’ç»å¼¹çª—ï¼ˆç‚¹å‡»å–æ¶ˆï¼‰
# alert.dismiss()

# è¾“å…¥æ–‡æœ¬åˆ°promptå¼¹çª—
# alert.send_keys("è¾“å…¥çš„æ–‡æœ¬")
# alert.accept()
</code></pre>
<h4 id="215-ç­‰å¾…æœºåˆ¶"><a class="header" href="#215-ç­‰å¾…æœºåˆ¶">2.1.5 ç­‰å¾…æœºåˆ¶</a></h4>
<p><strong>ä¸‰ç§ç­‰å¾…æ–¹å¼å¯¹æ¯”</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>ç­‰å¾…ç±»å‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody>
<tr><td>å¼ºåˆ¶ç­‰å¾…</td><td>ç®€å•</td><td>æµªè´¹æ—¶é—´ï¼Œä¸æ™ºèƒ½</td><td>ä¸æ¨èä½¿ç”¨</td></tr>
<tr><td>éšå¼ç­‰å¾…</td><td>å…¨å±€ç”Ÿæ•ˆ</td><td>ä¸å¤Ÿçµæ´»</td><td>ç®€å•åœºæ™¯</td></tr>
<tr><td>æ˜¾å¼ç­‰å¾…</td><td>çµæ´»ï¼Œæ™ºèƒ½</td><td>ä»£ç ç¨å¤æ‚</td><td>æ¨èä½¿ç”¨</td></tr>
</tbody></table>
</div>
<p><strong>å®æˆ˜ä»£ç </strong>:</p>
<pre><code class="language-python">import time
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By

# 1. å¼ºåˆ¶ç­‰å¾…ï¼ˆä¸æ¨èï¼‰
time.sleep(5)  # æ— è®ºå…ƒç´ æ˜¯å¦åŠ è½½å®Œæˆéƒ½ç­‰å¾…5ç§’

# 2. éšå¼ç­‰å¾…ï¼ˆå…¨å±€è®¾ç½®ï¼‰
driver.implicitly_wait(10)  # æœ€å¤šç­‰å¾…10ç§’ï¼Œæ‰¾åˆ°å…ƒç´ ç«‹å³è¿”å›

# 3. æ˜¾å¼ç­‰å¾…ï¼ˆæ¨èï¼‰
wait = WebDriverWait(driver, 10, poll_frequency=0.5)

# ç­‰å¾…å…ƒç´ å¯è§
element = wait.until(
    EC.visibility_of_element_located((By.ID, "result"))
)

# ç­‰å¾…å…ƒç´ å¯ç‚¹å‡»
element = wait.until(
    EC.element_to_be_clickable((By.ID, "submit"))
)

# ç­‰å¾…å…ƒç´ å‡ºç°
element = wait.until(
    EC.presence_of_element_located((By.CLASS_NAME, "content"))
)

# ç­‰å¾…æ–‡æœ¬å‡ºç°
wait.until(
    EC.text_to_be_present_in_element((By.ID, "status"), "æˆåŠŸ")
)

# ç­‰å¾…URLåŒ…å«ç‰¹å®šæ–‡æœ¬
wait.until(EC.url_contains("dashboard"))

# ç­‰å¾…æ ‡é¢˜åŒ…å«ç‰¹å®šæ–‡æœ¬
wait.until(EC.title_contains("é¦–é¡µ"))

# è‡ªå®šä¹‰ç­‰å¾…æ¡ä»¶
def element_has_text(locator, text):
    def _predicate(driver):
        element = driver.find_element(*locator)
        return text in element.text
    return _predicate

wait.until(element_has_text((By.ID, "message"), "æ¬¢è¿"))
</code></pre>
<h4 id="216-å®Œæ•´å®æˆ˜æ¡ˆä¾‹---ç™»å½•æµ‹è¯•"><a class="header" href="#216-å®Œæ•´å®æˆ˜æ¡ˆä¾‹---ç™»å½•æµ‹è¯•">2.1.6 å®Œæ•´å®æˆ˜æ¡ˆä¾‹ - ç™»å½•æµ‹è¯•</a></h4>
<pre><code class="language-python">import pytest
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.chrome.service import Service

class TestLogin:
    @pytest.fixture(scope="function")
    def driver(self):
        """ä¸ºæ¯ä¸ªæµ‹è¯•æ–¹æ³•åˆ›å»ºç‹¬ç«‹çš„æµè§ˆå™¨å®ä¾‹"""
        service = Service(ChromeDriverManager().install())
        driver = webdriver.Chrome(service=service)
        driver.maximize_window()
        driver.implicitly_wait(10)

        yield driver

        driver.quit()

    def test_login_success(self, driver):
        """æµ‹è¯•æˆåŠŸç™»å½•"""
        # æ‰“å¼€ç™»å½•é¡µé¢
        driver.get("https://example.com/login")

        # è¾“å…¥ç”¨æˆ·å
        username_input = driver.find_element(By.ID, "username")
        username_input.send_keys("testuser")

        # è¾“å…¥å¯†ç 
        password_input = driver.find_element(By.ID, "password")
        password_input.send_keys("Test@123")

        # ç‚¹å‡»ç™»å½•æŒ‰é’®
        login_button = driver.find_element(By.ID, "login-btn")
        login_button.click()

        # éªŒè¯ç™»å½•æˆåŠŸ
        wait = WebDriverWait(driver, 10)
        welcome_msg = wait.until(
            EC.visibility_of_element_located((By.CLASS_NAME, "welcome"))
        )

        assert "æ¬¢è¿" in welcome_msg.text
        assert "dashboard" in driver.current_url

    def test_login_with_wrong_password(self, driver):
        """æµ‹è¯•é”™è¯¯å¯†ç ç™»å½•"""
        driver.get("https://example.com/login")

        driver.find_element(By.ID, "username").send_keys("testuser")
        driver.find_element(By.ID, "password").send_keys("wrongpassword")
        driver.find_element(By.ID, "login-btn").click()

        # éªŒè¯é”™è¯¯æç¤º
        wait = WebDriverWait(driver, 10)
        error_msg = wait.until(
            EC.visibility_of_element_located((By.CLASS_NAME, "error-message"))
        )

        assert "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯" in error_msg.text

    def test_login_with_empty_username(self, driver):
        """æµ‹è¯•ç©ºç”¨æˆ·åç™»å½•"""
        driver.get("https://example.com/login")

        driver.find_element(By.ID, "password").send_keys("Test@123")
        driver.find_element(By.ID, "login-btn").click()

        # éªŒè¯HTML5éªŒè¯æç¤º
        username_input = driver.find_element(By.ID, "username")
        validation_message = username_input.get_attribute("validationMessage")

        assert "è¯·å¡«å†™æ­¤å­—æ®µ" in validation_message

    @pytest.mark.parametrize("username,password,expected_error", [
        ("", "Test@123", "è¯·è¾“å…¥ç”¨æˆ·å"),
        ("testuser", "", "è¯·è¾“å…¥å¯†ç "),
        ("short", "123", "ç”¨æˆ·åè‡³å°‘6ä¸ªå­—ç¬¦"),
        ("testuser", "weak", "å¯†ç å¼ºåº¦ä¸è¶³"),
    ])
    def test_login_validation(self, driver, username, password, expected_error):
        """å‚æ•°åŒ–æµ‹è¯•ç™»å½•éªŒè¯"""
        driver.get("https://example.com/login")

        if username:
            driver.find_element(By.ID, "username").send_keys(username)
        if password:
            driver.find_element(By.ID, "password").send_keys(password)

        driver.find_element(By.ID, "login-btn").click()

        wait = WebDriverWait(driver, 5)
        error_element = wait.until(
            EC.presence_of_element_located((By.CLASS_NAME, "validation-error"))
        )

        assert expected_error in error_element.text
</code></pre>
<p><strong>æ‰§è¡Œæµ‹è¯•</strong>:</p>
<pre><code class="language-bash"># è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest test_login.py -v

# ç”ŸæˆHTMLæŠ¥å‘Š
pytest test_login.py --html=report.html --self-contained-html

# å¹¶è¡Œæ‰§è¡Œï¼ˆå®‰è£…pytest-xdistï¼‰
pytest test_login.py -n 4
</code></pre>
<hr />
<h3 id="22-playwright---ç°ä»£åŒ–æµ‹è¯•æ¡†æ¶"><a class="header" href="#22-playwright---ç°ä»£åŒ–æµ‹è¯•æ¡†æ¶">2.2 Playwright - ç°ä»£åŒ–æµ‹è¯•æ¡†æ¶</a></h3>
<h4 id="221-playwrightä¼˜åŠ¿"><a class="header" href="#221-playwrightä¼˜åŠ¿">2.2.1 Playwrightä¼˜åŠ¿</a></h4>
<p>ç›¸æ¯”Seleniumï¼ŒPlaywrightå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦</strong>: åŸç”Ÿæ”¯æŒæµè§ˆå™¨åè®®</li>
<li><strong>è‡ªåŠ¨ç­‰å¾…</strong>: å†…ç½®æ™ºèƒ½ç­‰å¾…æœºåˆ¶</li>
<li><strong>æ›´å¥½çš„ç¨³å®šæ€§</strong>: å‡å°‘flakyæµ‹è¯•</li>
<li><strong>å¤šæµè§ˆå™¨æ”¯æŒ</strong>: Chromeã€Firefoxã€Safariã€Edge</li>
<li><strong>ç§»åŠ¨ç«¯ä»¿çœŸ</strong>: æ”¯æŒç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿ</li>
<li><strong>ç½‘ç»œæ‹¦æˆª</strong>: å¯ä»¥æ‹¦æˆªå’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚</li>
</ul>
<h4 id="222-å¿«é€Ÿå¼€å§‹"><a class="header" href="#222-å¿«é€Ÿå¼€å§‹">2.2.2 å¿«é€Ÿå¼€å§‹</a></h4>
<p><strong>å®‰è£…</strong>:</p>
<pre><code class="language-bash">pip install playwright pytest-playwright

# å®‰è£…æµè§ˆå™¨
playwright install
</code></pre>
<p><strong>åŸºç¡€ç¤ºä¾‹</strong>:</p>
<pre><code class="language-python">from playwright.sync_api import sync_playwright, expect

def test_basic_navigation():
    with sync_playwright() as p:
        # å¯åŠ¨æµè§ˆå™¨
        browser = p.chromium.launch(headless=False)

        # åˆ›å»ºä¸Šä¸‹æ–‡
        context = browser.new_context()

        # åˆ›å»ºé¡µé¢
        page = context.new_page()

        # å¯¼èˆª
        page.goto("https://www.example.com")

        # ç‚¹å‡»å…ƒç´ 
        page.click("text=More information")

        # æ–­è¨€
        expect(page).to_have_url("https://www.iana.org/domains/reserved")

        # å…³é—­
        browser.close()
</code></pre>
<h4 id="223-playwright-pytestæ’ä»¶"><a class="header" href="#223-playwright-pytestæ’ä»¶">2.2.3 Playwright pytestæ’ä»¶</a></h4>
<pre><code class="language-python">import pytest
from playwright.sync_api import Page, expect

def test_homepage_title(page: Page):
    """æµ‹è¯•é¦–é¡µæ ‡é¢˜"""
    page.goto("https://example.com")
    expect(page).to_have_title("Example Domain")

def test_search_functionality(page: Page):
    """æµ‹è¯•æœç´¢åŠŸèƒ½"""
    page.goto("https://example.com/search")

    # è¾“å…¥æœç´¢å…³é”®è¯
    page.fill("input[name='q']", "playwright")

    # ç‚¹å‡»æœç´¢æŒ‰é’®
    page.click("button[type='submit']")

    # ç­‰å¾…ç»“æœåŠ è½½
    page.wait_for_selector(".search-results")

    # éªŒè¯ç»“æœ
    results = page.locator(".search-result")
    expect(results).to_have_count(10)

def test_login_flow(page: Page):
    """æµ‹è¯•ç™»å½•æµç¨‹"""
    page.goto("https://example.com/login")

    # å¡«å†™è¡¨å•
    page.fill("#username", "testuser")
    page.fill("#password", "Test@123")

    # æäº¤è¡¨å•
    page.click("#login-button")

    # éªŒè¯é‡å®šå‘
    expect(page).to_have_url("https://example.com/dashboard")

    # éªŒè¯æ¬¢è¿æ¶ˆæ¯
    welcome = page.locator(".welcome-message")
    expect(welcome).to_contain_text("æ¬¢è¿, testuser")

@pytest.fixture(scope="session")
def browser_context_args(browser_context_args):
    """è‡ªå®šä¹‰æµè§ˆå™¨ä¸Šä¸‹æ–‡é…ç½®"""
    return {
        **browser_context_args,
        "viewport": {
            "width": 1920,
            "height": 1080,
        },
        "locale": "zh-CN",
        "timezone_id": "Asia/Shanghai",
    }
</code></pre>
<p><strong>é…ç½®æ–‡ä»¶ - pytest.ini</strong>:</p>
<pre><code class="language-ini">[pytest]
addopts =
    --browser chromium
    --headed
    --slowmo 500
    --screenshot only-on-failure
    --video retain-on-failure
</code></pre>
<h4 id="224-é«˜çº§åŠŸèƒ½"><a class="header" href="#224-é«˜çº§åŠŸèƒ½">2.2.4 é«˜çº§åŠŸèƒ½</a></h4>
<p><strong>ç½‘ç»œæ‹¦æˆª</strong>:</p>
<pre><code class="language-python">def test_api_mocking(page: Page):
    """æ¨¡æ‹ŸAPIå“åº”"""
    # æ‹¦æˆªAPIè¯·æ±‚
    def handle_route(route):
        # è¿”å›æ¨¡æ‹Ÿæ•°æ®
        route.fulfill(
            status=200,
            content_type="application/json",
            body='{"status": "success", "data": [{"id": 1, "name": "æµ‹è¯•æ•°æ®"}]}'
        )

    page.route("**/api/users", handle_route)

    # è®¿é—®é¡µé¢
    page.goto("https://example.com/users")

    # éªŒè¯æ¨¡æ‹Ÿæ•°æ®è¢«ä½¿ç”¨
    user_name = page.locator(".user-name").first
    expect(user_name).to_have_text("æµ‹è¯•æ•°æ®")

def test_network_monitoring(page: Page):
    """ç›‘æ§ç½‘ç»œè¯·æ±‚"""
    requests = []

    # ç›‘å¬è¯·æ±‚
    page.on("request", lambda request: requests.append(request.url))

    page.goto("https://example.com")

    # éªŒè¯ç‰¹å®šè¯·æ±‚è¢«å‘é€
    assert any("analytics" in url for url in requests)
</code></pre>
<p><strong>æ–‡ä»¶æ“ä½œ</strong>:</p>
<pre><code class="language-python">def test_file_upload(page: Page):
    """æµ‹è¯•æ–‡ä»¶ä¸Šä¼ """
    page.goto("https://example.com/upload")

    # é€‰æ‹©æ–‡ä»¶
    page.set_input_files("#file-upload", "test_data/sample.pdf")

    # ç‚¹å‡»ä¸Šä¼ 
    page.click("#upload-button")

    # éªŒè¯ä¸Šä¼ æˆåŠŸ
    success_msg = page.locator(".upload-success")
    expect(success_msg).to_be_visible()

def test_file_download(page: Page):
    """æµ‹è¯•æ–‡ä»¶ä¸‹è½½"""
    page.goto("https://example.com/downloads")

    # å¼€å§‹ç­‰å¾…ä¸‹è½½
    with page.expect_download() as download_info:
        page.click("text=ä¸‹è½½æŠ¥å‘Š")

    download = download_info.value

    # ä¿å­˜æ–‡ä»¶
    download.save_as("downloads/report.pdf")

    # éªŒè¯æ–‡ä»¶å
    assert download.suggested_filename == "report.pdf"
</code></pre>
<p><strong>ç§»åŠ¨ç«¯æµ‹è¯•</strong>:</p>
<pre><code class="language-python">import pytest
from playwright.sync_api import Page

@pytest.fixture
def mobile_context(playwright):
    """åˆ›å»ºç§»åŠ¨è®¾å¤‡ä¸Šä¸‹æ–‡"""
    iphone = playwright.devices["iPhone 12"]
    browser = playwright.chromium.launch()
    context = browser.new_context(**iphone)

    yield context

    context.close()
    browser.close()

def test_mobile_responsive(mobile_context):
    """æµ‹è¯•ç§»åŠ¨ç«¯å“åº”å¼"""
    page = mobile_context.new_page()
    page.goto("https://example.com")

    # éªŒè¯ç§»åŠ¨ç«¯ç‰¹å®šå…ƒç´ 
    mobile_menu = page.locator(".mobile-menu-icon")
    expect(mobile_menu).to_be_visible()

    # ç‚¹å‡»ç§»åŠ¨èœå•
    mobile_menu.click()

    # éªŒè¯èœå•å±•å¼€
    nav_menu = page.locator(".navigation-menu")
    expect(nav_menu).to_be_visible()
</code></pre>
<hr />
<h3 id="23-é¡µé¢å¯¹è±¡æ¨¡å¼-pom"><a class="header" href="#23-é¡µé¢å¯¹è±¡æ¨¡å¼-pom">2.3 é¡µé¢å¯¹è±¡æ¨¡å¼ (POM)</a></h3>
<h4 id="231-ä¸ºä»€ä¹ˆéœ€è¦pom"><a class="header" href="#231-ä¸ºä»€ä¹ˆéœ€è¦pom">2.3.1 ä¸ºä»€ä¹ˆéœ€è¦POM</a></h4>
<p><strong>é—®é¢˜</strong>: ç›´æ¥åœ¨æµ‹è¯•ä¸­æ“ä½œå…ƒç´ å¯¼è‡´ï¼š</p>
<ul>
<li>ä»£ç é‡å¤</li>
<li>ç»´æŠ¤å›°éš¾ï¼ˆUIå˜æ›´éœ€è¦ä¿®æ”¹å¤šå¤„ï¼‰</li>
<li>å¯è¯»æ€§å·®</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>: é¡µé¢å¯¹è±¡æ¨¡å¼</p>
<ul>
<li>å°†é¡µé¢å…ƒç´ å’Œæ“ä½œå°è£…åˆ°ç±»ä¸­</li>
<li>æµ‹è¯•ä»£ç åªè°ƒç”¨é¡µé¢å¯¹è±¡çš„æ–¹æ³•</li>
<li>UIå˜æ›´åªéœ€ä¿®æ”¹é¡µé¢å¯¹è±¡ç±»</li>
</ul>
<h4 id="232-pomå®æˆ˜ç¤ºä¾‹"><a class="header" href="#232-pomå®æˆ˜ç¤ºä¾‹">2.3.2 POMå®æˆ˜ç¤ºä¾‹</a></h4>
<p><strong>ç›®å½•ç»“æ„</strong>:</p>
<pre><code>project/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_page.py
â”‚   â”œâ”€â”€ login_page.py
â”‚   â””â”€â”€ dashboard_page.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_login.py
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ config.py
â””â”€â”€ conftest.py
</code></pre>
<p><strong>åŸºç¡€é¡µé¢ç±»</strong>:</p>
<pre><code class="language-python"># pages/base_page.py
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

class BasePage:
    """æ‰€æœ‰é¡µé¢å¯¹è±¡çš„åŸºç±»"""

    def __init__(self, driver):
        self.driver = driver
        self.wait = WebDriverWait(driver, 10)

    def find_element(self, locator):
        """æŸ¥æ‰¾å…ƒç´ """
        return self.wait.until(EC.presence_of_element_located(locator))

    def click(self, locator):
        """ç‚¹å‡»å…ƒç´ """
        element = self.wait.until(EC.element_to_be_clickable(locator))
        element.click()

    def input_text(self, locator, text):
        """è¾“å…¥æ–‡æœ¬"""
        element = self.find_element(locator)
        element.clear()
        element.send_keys(text)

    def get_text(self, locator):
        """è·å–æ–‡æœ¬"""
        element = self.find_element(locator)
        return element.text

    def is_element_visible(self, locator, timeout=10):
        """æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯è§"""
        try:
            WebDriverWait(self.driver, timeout).until(
                EC.visibility_of_element_located(locator)
            )
            return True
        except:
            return False

    def wait_for_url_contains(self, text, timeout=10):
        """ç­‰å¾…URLåŒ…å«ç‰¹å®šæ–‡æœ¬"""
        WebDriverWait(self.driver, timeout).until(
            EC.url_contains(text)
        )
</code></pre>
<p><strong>ç™»å½•é¡µé¢å¯¹è±¡</strong>:</p>
<pre><code class="language-python"># pages/login_page.py
from selenium.webdriver.common.by import By
from pages.base_page import BasePage

class LoginPage(BasePage):
    """ç™»å½•é¡µé¢å¯¹è±¡"""

    # å®šä½å™¨
    USERNAME_INPUT = (By.ID, "username")
    PASSWORD_INPUT = (By.ID, "password")
    LOGIN_BUTTON = (By.ID, "login-btn")
    ERROR_MESSAGE = (By.CLASS_NAME, "error-message")
    REMEMBER_ME_CHECKBOX = (By.ID, "remember-me")

    def __init__(self, driver):
        super().__init__(driver)
        self.url = "https://example.com/login"

    def navigate(self):
        """å¯¼èˆªåˆ°ç™»å½•é¡µé¢"""
        self.driver.get(self.url)
        return self

    def enter_username(self, username):
        """è¾“å…¥ç”¨æˆ·å"""
        self.input_text(self.USERNAME_INPUT, username)
        return self

    def enter_password(self, password):
        """è¾“å…¥å¯†ç """
        self.input_text(self.PASSWORD_INPUT, password)
        return self

    def check_remember_me(self):
        """å‹¾é€‰è®°ä½æˆ‘"""
        self.click(self.REMEMBER_ME_CHECKBOX)
        return self

    def click_login(self):
        """ç‚¹å‡»ç™»å½•æŒ‰é’®"""
        self.click(self.LOGIN_BUTTON)

    def login(self, username, password, remember_me=False):
        """å®Œæ•´ç™»å½•æµç¨‹"""
        self.enter_username(username)
        self.enter_password(password)
        if remember_me:
            self.check_remember_me()
        self.click_login()

    def get_error_message(self):
        """è·å–é”™è¯¯æ¶ˆæ¯"""
        return self.get_text(self.ERROR_MESSAGE)

    def is_error_displayed(self):
        """æ£€æŸ¥é”™è¯¯æ¶ˆæ¯æ˜¯å¦æ˜¾ç¤º"""
        return self.is_element_visible(self.ERROR_MESSAGE)
</code></pre>
<p><strong>ä»ªè¡¨æ¿é¡µé¢å¯¹è±¡</strong>:</p>
<pre><code class="language-python"># pages/dashboard_page.py
from selenium.webdriver.common.by import By
from pages.base_page import BasePage

class DashboardPage(BasePage):
    """ä»ªè¡¨æ¿é¡µé¢å¯¹è±¡"""

    # å®šä½å™¨
    WELCOME_MESSAGE = (By.CLASS_NAME, "welcome")
    USER_MENU = (By.ID, "user-menu")
    LOGOUT_BUTTON = (By.ID, "logout")

    def __init__(self, driver):
        super().__init__(driver)
        self.url = "https://example.com/dashboard"

    def get_welcome_message(self):
        """è·å–æ¬¢è¿æ¶ˆæ¯"""
        return self.get_text(self.WELCOME_MESSAGE)

    def is_logged_in(self):
        """æ£€æŸ¥æ˜¯å¦å·²ç™»å½•"""
        return self.is_element_visible(self.USER_MENU)

    def logout(self):
        """é€€å‡ºç™»å½•"""
        self.click(self.USER_MENU)
        self.click(self.LOGOUT_BUTTON)
</code></pre>
<p><strong>æµ‹è¯•ç”¨ä¾‹</strong>:</p>
<pre><code class="language-python"># tests/test_login.py
import pytest
from pages.login_page import LoginPage
from pages.dashboard_page import DashboardPage

class TestLogin:

    def test_successful_login(self, driver):
        """æµ‹è¯•æˆåŠŸç™»å½•"""
        # åˆ›å»ºé¡µé¢å¯¹è±¡
        login_page = LoginPage(driver)
        dashboard_page = DashboardPage(driver)

        # æ‰§è¡Œç™»å½•
        login_page.navigate().login("testuser", "Test@123")

        # éªŒè¯ç™»å½•æˆåŠŸ
        assert dashboard_page.is_logged_in()
        assert "æ¬¢è¿" in dashboard_page.get_welcome_message()
        assert "dashboard" in driver.current_url

    def test_login_with_invalid_credentials(self, driver):
        """æµ‹è¯•æ— æ•ˆå‡­æ®ç™»å½•"""
        login_page = LoginPage(driver)

        login_page.navigate().login("invalid_user", "wrong_password")

        # éªŒè¯é”™è¯¯æ¶ˆæ¯
        assert login_page.is_error_displayed()
        assert "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯" in login_page.get_error_message()

    def test_login_with_remember_me(self, driver):
        """æµ‹è¯•è®°ä½æˆ‘åŠŸèƒ½"""
        login_page = LoginPage(driver)
        dashboard_page = DashboardPage(driver)

        # ç™»å½•å¹¶å‹¾é€‰è®°ä½æˆ‘
        login_page.navigate().login("testuser", "Test@123", remember_me=True)

        # éªŒè¯ç™»å½•æˆåŠŸ
        assert dashboard_page.is_logged_in()

        # å…³é—­æµè§ˆå™¨å¹¶é‡æ–°æ‰“å¼€ï¼ˆå®é™…ä¸­éœ€è¦ä¿å­˜cookiesï¼‰
        # ... éªŒè¯ä»ç„¶ç™»å½•çŠ¶æ€
</code></pre>
<p><strong>conftest.pyé…ç½®</strong>:</p>
<pre><code class="language-python"># conftest.py
import pytest
from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.chrome.service import Service

@pytest.fixture(scope="function")
def driver():
    """ä¸ºæ¯ä¸ªæµ‹è¯•åˆ›å»ºdriver"""
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service)
    driver.maximize_window()
    driver.implicitly_wait(10)

    yield driver

    driver.quit()

@pytest.fixture(scope="session")
def test_config():
    """æµ‹è¯•é…ç½®"""
    return {
        "base_url": "https://example.com",
        "timeout": 10,
        "browser": "chrome"
    }
</code></pre>
<hr />
<h2 id="ç¬¬ä¸‰ç« -apiè‡ªåŠ¨åŒ–æµ‹è¯•"><a class="header" href="#ç¬¬ä¸‰ç« -apiè‡ªåŠ¨åŒ–æµ‹è¯•">ç¬¬ä¸‰ç« : APIè‡ªåŠ¨åŒ–æµ‹è¯•</a></h2>
<h3 id="31-apiæµ‹è¯•åŸºç¡€"><a class="header" href="#31-apiæµ‹è¯•åŸºç¡€">3.1 APIæµ‹è¯•åŸºç¡€</a></h3>
<h4 id="311-ä»€ä¹ˆæ˜¯apiæµ‹è¯•"><a class="header" href="#311-ä»€ä¹ˆæ˜¯apiæµ‹è¯•">3.1.1 ä»€ä¹ˆæ˜¯APIæµ‹è¯•</a></h4>
<p>APIï¼ˆApplication Programming Interfaceï¼‰æµ‹è¯•æ˜¯ç›´æ¥æµ‹è¯•åº”ç”¨ç¨‹åºæ¥å£çš„è¿‡ç¨‹ï¼Œä¸é€šè¿‡ç”¨æˆ·ç•Œé¢ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li><strong>æ‰§è¡Œé€Ÿåº¦å¿«</strong>: ä¸éœ€è¦æ¸²æŸ“UI</li>
<li><strong>ç¨³å®šæ€§é«˜</strong>: ä¸å—UIå˜åŒ–å½±å“</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>: æ¥å£ç›¸å¯¹ç¨³å®š</li>
<li><strong>æµ‹è¯•è¦†ç›–ç‡é«˜</strong>: å¯ä»¥æµ‹è¯•å„ç§è¾¹ç•Œæ¡ä»¶</li>
</ul>
<p><strong>å¸¸è§APIç±»å‹</strong>:</p>
<ul>
<li><strong>RESTful API</strong>: åŸºäºHTTPåè®®ï¼Œä½¿ç”¨JSON/XMLæ ¼å¼</li>
<li><strong>GraphQL API</strong>: çµæ´»çš„æŸ¥è¯¢è¯­è¨€</li>
<li><strong>SOAP API</strong>: åŸºäºXMLçš„åè®®</li>
<li><strong>gRPC</strong>: é«˜æ€§èƒ½RPCæ¡†æ¶</li>
</ul>
<h4 id="312-httpæ–¹æ³•ä¸çŠ¶æ€ç "><a class="header" href="#312-httpæ–¹æ³•ä¸çŠ¶æ€ç ">3.1.2 HTTPæ–¹æ³•ä¸çŠ¶æ€ç </a></h4>
<p><strong>å¸¸ç”¨HTTPæ–¹æ³•</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th><th>æ˜¯å¦å¹‚ç­‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td>GET</td><td>è·å–èµ„æº</td><td>æ˜¯</td><td>è·å–ç”¨æˆ·åˆ—è¡¨</td></tr>
<tr><td>POST</td><td>åˆ›å»ºèµ„æº</td><td>å¦</td><td>åˆ›å»ºæ–°ç”¨æˆ·</td></tr>
<tr><td>PUT</td><td>å®Œæ•´æ›´æ–°èµ„æº</td><td>æ˜¯</td><td>æ›´æ–°ç”¨æˆ·ä¿¡æ¯</td></tr>
<tr><td>PATCH</td><td>éƒ¨åˆ†æ›´æ–°èµ„æº</td><td>å¦</td><td>æ›´æ–°ç”¨æˆ·å</td></tr>
<tr><td>DELETE</td><td>åˆ é™¤èµ„æº</td><td>æ˜¯</td><td>åˆ é™¤ç”¨æˆ·</td></tr>
</tbody></table>
</div>
<p><strong>å¸¸è§HTTPçŠ¶æ€ç </strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>200</td><td>OK</td><td>è¯·æ±‚æˆåŠŸ</td></tr>
<tr><td>201</td><td>Created</td><td>èµ„æºåˆ›å»ºæˆåŠŸ</td></tr>
<tr><td>204</td><td>No Content</td><td>æˆåŠŸä½†æ— è¿”å›å†…å®¹</td></tr>
<tr><td>400</td><td>Bad Request</td><td>è¯·æ±‚å‚æ•°é”™è¯¯</td></tr>
<tr><td>401</td><td>Unauthorized</td><td>æœªæˆæƒ</td></tr>
<tr><td>403</td><td>Forbidden</td><td>æ— æƒé™</td></tr>
<tr><td>404</td><td>Not Found</td><td>èµ„æºä¸å­˜åœ¨</td></tr>
<tr><td>500</td><td>Internal Server Error</td><td>æœåŠ¡å™¨é”™è¯¯</td></tr>
<tr><td>503</td><td>Service Unavailable</td><td>æœåŠ¡ä¸å¯ç”¨</td></tr>
</tbody></table>
</div>
<hr />
<h3 id="32-requestsåº“å®æˆ˜"><a class="header" href="#32-requestsåº“å®æˆ˜">3.2 Requestsåº“å®æˆ˜</a></h3>
<h4 id="321-åŸºç¡€è¯·æ±‚"><a class="header" href="#321-åŸºç¡€è¯·æ±‚">3.2.1 åŸºç¡€è¯·æ±‚</a></h4>
<pre><code class="language-python">import requests

# GETè¯·æ±‚
response = requests.get('https://api.example.com/users')
print(f"çŠ¶æ€ç : {response.status_code}")
print(f"å“åº”ä½“: {response.json()}")

# POSTè¯·æ±‚
data = {
    "username": "testuser",
    "email": "test@example.com"
}
response = requests.post('https://api.example.com/users', json=data)
print(f"åˆ›å»ºç»“æœ: {response.json()}")

# PUTè¯·æ±‚
update_data = {
    "email": "newemail@example.com"
}
response = requests.put('https://api.example.com/users/123', json=update_data)

# DELETEè¯·æ±‚
response = requests.delete('https://api.example.com/users/123')
print(f"åˆ é™¤çŠ¶æ€: {response.status_code}")
</code></pre>
<h4 id="322-è¯·æ±‚å‚æ•°"><a class="header" href="#322-è¯·æ±‚å‚æ•°">3.2.2 è¯·æ±‚å‚æ•°</a></h4>
<pre><code class="language-python"># Queryå‚æ•°
params = {
    "page": 1,
    "limit": 10,
    "sort": "created_at"
}
response = requests.get('https://api.example.com/users', params=params)
# å®é™…è¯·æ±‚URL: https://api.example.com/users?page=1&amp;limit=10&amp;sort=created_at

# Headers
headers = {
    "Authorization": "Bearer token123",
    "Content-Type": "application/json",
    "User-Agent": "MyTestClient/1.0"
}
response = requests.get('https://api.example.com/users', headers=headers)

# Cookies
cookies = {"session_id": "abc123"}
response = requests.get('https://api.example.com/profile', cookies=cookies)

# è¶…æ—¶è®¾ç½®
try:
    response = requests.get('https://api.example.com/users', timeout=5)
except requests.Timeout:
    print("è¯·æ±‚è¶…æ—¶")
</code></pre>
<h4 id="323-å“åº”å¤„ç†"><a class="header" href="#323-å“åº”å¤„ç†">3.2.3 å“åº”å¤„ç†</a></h4>
<pre><code class="language-python">response = requests.get('https://api.example.com/users')

# çŠ¶æ€ç æ£€æŸ¥
assert response.status_code == 200
response.raise_for_status()  # å¦‚æœçŠ¶æ€ç 4xxæˆ–5xxä¼šæŠ›å‡ºå¼‚å¸¸

# JSONå“åº”
data = response.json()
print(data['users'][0]['name'])

# æ–‡æœ¬å“åº”
html_content = response.text

# äºŒè¿›åˆ¶å“åº”
file_content = response.content

# å“åº”å¤´
print(response.headers['Content-Type'])
print(response.headers['Date'])

# Cookies
print(response.cookies['session_id'])

# å“åº”æ—¶é—´
print(f"å“åº”æ—¶é—´: {response.elapsed.total_seconds()}ç§’")
</code></pre>
<h4 id="324-å®Œæ•´æµ‹è¯•ç¤ºä¾‹"><a class="header" href="#324-å®Œæ•´æµ‹è¯•ç¤ºä¾‹">3.2.4 å®Œæ•´æµ‹è¯•ç¤ºä¾‹</a></h4>
<pre><code class="language-python"># test_api_users.py
import pytest
import requests

BASE_URL = "https://jsonplaceholder.typicode.com"

class TestUserAPI:

    def test_get_all_users(self):
        """æµ‹è¯•è·å–æ‰€æœ‰ç”¨æˆ·"""
        response = requests.get(f"{BASE_URL}/users")

        # éªŒè¯çŠ¶æ€ç 
        assert response.status_code == 200

        # éªŒè¯å“åº”ç±»å‹
        assert response.headers['Content-Type'] == 'application/json; charset=utf-8'

        # éªŒè¯å“åº”æ•°æ®
        users = response.json()
        assert isinstance(users, list)
        assert len(users) == 10

        # éªŒè¯æ•°æ®ç»“æ„
        first_user = users[0]
        assert 'id' in first_user
        assert 'name' in first_user
        assert 'email' in first_user

    def test_get_single_user(self):
        """æµ‹è¯•è·å–å•ä¸ªç”¨æˆ·"""
        user_id = 1
        response = requests.get(f"{BASE_URL}/users/{user_id}")

        assert response.status_code == 200

        user = response.json()
        assert user['id'] == user_id
        assert user['name'] == "Leanne Graham"
        assert '@' in user['email']

    def test_get_nonexistent_user(self):
        """æµ‹è¯•è·å–ä¸å­˜åœ¨çš„ç”¨æˆ·"""
        response = requests.get(f"{BASE_URL}/users/999")
        assert response.status_code == 404

    def test_create_user(self):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·"""
        new_user = {
            "name": "Test User",
            "username": "testuser",
            "email": "test@example.com"
        }

        response = requests.post(f"{BASE_URL}/users", json=new_user)

        # éªŒè¯åˆ›å»ºæˆåŠŸ
        assert response.status_code == 201

        # éªŒè¯è¿”å›çš„ç”¨æˆ·æ•°æ®
        created_user = response.json()
        assert created_user['name'] == new_user['name']
        assert created_user['email'] == new_user['email']
        assert 'id' in created_user

    def test_update_user(self):
        """æµ‹è¯•æ›´æ–°ç”¨æˆ·"""
        user_id = 1
        update_data = {
            "name": "Updated Name",
            "email": "updated@example.com"
        }

        response = requests.put(f"{BASE_URL}/users/{user_id}", json=update_data)

        assert response.status_code == 200

        updated_user = response.json()
        assert updated_user['name'] == update_data['name']
        assert updated_user['email'] == update_data['email']

    def test_delete_user(self):
        """æµ‹è¯•åˆ é™¤ç”¨æˆ·"""
        user_id = 1
        response = requests.delete(f"{BASE_URL}/users/{user_id}")

        assert response.status_code == 200

    def test_response_time(self):
        """æµ‹è¯•å“åº”æ—¶é—´"""
        response = requests.get(f"{BASE_URL}/users")

        # éªŒè¯å“åº”æ—¶é—´å°äº2ç§’
        assert response.elapsed.total_seconds() &lt; 2

    @pytest.mark.parametrize("user_id", [1, 2, 3, 4, 5])
    def test_multiple_users(self, user_id):
        """å‚æ•°åŒ–æµ‹è¯•å¤šä¸ªç”¨æˆ·"""
        response = requests.get(f"{BASE_URL}/users/{user_id}")

        assert response.status_code == 200
        user = response.json()
        assert user['id'] == user_id
</code></pre>
<hr />
<h3 id="33-pytestè¿›é˜¶æŠ€å·§"><a class="header" href="#33-pytestè¿›é˜¶æŠ€å·§">3.3 pytestè¿›é˜¶æŠ€å·§</a></h3>
<h4 id="331-fixtureså¤ç”¨"><a class="header" href="#331-fixtureså¤ç”¨">3.3.1 Fixtureså¤ç”¨</a></h4>
<pre><code class="language-python"># conftest.py
import pytest
import requests

@pytest.fixture(scope="session")
def api_client():
    """åˆ›å»ºAPIå®¢æˆ·ç«¯"""
    class APIClient:
        def __init__(self, base_url):
            self.base_url = base_url
            self.session = requests.Session()

        def get(self, endpoint, **kwargs):
            return self.session.get(f"{self.base_url}{endpoint}", **kwargs)

        def post(self, endpoint, **kwargs):
            return self.session.post(f"{self.base_url}{endpoint}", **kwargs)

        def put(self, endpoint, **kwargs):
            return self.session.put(f"{self.base_url}{endpoint}", **kwargs)

        def delete(self, endpoint, **kwargs):
            return self.session.delete(f"{self.base_url}{endpoint}", **kwargs)

    client = APIClient("https://jsonplaceholder.typicode.com")
    yield client
    client.session.close()

@pytest.fixture
def auth_token():
    """è·å–è®¤è¯token"""
    # æ¨¡æ‹Ÿç™»å½•è·å–token
    response = requests.post("https://api.example.com/login", json={
        "username": "testuser",
        "password": "Test@123"
    })
    return response.json()['token']

@pytest.fixture
def auth_headers(auth_token):
    """ç”Ÿæˆè®¤è¯è¯·æ±‚å¤´"""
    return {
        "Authorization": f"Bearer {auth_token}",
        "Content-Type": "application/json"
    }

# æµ‹è¯•ä¸­ä½¿ç”¨
def test_with_auth(api_client, auth_headers):
    response = api_client.get("/protected-resource", headers=auth_headers)
    assert response.status_code == 200
</code></pre>
<h4 id="332-æ•°æ®é©±åŠ¨æµ‹è¯•"><a class="header" href="#332-æ•°æ®é©±åŠ¨æµ‹è¯•">3.3.2 æ•°æ®é©±åŠ¨æµ‹è¯•</a></h4>
<pre><code class="language-python">import pytest
import json

# ä»JSONæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®
def load_test_data(filename):
    with open(filename, 'r', encoding='utf-8') as f:
        return json.load(f)

# test_data.json
"""
[
    {
        "name": "æœ‰æ•ˆç”¨æˆ·å",
        "input": {"username": "testuser", "email": "test@example.com"},
        "expected_status": 201
    },
    {
        "name": "æ— æ•ˆé‚®ç®±",
        "input": {"username": "testuser", "email": "invalid-email"},
        "expected_status": 400
    }
]
"""

@pytest.mark.parametrize(
    "test_case",
    load_test_data("test_data.json"),
    ids=lambda tc: tc['name']
)
def test_create_user_with_data_file(api_client, test_case):
    """ä½¿ç”¨å¤–éƒ¨æ•°æ®æ–‡ä»¶æµ‹è¯•"""
    response = api_client.post("/users", json=test_case['input'])
    assert response.status_code == test_case['expected_status']
</code></pre>
<h4 id="333-æµ‹è¯•æŠ¥å‘Šå¢å¼º"><a class="header" href="#333-æµ‹è¯•æŠ¥å‘Šå¢å¼º">3.3.3 æµ‹è¯•æŠ¥å‘Šå¢å¼º</a></h4>
<pre><code class="language-python">import pytest
import allure

@allure.feature('ç”¨æˆ·ç®¡ç†')
@allure.story('ç”¨æˆ·åˆ›å»º')
@allure.severity(allure.severity_level.CRITICAL)
def test_create_user_with_allure(api_client):
    """æµ‹è¯•ç”¨æˆ·åˆ›å»º - å¸¦AllureæŠ¥å‘Š"""

    with allure.step("å‡†å¤‡æµ‹è¯•æ•°æ®"):
        user_data = {
            "name": "Test User",
            "email": "test@example.com"
        }
        allure.attach(
            json.dumps(user_data, indent=2),
            name="è¯·æ±‚æ•°æ®",
            attachment_type=allure.attachment_type.JSON
        )

    with allure.step("å‘é€åˆ›å»ºç”¨æˆ·è¯·æ±‚"):
        response = api_client.post("/users", json=user_data)

    with allure.step("éªŒè¯å“åº”"):
        assert response.status_code == 201
        allure.attach(
            response.text,
            name="å“åº”æ•°æ®",
            attachment_type=allure.attachment_type.JSON
        )

        created_user = response.json()
        assert created_user['name'] == user_data['name']
</code></pre>
<p><strong>ç”ŸæˆAllureæŠ¥å‘Š</strong>:</p>
<pre><code class="language-bash"># è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆç»“æœ
pytest --alluredir=allure-results

# ç”Ÿæˆå¹¶æ‰“å¼€æŠ¥å‘Š
allure serve allure-results
</code></pre>
<hr />
<h3 id="34-apiæµ‹è¯•æ¡†æ¶è®¾è®¡"><a class="header" href="#34-apiæµ‹è¯•æ¡†æ¶è®¾è®¡">3.4 APIæµ‹è¯•æ¡†æ¶è®¾è®¡</a></h3>
<h4 id="341-å®Œæ•´æ¡†æ¶ç»“æ„"><a class="header" href="#341-å®Œæ•´æ¡†æ¶ç»“æ„">3.4.1 å®Œæ•´æ¡†æ¶ç»“æ„</a></h4>
<pre><code>api_test_framework/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py
â”‚   â””â”€â”€ environments.json
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_api.py
â”‚   â”œâ”€â”€ user_api.py
â”‚   â””â”€â”€ product_api.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_users.py
â”‚   â””â”€â”€ test_products.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ logger.py
â”‚   â”œâ”€â”€ data_generator.py
â”‚   â””â”€â”€ assertions.py
â”œâ”€â”€ test_data/
â”‚   â”œâ”€â”€ users.json
â”‚   â””â”€â”€ products.json
â”œâ”€â”€ conftest.py
â”œâ”€â”€ pytest.ini
â””â”€â”€ requirements.txt
</code></pre>
<h4 id="342-æ ¸å¿ƒä»£ç å®ç°"><a class="header" href="#342-æ ¸å¿ƒä»£ç å®ç°">3.4.2 æ ¸å¿ƒä»£ç å®ç°</a></h4>
<p><strong>config/config.py</strong>:</p>
<pre><code class="language-python">import json
import os

class Config:
    """é…ç½®ç®¡ç†ç±»"""

    def __init__(self, environment='test'):
        self.environment = environment
        self.load_config()

    def load_config(self):
        """åŠ è½½ç¯å¢ƒé…ç½®"""
        config_file = os.path.join(
            os.path.dirname(__file__),
            'environments.json'
        )

        with open(config_file, 'r') as f:
            configs = json.load(f)

        env_config = configs.get(self.environment, {})

        self.base_url = env_config.get('base_url')
        self.timeout = env_config.get('timeout', 30)
        self.retry_times = env_config.get('retry_times', 3)

    @staticmethod
    def get_instance(environment='test'):
        """è·å–é…ç½®å®ä¾‹"""
        return Config(environment)

# environments.json
"""
{
    "test": {
        "base_url": "https://test-api.example.com",
        "timeout": 30,
        "retry_times": 3
    },
    "staging": {
        "base_url": "https://staging-api.example.com",
        "timeout": 30,
        "retry_times": 3
    },
    "production": {
        "base_url": "https://api.example.com",
        "timeout": 60,
        "retry_times": 1
    }
}
"""
</code></pre>
<p><strong>api/base_api.py</strong>:</p>
<pre><code class="language-python">import requests
from typing import Dict, Any, Optional
import logging

logger = logging.getLogger(__name__)

class BaseAPI:
    """APIåŸºç±»"""

    def __init__(self, base_url: str, timeout: int = 30):
        self.base_url = base_url
        self.timeout = timeout
        self.session = requests.Session()

    def _request(
        self,
        method: str,
        endpoint: str,
        **kwargs
    ) -&gt; requests.Response:
        """
        å‘é€HTTPè¯·æ±‚çš„é€šç”¨æ–¹æ³•

        Args:
            method: HTTPæ–¹æ³•
            endpoint: APIç«¯ç‚¹
            **kwargs: å…¶ä»–è¯·æ±‚å‚æ•°

        Returns:
            Responseå¯¹è±¡
        """
        url = f"{self.base_url}{endpoint}"

        # è®¾ç½®é»˜è®¤è¶…æ—¶
        if 'timeout' not in kwargs:
            kwargs['timeout'] = self.timeout

        logger.info(f"å‘é€{method}è¯·æ±‚: {url}")
        logger.debug(f"è¯·æ±‚å‚æ•°: {kwargs}")

        try:
            response = self.session.request(method, url, **kwargs)
            logger.info(f"å“åº”çŠ¶æ€ç : {response.status_code}")
            logger.debug(f"å“åº”å†…å®¹: {response.text}")
            return response
        except requests.RequestException as e:
            logger.error(f"è¯·æ±‚å¤±è´¥: {str(e)}")
            raise

    def get(self, endpoint: str, **kwargs) -&gt; requests.Response:
        """GETè¯·æ±‚"""
        return self._request('GET', endpoint, **kwargs)

    def post(self, endpoint: str, **kwargs) -&gt; requests.Response:
        """POSTè¯·æ±‚"""
        return self._request('POST', endpoint, **kwargs)

    def put(self, endpoint: str, **kwargs) -&gt; requests.Response:
        """PUTè¯·æ±‚"""
        return self._request('PUT', endpoint, **kwargs)

    def patch(self, endpoint: str, **kwargs) -&gt; requests.Response:
        """PATCHè¯·æ±‚"""
        return self._request('PATCH', endpoint, **kwargs)

    def delete(self, endpoint: str, **kwargs) -&gt; requests.Response:
        """DELETEè¯·æ±‚"""
        return self._request('DELETE', endpoint, **kwargs)

    def set_auth_token(self, token: str):
        """è®¾ç½®è®¤è¯token"""
        self.session.headers.update({
            'Authorization': f'Bearer {token}'
        })

    def close(self):
        """å…³é—­session"""
        self.session.close()
</code></pre>
<p><strong>api/user_api.py</strong>:</p>
<pre><code class="language-python">from api.base_api import BaseAPI
from typing import Dict, List, Optional

class UserAPI(BaseAPI):
    """ç”¨æˆ·APIå°è£…"""

    def get_all_users(self, page: int = 1, limit: int = 10) -&gt; Dict:
        """è·å–æ‰€æœ‰ç”¨æˆ·"""
        params = {'page': page, 'limit': limit}
        response = self.get('/users', params=params)
        return response.json()

    def get_user_by_id(self, user_id: int) -&gt; Dict:
        """æ ¹æ®IDè·å–ç”¨æˆ·"""
        response = self.get(f'/users/{user_id}')
        return response.json()

    def create_user(self, user_data: Dict) -&gt; Dict:
        """åˆ›å»ºç”¨æˆ·"""
        response = self.post('/users', json=user_data)
        response.raise_for_status()
        return response.json()

    def update_user(self, user_id: int, user_data: Dict) -&gt; Dict:
        """æ›´æ–°ç”¨æˆ·"""
        response = self.put(f'/users/{user_id}', json=user_data)
        return response.json()

    def delete_user(self, user_id: int) -&gt; bool:
        """åˆ é™¤ç”¨æˆ·"""
        response = self.delete(f'/users/{user_id}')
        return response.status_code == 200

    def search_users(self, keyword: str) -&gt; List[Dict]:
        """æœç´¢ç”¨æˆ·"""
        params = {'q': keyword}
        response = self.get('/users/search', params=params)
        return response.json()
</code></pre>
<p><strong>utils/assertions.py</strong>:</p>
<pre><code class="language-python">from typing import Any, Dict
import jsonschema

class APIAssertions:
    """APIæ–­è¨€å·¥å…·"""

    @staticmethod
    def assert_status_code(response, expected_code: int):
        """æ–­è¨€çŠ¶æ€ç """
        actual_code = response.status_code
        assert actual_code == expected_code, \
            f"æœŸæœ›çŠ¶æ€ç {expected_code}, å®é™…ä¸º{actual_code}"

    @staticmethod
    def assert_response_time(response, max_time: float):
        """æ–­è¨€å“åº”æ—¶é—´"""
        actual_time = response.elapsed.total_seconds()
        assert actual_time &lt; max_time, \
            f"å“åº”æ—¶é—´{actual_time}ç§’è¶…è¿‡é™åˆ¶{max_time}ç§’"

    @staticmethod
    def assert_json_schema(data: Dict, schema: Dict):
        """æ–­è¨€JSONæ ¼å¼"""
        try:
            jsonschema.validate(instance=data, schema=schema)
        except jsonschema.ValidationError as e:
            raise AssertionError(f"JSONæ ¼å¼ä¸åŒ¹é…: {e.message}")

    @staticmethod
    def assert_contains(data: Any, expected: Any):
        """æ–­è¨€åŒ…å«å…³ç³»"""
        assert expected in data, \
            f"{expected} ä¸åœ¨ {data} ä¸­"

    @staticmethod
    def assert_field_value(data: Dict, field: str, expected_value: Any):
        """æ–­è¨€å­—æ®µå€¼"""
        actual_value = data.get(field)
        assert actual_value == expected_value, \
            f"å­—æ®µ{field}æœŸæœ›å€¼{expected_value}, å®é™…ä¸º{actual_value}"

# JSON Schemaç¤ºä¾‹
USER_SCHEMA = {
    "type": "object",
    "properties": {
        "id": {"type": "integer"},
        "name": {"type": "string"},
        "email": {"type": "string", "format": "email"},
        "created_at": {"type": "string"}
    },
    "required": ["id", "name", "email"]
}
</code></pre>
<p><strong>æµ‹è¯•ç”¨ä¾‹</strong>:</p>
<pre><code class="language-python"># tests/test_users.py
import pytest
from api.user_api import UserAPI
from utils.assertions import APIAssertions, USER_SCHEMA

class TestUserAPI:

    @pytest.fixture(autouse=True)
    def setup(self, api_client):
        """æµ‹è¯•å‡†å¤‡"""
        self.user_api = api_client
        self.assertions = APIAssertions()

    def test_get_all_users_success(self):
        """æµ‹è¯•è·å–æ‰€æœ‰ç”¨æˆ·æˆåŠŸ"""
        # æ‰§è¡Œ
        users = self.user_api.get_all_users(page=1, limit=10)

        # æ–­è¨€
        assert isinstance(users, list)
        assert len(users) &lt;= 10

        # éªŒè¯ç¬¬ä¸€ä¸ªç”¨æˆ·çš„ç»“æ„
        if users:
            self.assertions.assert_json_schema(users[0], USER_SCHEMA)

    def test_create_user_success(self, test_user_data):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·æˆåŠŸ"""
        # æ‰§è¡Œ
        created_user = self.user_api.create_user(test_user_data)

        # æ–­è¨€
        assert 'id' in created_user
        self.assertions.assert_field_value(
            created_user,
            'name',
            test_user_data['name']
        )

    def test_get_user_by_id_not_found(self):
        """æµ‹è¯•è·å–ä¸å­˜åœ¨çš„ç”¨æˆ·"""
        with pytest.raises(requests.HTTPError):
            self.user_api.get_user_by_id(999999)

    def test_update_user_success(self, existing_user_id):
        """æµ‹è¯•æ›´æ–°ç”¨æˆ·æˆåŠŸ"""
        update_data = {"name": "Updated Name"}

        updated_user = self.user_api.update_user(
            existing_user_id,
            update_data
        )

        self.assertions.assert_field_value(
            updated_user,
            'name',
            "Updated Name"
        )

# conftest.py
@pytest.fixture
def test_user_data():
    """æµ‹è¯•ç”¨æˆ·æ•°æ®"""
    return {
        "name": "Test User",
        "email": f"test_{int(time.time())}@example.com",
        "password": "Test@123"
    }

@pytest.fixture
def existing_user_id(api_client, test_user_data):
    """åˆ›å»ºæµ‹è¯•ç”¨æˆ·å¹¶è¿”å›ID"""
    created_user = api_client.create_user(test_user_data)
    user_id = created_user['id']

    yield user_id

    # æ¸…ç†ï¼šåˆ é™¤æµ‹è¯•ç”¨æˆ·
    api_client.delete_user(user_id)
</code></pre>
<hr />
<h2 id="ç¬¬å››ç« -ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•"><a class="header" href="#ç¬¬å››ç« -ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•">ç¬¬å››ç« : ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•</a></h2>
<h3 id="41-appiumç®€ä»‹"><a class="header" href="#41-appiumç®€ä»‹">4.1 Appiumç®€ä»‹</a></h3>
<p><strong>Appium</strong>æ˜¯å¼€æºçš„ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>iOSåŸç”Ÿåº”ç”¨</li>
<li>AndroidåŸç”Ÿåº”ç”¨</li>
<li>æ··åˆåº”ç”¨ï¼ˆHybridï¼‰</li>
<li>ç§»åŠ¨Webåº”ç”¨</li>
</ul>
<p><strong>æ¶æ„</strong>:</p>
<pre><code>æµ‹è¯•è„šæœ¬ (Python/Javaç­‰)
        â†“
Appium Server (Node.js)
        â†“
WebDriver Protocol
        â†“
ç§»åŠ¨è®¾å¤‡/æ¨¡æ‹Ÿå™¨
</code></pre>
<h3 id="42-androidè‡ªåŠ¨åŒ–æµ‹è¯•"><a class="header" href="#42-androidè‡ªåŠ¨åŒ–æµ‹è¯•">4.2 Androidè‡ªåŠ¨åŒ–æµ‹è¯•</a></h3>
<h4 id="421-ç¯å¢ƒå‡†å¤‡"><a class="header" href="#421-ç¯å¢ƒå‡†å¤‡">4.2.1 ç¯å¢ƒå‡†å¤‡</a></h4>
<p><strong>å®‰è£…è¦æ±‚</strong>:</p>
<pre><code class="language-bash"># 1. å®‰è£…Java JDK
# 2. å®‰è£…Android SDK
# 3. é…ç½®ç¯å¢ƒå˜é‡
export ANDROID_HOME=/path/to/android-sdk
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools

# 4. å®‰è£…Appium
npm install -g appium

# 5. å®‰è£…Appium Pythonå®¢æˆ·ç«¯
pip install Appium-Python-Client
</code></pre>
<h4 id="422-åŸºç¡€ç¤ºä¾‹"><a class="header" href="#422-åŸºç¡€ç¤ºä¾‹">4.2.2 åŸºç¡€ç¤ºä¾‹</a></h4>
<pre><code class="language-python">from appium import webdriver
from appium.options.android import UiAutomator2Options
from appium.webdriver.common.appiumby import AppiumBy
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# é…ç½®
options = UiAutomator2Options()
options.platform_name = 'Android'
options.platform_version = '11'
options.device_name = 'Android Emulator'
options.app = '/path/to/app.apk'
options.automation_name = 'UiAutomator2'
options.app_package = 'com.example.app'
options.app_activity = '.MainActivity'

# å¯åŠ¨driver
driver = webdriver.Remote(
    'http://localhost:4723',
    options=options
)

try:
    # ç­‰å¾…å…ƒç´ 
    wait = WebDriverWait(driver, 10)
    element = wait.until(
        EC.presence_of_element_located(
            (AppiumBy.ID, "com.example.app:id/button")
        )
    )

    # ç‚¹å‡»
    element.click()

    # è¾“å…¥æ–‡æœ¬
    input_field = driver.find_element(AppiumBy.ID, "input_field")
    input_field.send_keys("æµ‹è¯•æ–‡æœ¬")

    # æ»‘åŠ¨
    driver.swipe(start_x=500, start_y=1500, end_x=500, end_y=500, duration=800)

finally:
    driver.quit()
</code></pre>
<h4 id="423-é«˜çº§æ“ä½œ"><a class="header" href="#423-é«˜çº§æ“ä½œ">4.2.3 é«˜çº§æ“ä½œ</a></h4>
<pre><code class="language-python"># æ»‘åŠ¨æ“ä½œ
from appium.webdriver.common.touch_action import TouchAction

action = TouchAction(driver)
action.press(x=100, y=500).wait(1000).move_to(x=100, y=100).release().perform()

# å¤šç‚¹è§¦æ§
from appium.webdriver.common.multi_action import MultiAction

action1 = TouchAction(driver)
action1.press(x=100, y=100).move_to(x=100, y=500).release()

action2 = TouchAction(driver)
action2.press(x=300, y=100).move_to(x=300, y=500).release()

multi_action = MultiAction(driver)
multi_action.add(action1, action2)
multi_action.perform()

# å¤„ç†Toastæ¶ˆæ¯
toast_element = driver.find_element(
    AppiumBy.XPATH,
    "//*[contains(@text, 'ç™»å½•æˆåŠŸ')]"
)
print(toast_element.text)
</code></pre>
<hr />
<h2 id="ç¬¬äº”ç« -æµ‹è¯•æ¡†æ¶è®¾è®¡ä¸å®ç°"><a class="header" href="#ç¬¬äº”ç« -æµ‹è¯•æ¡†æ¶è®¾è®¡ä¸å®ç°">ç¬¬äº”ç« : æµ‹è¯•æ¡†æ¶è®¾è®¡ä¸å®ç°</a></h2>
<h3 id="51-æ•°æ®é©±åŠ¨æµ‹è¯•"><a class="header" href="#51-æ•°æ®é©±åŠ¨æµ‹è¯•">5.1 æ•°æ®é©±åŠ¨æµ‹è¯•</a></h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>: å°†æµ‹è¯•æ•°æ®ä¸æµ‹è¯•é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç”¨ç›¸åŒçš„æµ‹è¯•é€»è¾‘æ‰§è¡Œä¸åŒçš„æµ‹è¯•æ•°æ®ã€‚</p>
<pre><code class="language-python"># data_driven_example.py
import pytest
import csv

def load_csv_data(filename):
    """ä»CSVæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®"""
    with open(filename, 'r', encoding='utf-8') as f:
        reader = csv.DictReader(f)
        return list(reader)

# test_data.csv
"""
username,password,expected_result
validuser,ValidPass@123,success
invaliduser,wrongpass,fail
"",ValidPass@123,fail
validuser,"",fail
"""

@pytest.mark.parametrize(
    "test_case",
    load_csv_data("test_data.csv"),
    ids=lambda tc: f"{tc['username']}/{tc['password']}"
)
def test_login_data_driven(login_page, test_case):
    """æ•°æ®é©±åŠ¨ç™»å½•æµ‹è¯•"""
    login_page.navigate()
    login_page.login(
        test_case['username'],
        test_case['password']
    )

    if test_case['expected_result'] == 'success':
        assert login_page.is_login_successful()
    else:
        assert login_page.is_error_displayed()
</code></pre>
<h3 id="52-å…³é”®å­—é©±åŠ¨æµ‹è¯•"><a class="header" href="#52-å…³é”®å­—é©±åŠ¨æµ‹è¯•">5.2 å…³é”®å­—é©±åŠ¨æµ‹è¯•</a></h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>: å°†æµ‹è¯•æ­¥éª¤æŠ½è±¡ä¸ºå…³é”®å­—ï¼Œé€šè¿‡ç»„åˆå…³é”®å­—æ„å»ºæµ‹è¯•ç”¨ä¾‹ã€‚</p>
<pre><code class="language-python"># keyword_framework.py
class KeywordLibrary:
    """å…³é”®å­—åº“"""

    def __init__(self, driver):
        self.driver = driver

    def open_url(self, url):
        """å…³é”®å­—: æ‰“å¼€URL"""
        self.driver.get(url)

    def input_text(self, locator, text):
        """å…³é”®å­—: è¾“å…¥æ–‡æœ¬"""
        element = self.driver.find_element(*locator)
        element.send_keys(text)

    def click_element(self, locator):
        """å…³é”®å­—: ç‚¹å‡»å…ƒç´ """
        element = self.driver.find_element(*locator)
        element.click()

    def verify_text(self, locator, expected_text):
        """å…³é”®å­—: éªŒè¯æ–‡æœ¬"""
        element = self.driver.find_element(*locator)
        assert expected_text in element.text

# æµ‹è¯•æ•°æ®
"""
[
    ["open_url", "https://example.com/login"],
    ["input_text", ("id", "username"), "testuser"],
    ["input_text", ("id", "password"), "Test@123"],
    ["click_element", ("id", "login-btn")],
    ["verify_text", ("class", "welcome"), "æ¬¢è¿"]
]
"""

def execute_keywords(keyword_library, test_steps):
    """æ‰§è¡Œå…³é”®å­—"""
    for step in test_steps:
        keyword = step[0]
        args = step[1:]
        method = getattr(keyword_library, keyword)
        method(*args)
</code></pre>
<hr />
<h2 id="ç¬¬å…­ç« -cicdé›†æˆ"><a class="header" href="#ç¬¬å…­ç« -cicdé›†æˆ">ç¬¬å…­ç« : CI/CDé›†æˆ</a></h2>
<h3 id="61-jenkinsé›†æˆ"><a class="header" href="#61-jenkinsé›†æˆ">6.1 Jenkinsé›†æˆ</a></h3>
<p><strong>Jenkinsfileç¤ºä¾‹</strong>:</p>
<pre><code class="language-groovy">pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git branch: 'main',
                    url: 'https://github.com/yourrepo/tests.git'
            }
        }

        stage('Install Dependencies') {
            steps {
                sh '''
                    python -m venv venv
                    . venv/bin/activate
                    pip install -r requirements.txt
                '''
            }
        }

        stage('Run Tests') {
            steps {
                sh '''
                    . venv/bin/activate
                    pytest tests/ --html=report.html --self-contained-html
                '''
            }
        }

        stage('Publish Report') {
            steps {
                publishHTML([
                    reportDir: '.',
                    reportFiles: 'report.html',
                    reportName: 'æµ‹è¯•æŠ¥å‘Š'
                ])
            }
        }
    }

    post {
        always {
            junit 'test-results/*.xml'
        }
        failure {
            mail to: 'team@example.com',
                 subject: "æµ‹è¯•å¤±è´¥: ${env.JOB_NAME}",
                 body: "æ„å»º ${env.BUILD_NUMBER} å¤±è´¥"
        }
    }
}
</code></pre>
<h3 id="62-github-actions"><a class="header" href="#62-github-actions">6.2 GitHub Actions</a></h3>
<p><strong>.github/workflows/test.yml</strong>:</p>
<pre><code class="language-yaml">name: è‡ªåŠ¨åŒ–æµ‹è¯•

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 2 * * *'  # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ

jobs:
  test:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        python-version: [3.8, 3.9, 3.10]

    steps:
    - uses: actions/checkout@v3

    - name: è®¾ç½®Python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}

    - name: å®‰è£…ä¾èµ–
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: è¿è¡Œæµ‹è¯•
      run: |
        pytest tests/ -v --html=report.html --self-contained-html

    - name: ä¸Šä¼ æµ‹è¯•æŠ¥å‘Š
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: test-report-${{ matrix.python-version }}
        path: report.html

    - name: å‘é€é€šçŸ¥
      if: failure()
      uses: 8398a7/action-slack@v3
      with:
        status: ${{ job.status }}
        text: 'æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥!'
        webhook_url: ${{ secrets.SLACK_WEBHOOK }}
</code></pre>
<hr />
<h2 id="ç¬¬ä¸ƒç« -æ€§èƒ½æµ‹è¯•è‡ªåŠ¨åŒ–"><a class="header" href="#ç¬¬ä¸ƒç« -æ€§èƒ½æµ‹è¯•è‡ªåŠ¨åŒ–">ç¬¬ä¸ƒç« : æ€§èƒ½æµ‹è¯•è‡ªåŠ¨åŒ–</a></h2>
<h3 id="71-jmeteråŸºç¡€"><a class="header" href="#71-jmeteråŸºç¡€">7.1 JMeteråŸºç¡€</a></h3>
<p><strong>æµ‹è¯•è®¡åˆ’ç»“æ„</strong>:</p>
<pre><code>Test Plan
â”œâ”€â”€ Thread Group (ç”¨æˆ·ç»„)
â”‚   â”œâ”€â”€ HTTP Request (è¯·æ±‚)
â”‚   â”œâ”€â”€ Response Assertion (æ–­è¨€)
â”‚   â””â”€â”€ Listeners (ç›‘å¬å™¨)
â”‚       â”œâ”€â”€ View Results Tree
â”‚       â”œâ”€â”€ Summary Report
â”‚       â””â”€â”€ Aggregate Report
â””â”€â”€ CSV Data Set Config (æ•°æ®é…ç½®)
</code></pre>
<p><strong>JMeterè„šæœ¬ç¤ºä¾‹(test_plan.jmx)</strong>:</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jmeterTestPlan version="1.2" properties="5.0"&gt;
  &lt;hashTree&gt;
    &lt;TestPlan&gt;
      &lt;stringProp name="TestPlan.comments"&gt;APIæ€§èƒ½æµ‹è¯•&lt;/stringProp&gt;
      &lt;boolProp name="TestPlan.functional_mode"&gt;false&lt;/boolProp&gt;
      &lt;boolProp name="TestPlan.serialize_threadgroups"&gt;false&lt;/boolProp&gt;
    &lt;/TestPlan&gt;
    &lt;hashTree&gt;
      &lt;ThreadGroup&gt;
        &lt;stringProp name="ThreadGroup.num_threads"&gt;100&lt;/stringProp&gt;
        &lt;stringProp name="ThreadGroup.ramp_time"&gt;10&lt;/stringProp&gt;
        &lt;stringProp name="ThreadGroup.duration"&gt;60&lt;/stringProp&gt;
      &lt;/ThreadGroup&gt;
      &lt;hashTree&gt;
        &lt;HTTPSamplerProxy&gt;
          &lt;stringProp name="HTTPSampler.domain"&gt;api.example.com&lt;/stringProp&gt;
          &lt;stringProp name="HTTPSampler.port"&gt;443&lt;/stringProp&gt;
          &lt;stringProp name="HTTPSampler.protocol"&gt;https&lt;/stringProp&gt;
          &lt;stringProp name="HTTPSampler.path"&gt;/api/users&lt;/stringProp&gt;
          &lt;stringProp name="HTTPSampler.method"&gt;GET&lt;/stringProp&gt;
        &lt;/HTTPSamplerProxy&gt;
      &lt;/hashTree&gt;
    &lt;/hashTree&gt;
  &lt;/hashTree&gt;
&lt;/jmeterTestPlan&gt;
</code></pre>
<p><strong>å‘½ä»¤è¡Œæ‰§è¡Œ</strong>:</p>
<pre><code class="language-bash"># è¿è¡Œæµ‹è¯•
jmeter -n -t test_plan.jmx -l results.jtl -e -o reports/

# -n: éGUIæ¨¡å¼
# -t: æµ‹è¯•è®¡åˆ’æ–‡ä»¶
# -l: ç»“æœæ–‡ä»¶
# -e: ç”ŸæˆHTMLæŠ¥å‘Š
# -o: æŠ¥å‘Šè¾“å‡ºç›®å½•
</code></pre>
<h3 id="72-locust---pythonæ€§èƒ½æµ‹è¯•"><a class="header" href="#72-locust---pythonæ€§èƒ½æµ‹è¯•">7.2 Locust - Pythonæ€§èƒ½æµ‹è¯•</a></h3>
<pre><code class="language-python"># locustfile.py
from locust import HttpUser, task, between
import random

class WebsiteUser(HttpUser):
    """æ¨¡æ‹Ÿç½‘ç«™ç”¨æˆ·è¡Œä¸º"""

    # ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰
    wait_time = between(1, 3)

    def on_start(self):
        """ç”¨æˆ·å¼€å§‹æ—¶æ‰§è¡Œï¼ˆç™»å½•ï¼‰"""
        response = self.client.post("/login", json={
            "username": "testuser",
            "password": "Test@123"
        })
        self.token = response.json()['token']

    @task(3)  # æƒé‡3
    def view_homepage(self):
        """è®¿é—®é¦–é¡µ"""
        self.client.get("/", headers=self.get_headers())

    @task(2)  # æƒé‡2
    def view_products(self):
        """æŸ¥çœ‹äº§å“åˆ—è¡¨"""
        self.client.get("/products", headers=self.get_headers())

    @task(1)  # æƒé‡1
    def view_product_detail(self):
        """æŸ¥çœ‹äº§å“è¯¦æƒ…"""
        product_id = random.randint(1, 100)
        self.client.get(
            f"/products/{product_id}",
            headers=self.get_headers(),
            name="/products/[id]"  # åˆ†ç»„ç»Ÿè®¡
        )

    @task(1)
    def search_products(self):
        """æœç´¢äº§å“"""
        keywords = ["phone", "laptop", "camera", "watch"]
        keyword = random.choice(keywords)

        with self.client.get(
            "/search",
            params={"q": keyword},
            headers=self.get_headers(),
            catch_response=True
        ) as response:
            if response.status_code == 200:
                results = response.json()
                if len(results) &gt; 0:
                    response.success()
                else:
                    response.failure("æ²¡æœ‰æœç´¢ç»“æœ")
            else:
                response.failure(f"çŠ¶æ€ç : {response.status_code}")

    def get_headers(self):
        """è·å–è¯·æ±‚å¤´"""
        return {
            "Authorization": f"Bearer {self.token}",
            "Content-Type": "application/json"
        }

# å‹åŠ›æµ‹è¯•åœºæ™¯
class StressTestUser(HttpUser):
    """å‹åŠ›æµ‹è¯•ç”¨æˆ·"""
    wait_time = between(0.5, 1)  # æ›´çŸ­çš„ç­‰å¾…æ—¶é—´

    @task
    def stress_endpoint(self):
        """æŒç»­å‹æµ‹æŸä¸ªç«¯ç‚¹"""
        self.client.get("/api/heavy-operation")
</code></pre>
<p><strong>è¿è¡ŒLocust</strong>:</p>
<pre><code class="language-bash"># Web UIæ¨¡å¼
locust -f locustfile.py --host=https://api.example.com

# æ— UIæ¨¡å¼ï¼ˆé€‚åˆCI/CDï¼‰
locust -f locustfile.py --host=https://api.example.com \
       --users 100 --spawn-rate 10 --run-time 5m \
       --html report.html
</code></pre>
<hr />
<h2 id="ç¬¬å…«ç« -æµ‹è¯•æŠ¥å‘Šä¸ç›‘æ§"><a class="header" href="#ç¬¬å…«ç« -æµ‹è¯•æŠ¥å‘Šä¸ç›‘æ§">ç¬¬å…«ç« : æµ‹è¯•æŠ¥å‘Šä¸ç›‘æ§</a></h2>
<h3 id="81-allure-report"><a class="header" href="#81-allure-report">8.1 Allure Report</a></h3>
<p><strong>å®‰è£…é…ç½®</strong>:</p>
<pre><code class="language-bash"># å®‰è£…Allureå‘½ä»¤è¡Œå·¥å…·
brew install allure  # macOS
sudo apt-get install allure  # Linux

# å®‰è£…pytest-allureæ’ä»¶
pip install allure-pytest
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>:</p>
<pre><code class="language-python">import allure
import pytest

@allure.epic("ç”µå•†ç³»ç»Ÿ")
@allure.feature("ç”¨æˆ·æ¨¡å—")
class TestUserManagement:

    @allure.story("ç”¨æˆ·æ³¨å†Œ")
    @allure.title("æµ‹è¯•æˆåŠŸæ³¨å†Œç”¨æˆ·")
    @allure.description("éªŒè¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨æœ‰æ•ˆä¿¡æ¯æˆåŠŸæ³¨å†Œ")
    @allure.severity(allure.severity_level.BLOCKER)
    def test_register_success(self):
        with allure.step("å‡†å¤‡ç”¨æˆ·æ•°æ®"):
            user_data = {"username": "newuser", "email": "new@example.com"}
            allure.attach(
                str(user_data),
                name="ç”¨æˆ·æ•°æ®",
                attachment_type=allure.attachment_type.JSON
            )

        with allure.step("å‘é€æ³¨å†Œè¯·æ±‚"):
            response = register_user(user_data)

        with allure.step("éªŒè¯æ³¨å†ŒæˆåŠŸ"):
            assert response.status_code == 201
            assert "id" in response.json()

    @allure.story("ç”¨æˆ·ç™»å½•")
    @pytest.mark.parametrize("username,password,expected", [
        ("validuser", "ValidPass@123", "success"),
        ("invaliduser", "wrongpass", "fail"),
    ], ids=["æœ‰æ•ˆå‡­æ®", "æ— æ•ˆå‡­æ®"])
    def test_login(self, username, password, expected):
        """å‚æ•°åŒ–ç™»å½•æµ‹è¯•"""
        allure.dynamic.title(f"æµ‹è¯•ç™»å½• - {username}")

        result = login(username, password)

        if expected == "success":
            assert result.is_success
        else:
            assert not result.is_success

# ç”ŸæˆæŠ¥å‘Š
# pytest --alluredir=allure-results
# allure serve allure-results
</code></pre>
<p><strong>Allureç‰¹æ€§</strong>:</p>
<ul>
<li><strong>Epic/Feature/Story</strong>: ä¸‰çº§åˆ†ç±»</li>
<li><strong>Severity</strong>: ä¼˜å…ˆçº§æ ‡è®°ï¼ˆblocker, critical, normal, minor, trivialï¼‰</li>
<li><strong>Steps</strong>: æµ‹è¯•æ­¥éª¤</li>
<li><strong>Attachments</strong>: é™„ä»¶ï¼ˆæˆªå›¾ã€æ—¥å¿—ã€æ•°æ®ï¼‰</li>
<li><strong>Categories</strong>: å¤±è´¥åˆ†ç±»</li>
<li><strong>Flaky Tests</strong>: ä¸ç¨³å®šæµ‹è¯•æ ‡è®°</li>
</ul>
<h3 id="82-æµ‹è¯•ç›‘æ§ä¸åˆ†æ"><a class="header" href="#82-æµ‹è¯•ç›‘æ§ä¸åˆ†æ">8.2 æµ‹è¯•ç›‘æ§ä¸åˆ†æ</a></h3>
<p><strong>æµ‹è¯•æŒ‡æ ‡æ”¶é›†</strong>:</p>
<pre><code class="language-python"># test_metrics.py
import time
import psutil
from dataclasses import dataclass
from typing import List

@dataclass
class TestMetrics:
    """æµ‹è¯•æŒ‡æ ‡"""
    test_name: str
    duration: float
    status: str
    memory_usage: float
    cpu_usage: float
    timestamp: str

class MetricsCollector:
    """æŒ‡æ ‡æ”¶é›†å™¨"""

    def __init__(self):
        self.metrics: List[TestMetrics] = []

    def collect(self, test_name: str, func):
        """æ”¶é›†æµ‹è¯•æ‰§è¡ŒæŒ‡æ ‡"""
        start_time = time.time()
        start_memory = psutil.Process().memory_info().rss / 1024 / 1024
        start_cpu = psutil.cpu_percent(interval=0.1)

        try:
            func()
            status = "PASSED"
        except Exception:
            status = "FAILED"
            raise
        finally:
            end_time = time.time()
            end_memory = psutil.Process().memory_info().rss / 1024 / 1024
            end_cpu = psutil.cpu_percent(interval=0.1)

            metrics = TestMetrics(
                test_name=test_name,
                duration=end_time - start_time,
                status=status,
                memory_usage=end_memory - start_memory,
                cpu_usage=(start_cpu + end_cpu) / 2,
                timestamp=time.strftime("%Y-%m-%d %H:%M:%S")
            )

            self.metrics.append(metrics)

    def export_to_csv(self, filename="test_metrics.csv"):
        """å¯¼å‡ºä¸ºCSV"""
        import csv

        with open(filename, 'w', newline='') as f:
            writer = csv.DictWriter(f, fieldnames=[
                'test_name', 'duration', 'status',
                'memory_usage', 'cpu_usage', 'timestamp'
            ])
            writer.writeheader()
            for metric in self.metrics:
                writer.writerow(metric.__dict__)

# ä½¿ç”¨ç¤ºä¾‹
@pytest.fixture(scope="session")
def metrics_collector():
    collector = MetricsCollector()
    yield collector
    collector.export_to_csv()

def test_with_metrics(metrics_collector):
    metrics_collector.collect("test_example", lambda: perform_test())
</code></pre>
<hr />
<h2 id="-å­¦ä¹ æˆæœéªŒè¯"><a class="header" href="#-å­¦ä¹ æˆæœéªŒè¯">ğŸ“š å­¦ä¹ æˆæœéªŒè¯</a></h2>
<h3 id="-éªŒè¯æ ‡å‡†"><a class="header" href="#-éªŒè¯æ ‡å‡†">âœ… éªŒè¯æ ‡å‡†</a></h3>
<p>å®Œæˆæœ¬ç¬”è®°å­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p>
<ol>
<li>
<p><strong>ç†è®ºçŸ¥è¯†</strong> (20%)</p>
<ul>
<li><input disabled="" type="checkbox"/>
è§£é‡Šè‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼å’Œå±€é™æ€§</li>
<li><input disabled="" type="checkbox"/>
æè¿°æµ‹è¯•é‡‘å­—å¡”çš„å„å±‚æ¬¡åŠå…¶ç‰¹ç‚¹</li>
<li><input disabled="" type="checkbox"/>
ç†è§£ä¸åŒæµ‹è¯•ç±»å‹çš„åº”ç”¨åœºæ™¯</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜èƒ½åŠ›</strong> (60%)</p>
<ul>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨Selenium/Playwrightç¼–å†™Webè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨Requests/pytestç¼–å†™APIè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li><input disabled="" type="checkbox"/>
è®¾è®¡å¹¶å®ç°é¡µé¢å¯¹è±¡æ¨¡å¼ï¼ˆPOMï¼‰</li>
<li><input disabled="" type="checkbox"/>
é…ç½®å¹¶è¿è¡ŒCI/CDæµ‹è¯•æµæ°´çº¿</li>
<li><input disabled="" type="checkbox"/>
ç”Ÿæˆä¸“ä¸šçš„æµ‹è¯•æŠ¥å‘Š</li>
</ul>
</li>
<li>
<p><strong>æ¡†æ¶è®¾è®¡</strong> (20%)</p>
<ul>
<li><input disabled="" type="checkbox"/>
è®¾è®¡å¯ç»´æŠ¤çš„æµ‹è¯•æ¡†æ¶ç»“æ„</li>
<li><input disabled="" type="checkbox"/>
å®ç°æ•°æ®é©±åŠ¨å’Œå…³é”®å­—é©±åŠ¨æµ‹è¯•</li>
<li><input disabled="" type="checkbox"/>
é›†æˆæµ‹è¯•åˆ°æŒç»­é›†æˆç¯å¢ƒ</li>
</ul>
</li>
</ol>
<h3 id="-å®æˆ˜é¡¹ç›®å»ºè®®"><a class="header" href="#-å®æˆ˜é¡¹ç›®å»ºè®®">ğŸ¯ å®æˆ˜é¡¹ç›®å»ºè®®</a></h3>
<p><strong>åˆçº§é¡¹ç›®</strong>:</p>
<ol>
<li>ä¸ºç®€å•ç½‘ç«™ï¼ˆå¦‚ä¸ªäººåšå®¢ï¼‰ç¼–å†™UIè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>ä¸ºå…¬å…±APIï¼ˆå¦‚JSONPlaceholderï¼‰ç¼–å†™APIæµ‹è¯•å¥—ä»¶</li>
</ol>
<p><strong>ä¸­çº§é¡¹ç›®</strong>:
3. ä¸ºç”µå•†ç½‘ç«™æ ¸å¿ƒæµç¨‹ç¼–å†™ç«¯åˆ°ç«¯æµ‹è¯•
4. è®¾è®¡POMæ¶æ„çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</p>
<p><strong>é«˜çº§é¡¹ç›®</strong>:
5. æ„å»ºåŒ…å«Web+API+æ•°æ®åº“çš„å®Œæ•´æµ‹è¯•æ¡†æ¶
6. å®ç°æµ‹è¯•ç»“æœç›‘æ§å’Œåˆ†æç³»ç»Ÿ</p>
<hr />
<h2 id="-æ‰©å±•èµ„æº"><a class="header" href="#-æ‰©å±•èµ„æº">ğŸ”— æ‰©å±•èµ„æº</a></h2>
<h3 id="å®˜æ–¹æ–‡æ¡£"><a class="header" href="#å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></h3>
<ul>
<li><a href="https://www.selenium.dev/documentation/">Seleniumå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://playwright.dev/python/">Playwrightå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://docs.pytest.org/">Pytestå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="http://appium.io/docs/">Appiumå®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<h3 id="æ¨èä¹¦ç±"><a class="header" href="#æ¨èä¹¦ç±">æ¨èä¹¦ç±</a></h3>
<ul>
<li>ã€Šè½¯ä»¶æµ‹è¯•çš„è‰ºæœ¯ã€‹ - æµ‹è¯•ç†è®ºåŸºç¡€</li>
<li>ã€ŠPython Testing with pytestã€‹ - pytestæ·±å…¥å­¦ä¹ </li>
<li>ã€ŠSelenium WebDriverå®æˆ˜å®å…¸ã€‹ - Seleniumå®æˆ˜</li>
</ul>
<h3 id="åœ¨çº¿èµ„æº"><a class="header" href="#åœ¨çº¿èµ„æº">åœ¨çº¿èµ„æº</a></h3>
<ul>
<li><a href="https://testautomationu.applitools.com/">Test Automation University</a> - å…è´¹æµ‹è¯•è¯¾ç¨‹</li>
<li><a href="https://www.ministryoftesting.com/">Ministry of Testing</a> - æµ‹è¯•ç¤¾åŒº</li>
<li><a href="https://github.com/TheJambo/awesome-testing">Awesome Testing</a> - æµ‹è¯•èµ„æºåˆé›†</li>
</ul>
<h3 id="å®è·µå¹³å°"><a class="header" href="#å®è·µå¹³å°">å®è·µå¹³å°</a></h3>
<ul>
<li><a href="https://the-internet.herokuapp.com/">The Internet</a> - Webæµ‹è¯•ç»ƒä¹ ç½‘ç«™</li>
<li><a href="https://restful-booker.herokuapp.com/">Restful-booker</a> - APIæµ‹è¯•ç»ƒä¹ </li>
<li><a href="https://www.saucedemo.com/">SauceDemo</a> - ç”µå•†æµ‹è¯•ç½‘ç«™</li>
</ul>
<hr />
<h2 id="-å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ"><a class="header" href="#-å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ">ğŸ’¡ å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ</a></h2>
<h3 id="q1-ä»€ä¹ˆæ—¶å€™å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯•"><a class="header" href="#q1-ä»€ä¹ˆæ—¶å€™å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯•">Q1: ä»€ä¹ˆæ—¶å€™å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ</a></h3>
<p><strong>A</strong>: å½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼š</p>
<ul>
<li>åŠŸèƒ½ç›¸å¯¹ç¨³å®šï¼Œä¸é¢‘ç¹å˜æ›´</li>
<li>éœ€è¦é¢‘ç¹å›å½’æµ‹è¯•</li>
<li>æœ‰è¶³å¤Ÿçš„æŠ•å…¥æ—¶é—´å’Œèµ„æº</li>
<li>å›¢é˜Ÿå…·å¤‡åŸºç¡€ç¼–ç¨‹èƒ½åŠ›</li>
</ul>
<h3 id="q2-å¦‚ä½•æé«˜æµ‹è¯•ç¨³å®šæ€§"><a class="header" href="#q2-å¦‚ä½•æé«˜æµ‹è¯•ç¨³å®šæ€§">Q2: å¦‚ä½•æé«˜æµ‹è¯•ç¨³å®šæ€§ï¼Ÿ</a></h3>
<p><strong>A</strong>:</p>
<ul>
<li>ä½¿ç”¨æ˜¾å¼ç­‰å¾…è€Œéå›ºå®šç­‰å¾…</li>
<li>åˆç†ä½¿ç”¨é‡è¯•æœºåˆ¶</li>
<li>é¿å…ä¾èµ–åŠ¨æ€æ•°æ®</li>
<li>åšå¥½æµ‹è¯•æ•°æ®éš”ç¦»</li>
<li>ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦å®šä½å…ƒç´ </li>
</ul>
<h3 id="q3-å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·"><a class="header" href="#q3-å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·">Q3: å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Ÿ</a></h3>
<p><strong>A</strong>: è€ƒè™‘å› ç´ ï¼š</p>
<ul>
<li>é¡¹ç›®æŠ€æœ¯æ ˆ</li>
<li>å›¢é˜ŸæŠ€èƒ½</li>
<li>ç¤¾åŒºæ”¯æŒ</li>
<li>æ–‡æ¡£å®Œå–„åº¦</li>
<li>å­¦ä¹ æ›²çº¿</li>
<li>æˆæœ¬é¢„ç®—</li>
</ul>
<h3 id="q4-è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡å¤šå°‘åˆé€‚"><a class="header" href="#q4-è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡å¤šå°‘åˆé€‚">Q4: è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡å¤šå°‘åˆé€‚ï¼Ÿ</a></h3>
<p><strong>A</strong>:</p>
<ul>
<li>å•å…ƒæµ‹è¯•ï¼š70-80%</li>
<li>é›†æˆæµ‹è¯•ï¼š20-30%</li>
<li>E2Eæµ‹è¯•ï¼š10-20%</li>
<li>ä¸è¿½æ±‚100%è¦†ç›–ç‡</li>
<li>å…³æ³¨å…³é”®ä¸šåŠ¡æµç¨‹</li>
</ul>
<hr />
<h2 id="-æ€»ç»“"><a class="header" href="#-æ€»ç»“">ğŸ“ æ€»ç»“</a></h2>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ä¸€ä¸ªæŒç»­å­¦ä¹ å’Œå®è·µçš„è¿‡ç¨‹ã€‚æœ¬ç¬”è®°æ¶µç›–äº†ä»åŸºç¡€åˆ°è¿›é˜¶çš„å…¨é¢å†…å®¹ï¼Œä½†çœŸæ­£çš„æŒæ¡éœ€è¦åœ¨å®é™…é¡¹ç›®ä¸­ä¸æ–­åº”ç”¨å’Œä¼˜åŒ–ã€‚</p>
<p><strong>å­¦ä¹ è·¯å¾„å›é¡¾</strong>:</p>
<ol>
<li>âœ… æŒæ¡æµ‹è¯•åŸºç¡€ç†è®º</li>
<li>âœ… é€‰æ‹©ä¸€ä¸ªé¢†åŸŸæ·±å…¥å­¦ä¹ ï¼ˆWeb/API/ç§»åŠ¨ç«¯ï¼‰</li>
<li>âœ… å­¦ä¹ æµ‹è¯•æ¡†æ¶è®¾è®¡æ¨¡å¼</li>
<li>âœ… å®è·µCI/CDé›†æˆ</li>
<li>âœ… æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›</li>
</ol>
<p><strong>æŒç»­æå‡æ–¹å‘</strong>:</p>
<ul>
<li>å…³æ³¨æ–°æŠ€æœ¯å’Œå·¥å…·å‘å±•</li>
<li>å‚ä¸å¼€æºé¡¹ç›®</li>
<li>åˆ†äº«ç»éªŒå’Œæœ€ä½³å®è·µ</li>
<li>è€ƒå–ç›¸å…³è®¤è¯ï¼ˆISTQBç­‰ï¼‰</li>
</ul>
<p>ç¥ä½ åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•çš„é“è·¯ä¸Šä¸æ–­è¿›æ­¥ï¼ğŸš€</p>
<hr />
<p><strong>ç‰ˆæœ¬ä¿¡æ¯</strong>: v1.0
<strong>æœ€åæ›´æ–°</strong>: 2025-01
<strong>ç»´æŠ¤</strong>: æŒç»­æ›´æ–°ä¸­</p>
<p><strong>åé¦ˆä¸å»ºè®®</strong>: æ¬¢è¿é€šè¿‡Issuesæå‡ºæ”¹è¿›å»ºè®®</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ç¼–ç¨‹/springcloud/springcloud.seata.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ç¼–ç¨‹/video/FFMpeg.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ç¼–ç¨‹/springcloud/springcloud.seata.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ç¼–ç¨‹/video/FFMpeg.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

