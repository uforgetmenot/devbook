<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TCP/IPåº”ç”¨å±‚åè®®è¯¦è§£ - å¼€å‘</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">å¼€å‘</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="æœç´¢æœ¬ä¹¦å†…å®¹..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="tcpipåº”ç”¨å±‚åè®®è¯¦è§£"><a class="header" href="#tcpipåº”ç”¨å±‚åè®®è¯¦è§£">TCP/IPåº”ç”¨å±‚åè®®è¯¦è§£</a></h1>
<blockquote>
<p>æœ¬ç¬”è®°æ˜¯<a href="tcpip.html">TCP/IPåè®®å­¦ä¹ ç¬”è®°</a>çš„æ‰©å±•éƒ¨åˆ†ï¼Œä¸“æ³¨äºåº”ç”¨å±‚åè®®çš„æ·±å…¥è®²è§£</p>
</blockquote>
<h2 id="-ç›®å½•"><a class="header" href="#-ç›®å½•">ğŸ“‹ ç›®å½•</a></h2>
<ul>
<li><a href="#%E7%AC%AC%E4%B8%80%E7%AB%A0httphttps%E5%8D%8F%E8%AE%AE">ç¬¬ä¸€ç« ï¼šHTTP/HTTPSåè®®</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0dns%E5%8D%8F%E8%AE%AE">ç¬¬äºŒç« ï¼šDNSåè®®</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE">ç¬¬ä¸‰ç« ï¼šé‚®ä»¶åè®®</a></li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0ftp%E5%8D%8F%E8%AE%AE">ç¬¬å››ç« ï¼šFTPåè®®</a></li>
<li><a href="#%E7%AC%AC%E4%BA%94%E7%AB%A0websocket%E5%8D%8F%E8%AE%AE">ç¬¬äº”ç« ï¼šWebSocketåè®®</a></li>
<li><a href="#%E7%AC%AC%E5%85%AD%E7%AB%A0ssh%E5%8D%8F%E8%AE%AE">ç¬¬å…­ç« ï¼šSSHåè®®</a></li>
</ul>
<hr />
<h2 id="ç¬¬ä¸€ç« httphttpsåè®®"><a class="header" href="#ç¬¬ä¸€ç« httphttpsåè®®">ç¬¬ä¸€ç« ï¼šHTTP/HTTPSåè®®</a></h2>
<h3 id="11-httpåè®®åŸºç¡€"><a class="header" href="#11-httpåè®®åŸºç¡€">1.1 HTTPåè®®åŸºç¡€</a></h3>
<h4 id="httpåè®®æ¦‚è¿°"><a class="header" href="#httpåè®®æ¦‚è¿°">HTTPåè®®æ¦‚è¿°</a></h4>
<p><strong>HTTP (HyperText Transfer Protocol)</strong> - è¶…æ–‡æœ¬ä¼ è¾“åè®®</p>
<pre><code>ç‰¹ç‚¹ï¼š
1. æ— çŠ¶æ€ï¼šæ¯ä¸ªè¯·æ±‚ç‹¬ç«‹ï¼ŒæœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯ä¿¡æ¯
2. åŸºäºTCPï¼šä½¿ç”¨TCPä½œä¸ºä¼ è¾“å±‚åè®®ï¼ˆHTTP/3ä½¿ç”¨QUICï¼‰
3. è¯·æ±‚-å“åº”æ¨¡å¼ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›å“åº”
4. çµæ´»ï¼šå¯ä»¥ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®
5. ç®€å•ï¼šæŠ¥æ–‡æ ¼å¼äººç±»å¯è¯»
</code></pre>
<h4 id="httpç‰ˆæœ¬æ¼”è¿›"><a class="header" href="#httpç‰ˆæœ¬æ¼”è¿›">HTTPç‰ˆæœ¬æ¼”è¿›</a></h4>
<div class="table-wrapper"><table><thead><tr><th>ç‰ˆæœ¬</th><th>å‘å¸ƒå¹´ä»½</th><th>ä¸»è¦ç‰¹æ€§</th></tr></thead><tbody>
<tr><td><strong>HTTP/0.9</strong></td><td>1991</td><td>åªæ”¯æŒGETï¼Œæ— å¤´éƒ¨</td></tr>
<tr><td><strong>HTTP/1.0</strong></td><td>1996</td><td>å¢åŠ POSTã€HEADï¼Œå¼•å…¥å¤´éƒ¨</td></tr>
<tr><td><strong>HTTP/1.1</strong></td><td>1997</td><td>æŒä¹…è¿æ¥ã€ç®¡é“åŒ–ã€ç¼“å­˜æ§åˆ¶</td></tr>
<tr><td><strong>HTTP/2</strong></td><td>2015</td><td>å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æœåŠ¡å™¨æ¨é€</td></tr>
<tr><td><strong>HTTP/3</strong></td><td>2022</td><td>åŸºäºQUICï¼ŒUDPä¼ è¾“ï¼Œ0-RTT</td></tr>
</tbody></table>
</div>
<h3 id="12-httpè¯·æ±‚å’Œå“åº”"><a class="header" href="#12-httpè¯·æ±‚å’Œå“åº”">1.2 HTTPè¯·æ±‚å’Œå“åº”</a></h3>
<h4 id="httpè¯·æ±‚æ ¼å¼"><a class="header" href="#httpè¯·æ±‚æ ¼å¼">HTTPè¯·æ±‚æ ¼å¼</a></h4>
<pre><code>GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html
Accept-Language: zh-CN,zh;q=0.9
Connection: keep-alive

[è¯·æ±‚ä½“ - GETè¯·æ±‚é€šå¸¸ä¸ºç©º]
</code></pre>
<p><strong>è¯·æ±‚è¡Œ</strong></p>
<pre><code>æ–¹æ³• URL HTTPç‰ˆæœ¬
GET /path/to/resource HTTP/1.1
</code></pre>
<p><strong>å¸¸è§HTTPæ–¹æ³•</strong></p>
<div class="table-wrapper"><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>å¹‚ç­‰æ€§</th><th>å®‰å…¨æ€§</th></tr></thead><tbody>
<tr><td><strong>GET</strong></td><td>è·å–èµ„æº</td><td>æ˜¯</td><td>æ˜¯</td></tr>
<tr><td><strong>POST</strong></td><td>æäº¤æ•°æ®</td><td>å¦</td><td>å¦</td></tr>
<tr><td><strong>PUT</strong></td><td>æ›´æ–°èµ„æº</td><td>æ˜¯</td><td>å¦</td></tr>
<tr><td><strong>DELETE</strong></td><td>åˆ é™¤èµ„æº</td><td>æ˜¯</td><td>å¦</td></tr>
<tr><td><strong>HEAD</strong></td><td>è·å–å¤´éƒ¨</td><td>æ˜¯</td><td>æ˜¯</td></tr>
<tr><td><strong>OPTIONS</strong></td><td>è·å–æ”¯æŒçš„æ–¹æ³•</td><td>æ˜¯</td><td>æ˜¯</td></tr>
<tr><td><strong>PATCH</strong></td><td>éƒ¨åˆ†æ›´æ–°</td><td>å¦</td><td>å¦</td></tr>
<tr><td><strong>CONNECT</strong></td><td>å»ºç«‹éš§é“</td><td>å¦</td><td>å¦</td></tr>
<tr><td><strong>TRACE</strong></td><td>è¿½è¸ªè¯·æ±‚</td><td>æ˜¯</td><td>æ˜¯</td></tr>
</tbody></table>
</div>
<h4 id="httpå“åº”æ ¼å¼"><a class="header" href="#httpå“åº”æ ¼å¼">HTTPå“åº”æ ¼å¼</a></h4>
<pre><code>HTTP/1.1 200 OK
Date: Mon, 07 Nov 2025 12:00:00 GMT
Server: nginx/1.18.0
Content-Type: text/html; charset=UTF-8
Content-Length: 1234
Connection: keep-alive
Cache-Control: max-age=3600

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>çŠ¶æ€ç åˆ†ç±»</strong></p>
<pre><code>1xx - ä¿¡æ¯æ€§çŠ¶æ€ç 
  100 Continue
  101 Switching Protocols

2xx - æˆåŠŸçŠ¶æ€ç 
  200 OK
  201 Created
  204 No Content
  206 Partial Content

3xx - é‡å®šå‘çŠ¶æ€ç 
  301 Moved Permanently (æ°¸ä¹…é‡å®šå‘)
  302 Found (ä¸´æ—¶é‡å®šå‘)
  304 Not Modified (ç¼“å­˜æœ‰æ•ˆ)
  307 Temporary Redirect
  308 Permanent Redirect

4xx - å®¢æˆ·ç«¯é”™è¯¯
  400 Bad Request
  401 Unauthorized (æœªè®¤è¯)
  403 Forbidden (æ— æƒé™)
  404 Not Found
  405 Method Not Allowed
  429 Too Many Requests

5xx - æœåŠ¡å™¨é”™è¯¯
  500 Internal Server Error
  502 Bad Gateway
  503 Service Unavailable
  504 Gateway Timeout
</code></pre>
<h3 id="13-httpå¤´éƒ¨è¯¦è§£"><a class="header" href="#13-httpå¤´éƒ¨è¯¦è§£">1.3 HTTPå¤´éƒ¨è¯¦è§£</a></h3>
<h4 id="å¸¸ç”¨è¯·æ±‚å¤´"><a class="header" href="#å¸¸ç”¨è¯·æ±‚å¤´">å¸¸ç”¨è¯·æ±‚å¤´</a></h4>
<pre><code class="language-python"># å†…å®¹åå•†
Accept: text/html,application/json  # å¯æ¥å—çš„å†…å®¹ç±»å‹
Accept-Language: zh-CN,en          # å¯æ¥å—çš„è¯­è¨€
Accept-Encoding: gzip, deflate, br # å¯æ¥å—çš„ç¼–ç 

# æ¡ä»¶è¯·æ±‚
If-Modified-Since: Mon, 01 Nov 2025 00:00:00 GMT
If-None-Match: "etag-value"

# èº«ä»½è®¤è¯
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Cookie: session_id=abc123; user=john

# ç¼“å­˜æ§åˆ¶
Cache-Control: no-cache, max-age=0
Pragma: no-cache

# å…¶ä»–
User-Agent: Mozilla/5.0 ...
Referer: https://example.com/page
Host: www.example.com
Connection: keep-alive
Content-Type: application/json
Content-Length: 256
</code></pre>
<h4 id="å¸¸ç”¨å“åº”å¤´"><a class="header" href="#å¸¸ç”¨å“åº”å¤´">å¸¸ç”¨å“åº”å¤´</a></h4>
<pre><code class="language-python"># å†…å®¹ä¿¡æ¯
Content-Type: text/html; charset=UTF-8
Content-Length: 1234
Content-Encoding: gzip

# ç¼“å­˜æ§åˆ¶
Cache-Control: public, max-age=3600
Expires: Mon, 07 Nov 2025 13:00:00 GMT
ETag: "686897696a7c876b7e"
Last-Modified: Mon, 07 Nov 2025 12:00:00 GMT

# å®‰å…¨ç›¸å…³
Strict-Transport-Security: max-age=31536000
X-Frame-Options: SAMEORIGIN
X-Content-Type-Options: nosniff
Content-Security-Policy: default-src 'self'

# CORSè·¨åŸŸ
Access-Control-Allow-Origin: https://example.com
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: Content-Type
Access-Control-Max-Age: 86400

# å…¶ä»–
Server: nginx/1.18.0
Set-Cookie: session_id=abc123; HttpOnly; Secure
Location: https://example.com/new-page
</code></pre>
<h3 id="14-pythonå®ç°httpå®¢æˆ·ç«¯"><a class="header" href="#14-pythonå®ç°httpå®¢æˆ·ç«¯">1.4 Pythonå®ç°HTTPå®¢æˆ·ç«¯</a></h3>
<h4 id="ä½¿ç”¨requestsåº“"><a class="header" href="#ä½¿ç”¨requestsåº“">ä½¿ç”¨requestsåº“</a></h4>
<pre><code class="language-python">import requests

# GETè¯·æ±‚
response = requests.get('https://api.github.com/users/octocat')
print(f"çŠ¶æ€ç : {response.status_code}")
print(f"å“åº”å¤´: {response.headers}")
print(f"å“åº”ä½“: {response.json()}")

# POSTè¯·æ±‚
data = {'username': 'john', 'password': 'secret'}
response = requests.post('https://httpbin.org/post', json=data)

# è®¾ç½®è¯·æ±‚å¤´
headers = {
    'User-Agent': 'MyApp/1.0',
    'Authorization': 'Bearer token123'
}
response = requests.get('https://api.example.com/data', headers=headers)

# è®¾ç½®è¶…æ—¶
response = requests.get('https://httpbin.org/delay/3', timeout=5)

# ä¼šè¯ä¿æŒï¼ˆCookieè‡ªåŠ¨ç®¡ç†ï¼‰
session = requests.Session()
session.post('https://httpbin.org/login', data={'user': 'john'})
response = session.get('https://httpbin.org/user')  # Cookieè‡ªåŠ¨å‘é€
</code></pre>
<h4 id="ä½¿ç”¨urllibå®ç°"><a class="header" href="#ä½¿ç”¨urllibå®ç°">ä½¿ç”¨urllibå®ç°</a></h4>
<pre><code class="language-python">import urllib.request
import urllib.parse
import json

# GETè¯·æ±‚
url = 'https://api.github.com/users/octocat'
req = urllib.request.Request(url)
req.add_header('User-Agent', 'Python-urllib/3.9')

with urllib.request.urlopen(req, timeout=10) as response:
    data = response.read()
    print(f"çŠ¶æ€ç : {response.status}")
    print(f"å“åº”å¤´: {dict(response.headers)}")
    print(f"å“åº”ä½“: {data.decode('utf-8')}")

# POSTè¯·æ±‚
url = 'https://httpbin.org/post'
data = {'key': 'value'}
data_encoded = urllib.parse.urlencode(data).encode('utf-8')

req = urllib.request.Request(url, data=data_encoded, method='POST')
req.add_header('Content-Type', 'application/x-www-form-urlencoded')

with urllib.request.urlopen(req) as response:
    result = json.loads(response.read().decode('utf-8'))
    print(result)
</code></pre>
<h3 id="15-pythonå®ç°ç®€å•httpæœåŠ¡å™¨"><a class="header" href="#15-pythonå®ç°ç®€å•httpæœåŠ¡å™¨">1.5 Pythonå®ç°ç®€å•HTTPæœåŠ¡å™¨</a></h3>
<h4 id="ä½¿ç”¨httpserveræ¨¡å—"><a class="header" href="#ä½¿ç”¨httpserveræ¨¡å—">ä½¿ç”¨http.serveræ¨¡å—</a></h4>
<pre><code class="language-python">from http.server import HTTPServer, BaseHTTPRequestHandler
import json

class SimpleHTTPRequestHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        """å¤„ç†GETè¯·æ±‚"""
        if self.path == '/':
            self.send_response(200)
            self.send_header('Content-Type', 'text/html; charset=utf-8')
            self.end_headers()
            html = '''
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
            &lt;head&gt;&lt;title&gt;ç®€å•HTTPæœåŠ¡å™¨&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt;
                &lt;h1&gt;æ¬¢è¿è®¿é—®ç®€å•HTTPæœåŠ¡å™¨&lt;/h1&gt;
                &lt;p&gt;å½“å‰è·¯å¾„: /&lt;/p&gt;
            &lt;/body&gt;
            &lt;/html&gt;
            '''
            self.wfile.write(html.encode('utf-8'))

        elif self.path == '/api/data':
            self.send_response(200)
            self.send_header('Content-Type', 'application/json')
            self.end_headers()
            data = {'message': 'Hello', 'status': 'success'}
            self.wfile.write(json.dumps(data).encode('utf-8'))

        else:
            self.send_error(404, 'Not Found')

    def do_POST(self):
        """å¤„ç†POSTè¯·æ±‚"""
        content_length = int(self.headers.get('Content-Length', 0))
        post_data = self.rfile.read(content_length)

        try:
            data = json.loads(post_data.decode('utf-8'))
            print(f"æ”¶åˆ°POSTæ•°æ®: {data}")

            self.send_response(200)
            self.send_header('Content-Type', 'application/json')
            self.end_headers()

            response = {
                'status': 'success',
                'received': data
            }
            self.wfile.write(json.dumps(response).encode('utf-8'))
        except Exception as e:
            self.send_error(400, f'Bad Request: {str(e)}')

    def log_message(self, format, *args):
        """è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼"""
        print(f"{self.address_string()} - [{self.log_date_time_string()}] {format % args}")

# å¯åŠ¨æœåŠ¡å™¨
server_address = ('', 8000)
httpd = HTTPServer(server_address, SimpleHTTPRequestHandler)
print(f"HTTPæœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8000")
httpd.serve_forever()
</code></pre>
<h3 id="16-httpsåè®®"><a class="header" href="#16-httpsåè®®">1.6 HTTPSåè®®</a></h3>
<h4 id="httpså·¥ä½œåŸç†"><a class="header" href="#httpså·¥ä½œåŸç†">HTTPSå·¥ä½œåŸç†</a></h4>
<pre><code>HTTPS = HTTP + TLS/SSL

æ¡æ‰‹è¿‡ç¨‹ï¼š
1. å®¢æˆ·ç«¯ -&gt; æœåŠ¡å™¨: Client Hello
   - æ”¯æŒçš„TLSç‰ˆæœ¬
   - æ”¯æŒçš„åŠ å¯†å¥—ä»¶
   - éšæœºæ•°

2. æœåŠ¡å™¨ -&gt; å®¢æˆ·ç«¯: Server Hello
   - é€‰æ‹©çš„TLSç‰ˆæœ¬
   - é€‰æ‹©çš„åŠ å¯†å¥—ä»¶
   - æœåŠ¡å™¨è¯ä¹¦
   - éšæœºæ•°

3. å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦
   - æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
   - éªŒè¯è¯ä¹¦é“¾
   - éªŒè¯åŸŸå

4. å®¢æˆ·ç«¯ç”Ÿæˆé¢„ä¸»å¯†é’¥
   - ä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†
   - å‘é€ç»™æœåŠ¡å™¨

5. åŒæ–¹ç”Ÿæˆä¼šè¯å¯†é’¥
   - ä½¿ç”¨é¢„ä¸»å¯†é’¥å’Œéšæœºæ•°
   - ç”Ÿæˆå¯¹ç§°åŠ å¯†å¯†é’¥

6. å¼€å§‹åŠ å¯†é€šä¿¡
   - ä½¿ç”¨å¯¹ç§°åŠ å¯†ä¼ è¾“æ•°æ®
</code></pre>
<h4 id="python-httpså®¢æˆ·ç«¯"><a class="header" href="#python-httpså®¢æˆ·ç«¯">Python HTTPSå®¢æˆ·ç«¯</a></h4>
<pre><code class="language-python">import requests
import ssl
import urllib.request

# ä½¿ç”¨requestsï¼ˆè‡ªåŠ¨å¤„ç†è¯ä¹¦éªŒè¯ï¼‰
response = requests.get('https://www.google.com')

# å¿½ç•¥SSLè¯ä¹¦éªŒè¯ï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ï¼‰
response = requests.get('https://self-signed.badssl.com/', verify=False)

# æŒ‡å®šCAè¯ä¹¦
response = requests.get('https://example.com', verify='/path/to/ca-bundle.crt')

# å®¢æˆ·ç«¯è¯ä¹¦è®¤è¯
response = requests.get(
    'https://example.com',
    cert=('/path/to/client.crt', '/path/to/client.key')
)

# urllibå®ç°ï¼ˆè‡ªå®šä¹‰SSLä¸Šä¸‹æ–‡ï¼‰
context = ssl.create_default_context()
# context.check_hostname = False  # ä¸éªŒè¯ä¸»æœºå
# context.verify_mode = ssl.CERT_NONE  # ä¸éªŒè¯è¯ä¹¦

with urllib.request.urlopen('https://www.google.com', context=context) as response:
    data = response.read()
</code></pre>
<hr />
<h2 id="ç¬¬äºŒç« dnsåè®®"><a class="header" href="#ç¬¬äºŒç« dnsåè®®">ç¬¬äºŒç« ï¼šDNSåè®®</a></h2>
<h3 id="21-dnsåŸºç¡€"><a class="header" href="#21-dnsåŸºç¡€">2.1 DNSåŸºç¡€</a></h3>
<h4 id="dnsæ¦‚è¿°"><a class="header" href="#dnsæ¦‚è¿°">DNSæ¦‚è¿°</a></h4>
<p><strong>DNS (Domain Name System)</strong> - åŸŸåç³»ç»Ÿ</p>
<pre><code>åŠŸèƒ½ï¼šå°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€

ç¤ºä¾‹ï¼š
  www.example.com -&gt; 93.184.216.34

DNSå±‚æ¬¡ç»“æ„ï¼š
  . (æ ¹åŸŸ)
  â”œâ”€â”€ com (é¡¶çº§åŸŸ)
  â”‚   â”œâ”€â”€ example (äºŒçº§åŸŸ)
  â”‚   â”‚   â””â”€â”€ www (ä¸»æœºå)
  â”œâ”€â”€ org
  â”œâ”€â”€ net
  â””â”€â”€ cn
      â”œâ”€â”€ com
      â””â”€â”€ edu
</code></pre>
<h4 id="dnsè®°å½•ç±»å‹"><a class="header" href="#dnsè®°å½•ç±»å‹">DNSè®°å½•ç±»å‹</a></h4>
<div class="table-wrapper"><table><thead><tr><th>ç±»å‹</th><th>åç§°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody>
<tr><td><strong>A</strong></td><td>Address</td><td>IPv4åœ°å€</td><td>example.com -&gt; 93.184.216.34</td></tr>
<tr><td><strong>AAAA</strong></td><td>IPv6 Address</td><td>IPv6åœ°å€</td><td>example.com -&gt; 2606:2800:220:1:248:1893:25c8:1946</td></tr>
<tr><td><strong>CNAME</strong></td><td>Canonical Name</td><td>åˆ«å</td><td>www.example.com -&gt; example.com</td></tr>
<tr><td><strong>MX</strong></td><td>Mail Exchange</td><td>é‚®ä»¶æœåŠ¡å™¨</td><td>example.com -&gt; mail.example.com</td></tr>
<tr><td><strong>NS</strong></td><td>Name Server</td><td>åŸŸåæœåŠ¡å™¨</td><td>example.com -&gt; ns1.example.com</td></tr>
<tr><td><strong>TXT</strong></td><td>Text</td><td>æ–‡æœ¬ä¿¡æ¯</td><td>ç”¨äºSPFã€DKIMç­‰</td></tr>
<tr><td><strong>SOA</strong></td><td>Start of Authority</td><td>æƒå¨ä¿¡æ¯</td><td>åŸŸç®¡ç†ä¿¡æ¯</td></tr>
<tr><td><strong>PTR</strong></td><td>Pointer</td><td>åå‘è§£æ</td><td>IP -&gt; åŸŸå</td></tr>
<tr><td><strong>SRV</strong></td><td>Service</td><td>æœåŠ¡è®°å½•</td><td>æŒ‡å®šæœåŠ¡ä½ç½®</td></tr>
</tbody></table>
</div>
<h3 id="22-dnsæŸ¥è¯¢è¿‡ç¨‹"><a class="header" href="#22-dnsæŸ¥è¯¢è¿‡ç¨‹">2.2 DNSæŸ¥è¯¢è¿‡ç¨‹</a></h3>
<h4 id="é€’å½’æŸ¥è¯¢æµç¨‹"><a class="header" href="#é€’å½’æŸ¥è¯¢æµç¨‹">é€’å½’æŸ¥è¯¢æµç¨‹</a></h4>
<pre><code>å®¢æˆ·ç«¯æŸ¥è¯¢ www.example.com:

1. å®¢æˆ·ç«¯ -&gt; æœ¬åœ°DNSæœåŠ¡å™¨
   "www.example.comçš„IPæ˜¯ä»€ä¹ˆï¼Ÿ"

2. æœ¬åœ°DNSæ£€æŸ¥ç¼“å­˜
   - å¦‚æœæœ‰ç¼“å­˜ï¼Œç›´æ¥è¿”å›
   - å¦‚æœæ²¡æœ‰ï¼Œå¼€å§‹è¿­ä»£æŸ¥è¯¢

3. æœ¬åœ°DNS -&gt; æ ¹DNSæœåŠ¡å™¨
   "www.example.comçš„IPæ˜¯ä»€ä¹ˆï¼Ÿ"
   æ ¹DNSå›å¤ï¼š"æˆ‘ä¸çŸ¥é“ï¼Œä½†comåŸŸçš„NSæ˜¯..."

4. æœ¬åœ°DNS -&gt; comåŸŸDNSæœåŠ¡å™¨
   "www.example.comçš„IPæ˜¯ä»€ä¹ˆï¼Ÿ"
   com DNSå›å¤ï¼š"æˆ‘ä¸çŸ¥é“ï¼Œä½†example.comçš„NSæ˜¯..."

5. æœ¬åœ°DNS -&gt; example.comåŸŸDNSæœåŠ¡å™¨
   "www.example.comçš„IPæ˜¯ä»€ä¹ˆï¼Ÿ"
   æƒå¨DNSå›å¤ï¼š"93.184.216.34"

6. æœ¬åœ°DNS -&gt; å®¢æˆ·ç«¯
   è¿”å›IPåœ°å€ï¼Œå¹¶ç¼“å­˜ç»“æœ
</code></pre>
<h3 id="23-python-dnsç¼–ç¨‹"><a class="header" href="#23-python-dnsç¼–ç¨‹">2.3 Python DNSç¼–ç¨‹</a></h3>
<h4 id="ä½¿ç”¨socketæ¨¡å—"><a class="header" href="#ä½¿ç”¨socketæ¨¡å—">ä½¿ç”¨socketæ¨¡å—</a></h4>
<pre><code class="language-python">import socket

# åŸŸåè§£æä¸ºIP
hostname = 'www.google.com'
ip_address = socket.gethostbyname(hostname)
print(f"{hostname} -&gt; {ip_address}")

# è·å–æ‰€æœ‰IPåœ°å€
addr_info = socket.getaddrinfo(hostname, None)
for info in addr_info:
    print(f"IP: {info[4][0]}, ç±»å‹: {info[0].name}")

# åå‘DNSæŸ¥è¯¢ï¼ˆIP -&gt; åŸŸåï¼‰
ip = '8.8.8.8'
hostname = socket.gethostbyaddr(ip)
print(f"{ip} -&gt; {hostname[0]}")
</code></pre>
<h4 id="ä½¿ç”¨dnspythonåº“"><a class="header" href="#ä½¿ç”¨dnspythonåº“">ä½¿ç”¨dnspythonåº“</a></h4>
<pre><code class="language-python">import dns.resolver
import dns.reversename

# æŸ¥è¯¢Aè®°å½•
answers = dns.resolver.resolve('www.google.com', 'A')
for rdata in answers:
    print(f"Aè®°å½•: {rdata.address}")

# æŸ¥è¯¢AAAAè®°å½•ï¼ˆIPv6ï¼‰
answers = dns.resolver.resolve('www.google.com', 'AAAA')
for rdata in answers:
    print(f"AAAAè®°å½•: {rdata.address}")

# æŸ¥è¯¢MXè®°å½•
answers = dns.resolver.resolve('gmail.com', 'MX')
for rdata in answers:
    print(f"MXè®°å½•: {rdata.preference} {rdata.exchange}")

# æŸ¥è¯¢NSè®°å½•
answers = dns.resolver.resolve('google.com', 'NS')
for rdata in answers:
    print(f"NSè®°å½•: {rdata.target}")

# æŸ¥è¯¢TXTè®°å½•
answers = dns.resolver.resolve('google.com', 'TXT')
for rdata in answers:
    print(f"TXTè®°å½•: {rdata.strings}")

# åå‘DNSæŸ¥è¯¢
addr = dns.reversename.from_address('8.8.8.8')
answers = dns.resolver.resolve(addr, 'PTR')
for rdata in answers:
    print(f"PTRè®°å½•: {rdata.target}")

# æŒ‡å®šDNSæœåŠ¡å™¨
resolver = dns.resolver.Resolver()
resolver.nameservers = ['8.8.8.8', '8.8.4.4']  # Google DNS
answers = resolver.resolve('example.com', 'A')
</code></pre>
<h3 id="24-dnsç¼“å­˜"><a class="header" href="#24-dnsç¼“å­˜">2.4 DNSç¼“å­˜</a></h3>
<h4 id="æŸ¥çœ‹dnsç¼“å­˜"><a class="header" href="#æŸ¥çœ‹dnsç¼“å­˜">æŸ¥çœ‹DNSç¼“å­˜</a></h4>
<pre><code class="language-bash"># Linux - systemd-resolved
resolvectl statistics

# Windows
ipconfig /displaydns

# æ¸…é™¤DNSç¼“å­˜
# Linux
sudo systemd-resolve --flush-caches
# æˆ–
sudo /etc/init.d/nscd restart

# Windows
ipconfig /flushdns

# macOS
sudo dscacheutil -flushcache
sudo killall -HUP mDNSResponder
</code></pre>
<h4 id="pythonå®ç°ç®€å•dnsç¼“å­˜"><a class="header" href="#pythonå®ç°ç®€å•dnsç¼“å­˜">Pythonå®ç°ç®€å•DNSç¼“å­˜</a></h4>
<pre><code class="language-python">import socket
import time
from functools import lru_cache

class DNSCache:
    def __init__(self, ttl=300):
        self.cache = {}
        self.ttl = ttl

    def resolve(self, hostname):
        """å¸¦ç¼“å­˜çš„DNSè§£æ"""
        current_time = time.time()

        # æ£€æŸ¥ç¼“å­˜
        if hostname in self.cache:
            ip, timestamp = self.cache[hostname]
            if current_time - timestamp &lt; self.ttl:
                print(f"ä»ç¼“å­˜è·å–: {hostname} -&gt; {ip}")
                return ip

        # æ‰§è¡ŒDNSæŸ¥è¯¢
        try:
            ip = socket.gethostbyname(hostname)
            self.cache[hostname] = (ip, current_time)
            print(f"DNSæŸ¥è¯¢: {hostname} -&gt; {ip}")
            return ip
        except socket.gaierror as e:
            print(f"DNSæŸ¥è¯¢å¤±è´¥: {e}")
            return None

    def clear_cache(self):
        """æ¸…é™¤ç¼“å­˜"""
        self.cache.clear()
        print("DNSç¼“å­˜å·²æ¸…é™¤")

# ä½¿ç”¨ç¤ºä¾‹
dns = DNSCache(ttl=60)
print(dns.resolve('www.google.com'))
time.sleep(1)
print(dns.resolve('www.google.com'))  # ä»ç¼“å­˜è·å–
</code></pre>
<hr />
<h2 id="ç¬¬ä¸‰ç« é‚®ä»¶åè®®"><a class="header" href="#ç¬¬ä¸‰ç« é‚®ä»¶åè®®">ç¬¬ä¸‰ç« ï¼šé‚®ä»¶åè®®</a></h2>
<h3 id="31-smtpåè®®å‘é€é‚®ä»¶"><a class="header" href="#31-smtpåè®®å‘é€é‚®ä»¶">3.1 SMTPåè®®ï¼ˆå‘é€é‚®ä»¶ï¼‰</a></h3>
<h4 id="smtpåŸºç¡€"><a class="header" href="#smtpåŸºç¡€">SMTPåŸºç¡€</a></h4>
<p><strong>SMTP (Simple Mail Transfer Protocol)</strong> - ç®€å•é‚®ä»¶ä¼ è¾“åè®®</p>
<pre><code>é»˜è®¤ç«¯å£ï¼š
  25  - æ ‡å‡†SMTPï¼ˆæœªåŠ å¯†ï¼‰
  465 - SMTPSï¼ˆSSLåŠ å¯†ï¼‰
  587 - SMTPï¼ˆSTARTTLSåŠ å¯†ï¼‰

å·¥ä½œæµç¨‹ï¼š
1. è¿æ¥åˆ°SMTPæœåŠ¡å™¨
2. æ¡æ‰‹ï¼ˆEHLO/HELOï¼‰
3. è®¤è¯ï¼ˆAUTHï¼‰
4. å‘é€é‚®ä»¶ï¼ˆMAIL FROM, RCPT TO, DATAï¼‰
5. å…³é—­è¿æ¥ï¼ˆQUITï¼‰
</code></pre>
<h4 id="pythonå‘é€é‚®ä»¶"><a class="header" href="#pythonå‘é€é‚®ä»¶">Pythonå‘é€é‚®ä»¶</a></h4>
<pre><code class="language-python">import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email import encoders

def send_simple_email(smtp_server, smtp_port, username, password,
                     from_addr, to_addr, subject, body):
    """å‘é€ç®€å•æ–‡æœ¬é‚®ä»¶"""
    # åˆ›å»ºæ¶ˆæ¯
    msg = MIMEText(body, 'plain', 'utf-8')
    msg['From'] = from_addr
    msg['To'] = to_addr
    msg['Subject'] = subject

    try:
        # è¿æ¥SMTPæœåŠ¡å™¨
        server = smtplib.SMTP(smtp_server, smtp_port)
        server.starttls()  # å¯ç”¨TLSåŠ å¯†
        server.login(username, password)

        # å‘é€é‚®ä»¶
        server.send_message(msg)
        print("é‚®ä»¶å‘é€æˆåŠŸï¼")
    except Exception as e:
        print(f"é‚®ä»¶å‘é€å¤±è´¥: {e}")
    finally:
        server.quit()

def send_html_email(smtp_server, smtp_port, username, password,
                   from_addr, to_addr, subject, html_body):
    """å‘é€HTMLé‚®ä»¶"""
    msg = MIMEMultipart('alternative')
    msg['From'] = from_addr
    msg['To'] = to_addr
    msg['Subject'] = subject

    # çº¯æ–‡æœ¬éƒ¨åˆ†
    text = "è¯·ä½¿ç”¨æ”¯æŒHTMLçš„é‚®ä»¶å®¢æˆ·ç«¯æŸ¥çœ‹æ­¤é‚®ä»¶"
    part1 = MIMEText(text, 'plain', 'utf-8')

    # HTMLéƒ¨åˆ†
    part2 = MIMEText(html_body, 'html', 'utf-8')

    msg.attach(part1)
    msg.attach(part2)

    try:
        server = smtplib.SMTP(smtp_server, smtp_port)
        server.starttls()
        server.login(username, password)
        server.send_message(msg)
        print("HTMLé‚®ä»¶å‘é€æˆåŠŸï¼")
    except Exception as e:
        print(f"é‚®ä»¶å‘é€å¤±è´¥: {e}")
    finally:
        server.quit()

def send_email_with_attachment(smtp_server, smtp_port, username, password,
                               from_addr, to_addr, subject, body, filename):
    """å‘é€å¸¦é™„ä»¶çš„é‚®ä»¶"""
    msg = MIMEMultipart()
    msg['From'] = from_addr
    msg['To'] = to_addr
    msg['Subject'] = subject

    # é‚®ä»¶æ­£æ–‡
    msg.attach(MIMEText(body, 'plain', 'utf-8'))

    # é™„ä»¶
    try:
        with open(filename, 'rb') as f:
            part = MIMEBase('application', 'octet-stream')
            part.set_payload(f.read())
            encoders.encode_base64(part)
            part.add_header(
                'Content-Disposition',
                f'attachment; filename= {filename}'
            )
            msg.attach(part)
    except FileNotFoundError:
        print(f"æ–‡ä»¶ {filename} ä¸å­˜åœ¨")
        return

    try:
        server = smtplib.SMTP(smtp_server, smtp_port)
        server.starttls()
        server.login(username, password)
        server.send_message(msg)
        print("å¸¦é™„ä»¶çš„é‚®ä»¶å‘é€æˆåŠŸï¼")
    except Exception as e:
        print(f"é‚®ä»¶å‘é€å¤±è´¥: {e}")
    finally:
        server.quit()

# ä½¿ç”¨ç¤ºä¾‹
smtp_config = {
    'smtp_server': 'smtp.gmail.com',
    'smtp_port': 587,
    'username': 'your-email@gmail.com',
    'password': 'your-app-password'
}

# å‘é€ç®€å•é‚®ä»¶
send_simple_email(
    **smtp_config,
    from_addr='your-email@gmail.com',
    to_addr='recipient@example.com',
    subject='æµ‹è¯•é‚®ä»¶',
    body='è¿™æ˜¯ä¸€å°æµ‹è¯•é‚®ä»¶'
)
</code></pre>
<h3 id="32-pop3åè®®æ¥æ”¶é‚®ä»¶"><a class="header" href="#32-pop3åè®®æ¥æ”¶é‚®ä»¶">3.2 POP3åè®®ï¼ˆæ¥æ”¶é‚®ä»¶ï¼‰</a></h3>
<h4 id="pop3åŸºç¡€"><a class="header" href="#pop3åŸºç¡€">POP3åŸºç¡€</a></h4>
<p><strong>POP3 (Post Office Protocol version 3)</strong> - é‚®å±€åè®®ç¬¬3ç‰ˆ</p>
<pre><code>é»˜è®¤ç«¯å£ï¼š
  110 - POP3ï¼ˆæœªåŠ å¯†ï¼‰
  995 - POP3Sï¼ˆSSLåŠ å¯†ï¼‰

ç‰¹ç‚¹ï¼š
  - ä¸‹è½½åä»æœåŠ¡å™¨åˆ é™¤ï¼ˆå¯é€‰ï¼‰
  - ä¸æ”¯æŒæ–‡ä»¶å¤¹
  - é€‚åˆå•è®¾å¤‡ä½¿ç”¨
</code></pre>
<h4 id="pythonæ¥æ”¶é‚®ä»¶pop3"><a class="header" href="#pythonæ¥æ”¶é‚®ä»¶pop3">Pythonæ¥æ”¶é‚®ä»¶ï¼ˆPOP3ï¼‰</a></h4>
<pre><code class="language-python">import poplib
from email.parser import BytesParser
from email.policy import default

def receive_emails_pop3(pop_server, pop_port, username, password, use_ssl=True):
    """ä½¿ç”¨POP3æ¥æ”¶é‚®ä»¶"""
    try:
        # è¿æ¥åˆ°POP3æœåŠ¡å™¨
        if use_ssl:
            server = poplib.POP3_SSL(pop_server, pop_port)
        else:
            server = poplib.POP3(pop_server, pop_port)

        print(f"è¿æ¥åˆ° {pop_server}:{pop_port}")

        # ç™»å½•
        server.user(username)
        server.pass_(password)

        # è·å–é‚®ä»¶æ•°é‡
        num_messages = len(server.list()[1])
        print(f"é‚®ç®±ä¸­æœ‰ {num_messages} å°é‚®ä»¶")

        # è¯»å–æœ€æ–°çš„5å°é‚®ä»¶
        for i in range(max(1, num_messages - 4), num_messages + 1):
            # è·å–é‚®ä»¶
            response, lines, octets = server.retr(i)

            # è§£æé‚®ä»¶
            msg_data = b'\r\n'.join(lines)
            msg = BytesParser(policy=default).parsebytes(msg_data)

            # æ˜¾ç¤ºé‚®ä»¶ä¿¡æ¯
            print(f"\né‚®ä»¶ #{i}:")
            print(f"ä¸»é¢˜: {msg['subject']}")
            print(f"å‘ä»¶äºº: {msg['from']}")
            print(f"æ”¶ä»¶äºº: {msg['to']}")
            print(f"æ—¥æœŸ: {msg['date']}")

            # è·å–é‚®ä»¶æ­£æ–‡
            if msg.is_multipart():
                for part in msg.walk():
                    content_type = part.get_content_type()
                    if content_type == 'text/plain':
                        body = part.get_payload(decode=True).decode('utf-8', errors='ignore')
                        print(f"æ­£æ–‡ï¼ˆå‰100å­—ç¬¦ï¼‰: {body[:100]}...")
                        break
            else:
                body = msg.get_payload(decode=True).decode('utf-8', errors='ignore')
                print(f"æ­£æ–‡ï¼ˆå‰100å­—ç¬¦ï¼‰: {body[:100]}...")

            # å¯é€‰ï¼šåˆ é™¤é‚®ä»¶
            # server.dele(i)

        # å…³é—­è¿æ¥
        server.quit()

    except Exception as e:
        print(f"æ¥æ”¶é‚®ä»¶å¤±è´¥: {e}")

# ä½¿ç”¨ç¤ºä¾‹
receive_emails_pop3(
    pop_server='pop.gmail.com',
    pop_port=995,
    username='your-email@gmail.com',
    password='your-app-password',
    use_ssl=True
)
</code></pre>
<h3 id="33-imapåè®®é«˜çº§é‚®ä»¶è®¿é—®"><a class="header" href="#33-imapåè®®é«˜çº§é‚®ä»¶è®¿é—®">3.3 IMAPåè®®ï¼ˆé«˜çº§é‚®ä»¶è®¿é—®ï¼‰</a></h3>
<h4 id="imapåŸºç¡€"><a class="header" href="#imapåŸºç¡€">IMAPåŸºç¡€</a></h4>
<p><strong>IMAP (Internet Message Access Protocol)</strong> - äº’è”ç½‘æ¶ˆæ¯è®¿é—®åè®®</p>
<pre><code>é»˜è®¤ç«¯å£ï¼š
  143 - IMAPï¼ˆæœªåŠ å¯†ï¼‰
  993 - IMAPSï¼ˆSSLåŠ å¯†ï¼‰

ç‰¹ç‚¹ï¼š
  - é‚®ä»¶ä¿ç•™åœ¨æœåŠ¡å™¨
  - æ”¯æŒæ–‡ä»¶å¤¹å’Œæ ‡ç­¾
  - é€‚åˆå¤šè®¾å¤‡åŒæ­¥
  - å¯ä»¥åªä¸‹è½½é‚®ä»¶å¤´éƒ¨
</code></pre>
<h4 id="pythonä½¿ç”¨imap"><a class="header" href="#pythonä½¿ç”¨imap">Pythonä½¿ç”¨IMAP</a></h4>
<pre><code class="language-python">import imaplib
import email
from email.header import decode_header

def receive_emails_imap(imap_server, imap_port, username, password, mailbox='INBOX'):
    """ä½¿ç”¨IMAPæ¥æ”¶é‚®ä»¶"""
    try:
        # è¿æ¥åˆ°IMAPæœåŠ¡å™¨
        server = imaplib.IMAP4_SSL(imap_server, imap_port)
        print(f"è¿æ¥åˆ° {imap_server}:{imap_port}")

        # ç™»å½•
        server.login(username, password)
        print("ç™»å½•æˆåŠŸ")

        # åˆ—å‡ºæ‰€æœ‰é‚®ç®±
        status, mailboxes = server.list()
        print("\nå¯ç”¨é‚®ç®±:")
        for mailbox_data in mailboxes:
            print(mailbox_data.decode())

        # é€‰æ‹©é‚®ç®±
        status, messages = server.select(mailbox)
        total_emails = int(messages[0])
        print(f"\n{mailbox} é‚®ç®±ä¸­æœ‰ {total_emails} å°é‚®ä»¶")

        # æœç´¢é‚®ä»¶
        # æœç´¢æ‰€æœ‰é‚®ä»¶
        status, message_ids = server.search(None, 'ALL')

        # æœç´¢æœªè¯»é‚®ä»¶
        # status, message_ids = server.search(None, 'UNSEEN')

        # æœç´¢ç‰¹å®šå‘ä»¶äºº
        # status, message_ids = server.search(None, 'FROM', '"sender@example.com"')

        # æœç´¢åŒ…å«ç‰¹å®šä¸»é¢˜
        # status, message_ids = server.search(None, 'SUBJECT', '"é‡è¦"')

        email_ids = message_ids[0].split()

        # è¯»å–æœ€æ–°5å°é‚®ä»¶
        for email_id in email_ids[-5:]:
            # è·å–é‚®ä»¶
            status, msg_data = server.fetch(email_id, '(RFC822)')

            # è§£æé‚®ä»¶
            raw_email = msg_data[0][1]
            msg = email.message_from_bytes(raw_email)

            # è§£ç ä¸»é¢˜
            subject, encoding = decode_header(msg['Subject'])[0]
            if isinstance(subject, bytes):
                subject = subject.decode(encoding if encoding else 'utf-8')

            # è§£ç å‘ä»¶äºº
            from_header = msg.get('From')
            from_name, from_addr = email.utils.parseaddr(from_header)

            print(f"\né‚®ä»¶ID: {email_id.decode()}")
            print(f"ä¸»é¢˜: {subject}")
            print(f"å‘ä»¶äºº: {from_name} &lt;{from_addr}&gt;")
            print(f"æ—¥æœŸ: {msg.get('Date')}")

            # è·å–é‚®ä»¶æ­£æ–‡
            if msg.is_multipart():
                for part in msg.walk():
                    content_type = part.get_content_type()
                    content_disposition = str(part.get("Content-Disposition"))

                    if content_type == "text/plain" and "attachment" not in content_disposition:
                        body = part.get_payload(decode=True)
                        charset = part.get_content_charset() or 'utf-8'
                        print(f"æ­£æ–‡: {body.decode(charset, errors='ignore')[:100]}...")
                        break
            else:
                body = msg.get_payload(decode=True)
                charset = msg.get_content_charset() or 'utf-8'
                print(f"æ­£æ–‡: {body.decode(charset, errors='ignore')[:100]}...")

            # æ ‡è®°ä¸ºå·²è¯»
            # server.store(email_id, '+FLAGS', '\\Seen')

            # åˆ é™¤é‚®ä»¶
            # server.store(email_id, '+FLAGS', '\\Deleted')

        # æ°¸ä¹…åˆ é™¤æ ‡è®°ä¸ºåˆ é™¤çš„é‚®ä»¶
        # server.expunge()

        # å…³é—­é‚®ç®±
        server.close()
        server.logout()

    except Exception as e:
        print(f"æ¥æ”¶é‚®ä»¶å¤±è´¥: {e}")

# ä½¿ç”¨ç¤ºä¾‹
receive_emails_imap(
    imap_server='imap.gmail.com',
    imap_port=993,
    username='your-email@gmail.com',
    password='your-app-password',
    mailbox='INBOX'
)
</code></pre>
<hr />
<p><em>ï¼ˆç»­ä¸‹ä¸€éƒ¨åˆ†ï¼šFTPã€WebSocketã€SSHåè®®ï¼‰</em></p>
<hr />
<p><strong>è¿”å›</strong>: <a href="tcpip.html">TCP/IPåè®®å­¦ä¹ ç¬”è®°ä¸»æ–‡æ¡£</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ç¼–ç¨‹/network/tcpip-programming.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ç¼–ç¨‹/network/tcpip-security.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ç¼–ç¨‹/network/tcpip-programming.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ç¼–ç¨‹/network/tcpip-security.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

