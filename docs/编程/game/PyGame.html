<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Pygame 游戏开发学习笔记 - 开发</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">开发</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="搜索本书内容..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="pygame-游戏开发学习笔记"><a class="header" href="#pygame-游戏开发学习笔记">Pygame 游戏开发学习笔记</a></h1>
<h2 id="学习者角色定位"><a class="header" href="#学习者角色定位">学习者角色定位</a></h2>
<ul>
<li><strong>目标群体</strong>: Python初学者、游戏开发入门者、教育工作者、独立游戏开发者</li>
<li><strong>前置知识</strong>: Python基础语法、基本编程概念</li>
<li><strong>学习目标</strong>: 掌握Pygame核心API，能够独立开发2D游戏和交互应用</li>
</ul>
<h2 id="技术概述"><a class="header" href="#技术概述">技术概述</a></h2>
<h3 id="pygame是什么"><a class="header" href="#pygame是什么">Pygame是什么</a></h3>
<p>Pygame是基于SDL（Simple DirectMedia Layer）的Python游戏开发库，专注于2D游戏和多媒体应用开发。它简单易学，是Python游戏开发的首选框架。</p>
<h3 id="核心特性"><a class="header" href="#核心特性">核心特性</a></h3>
<ul>
<li><strong>简单易用</strong>: API设计直观，适合初学者</li>
<li><strong>跨平台</strong>: 支持Windows、Linux、macOS、Android</li>
<li><strong>完整功能</strong>: 图形渲染、音频播放、输入处理、碰撞检测</li>
<li><strong>开源免费</strong>: LGPL许可证，完全免费</li>
<li><strong>活跃社区</strong>: 大量教程、示例和第三方库</li>
</ul>
<h3 id="适用场景"><a class="header" href="#适用场景">适用场景</a></h3>
<ul>
<li>2D休闲游戏开发</li>
<li>游戏编程学习</li>
<li>快速原型开发</li>
<li>教育项目</li>
<li>数据可视化</li>
</ul>
<hr />
<h2 id="模块一环境搭建与基础概念"><a class="header" href="#模块一环境搭建与基础概念">模块一：环境搭建与基础概念</a></h2>
<h3 id="11-安装与配置"><a class="header" href="#11-安装与配置">1.1 安装与配置</a></h3>
<h4 id="安装pygame"><a class="header" href="#安装pygame">安装Pygame</a></h4>
<pre><code class="language-bash"># 使用pip安装（推荐）
pip install pygame

# 验证安装
python -c "import pygame; print(pygame.ver)"

# 升级到最新版本
pip install --upgrade pygame
</code></pre>
<h4 id="开发环境推荐"><a class="header" href="#开发环境推荐">开发环境推荐</a></h4>
<ul>
<li><strong>IDE</strong>: VS Code + Python扩展、PyCharm、Thonny</li>
<li><strong>图像编辑</strong>: GIMP、Aseprite（像素画）、Photoshop</li>
<li><strong>音频编辑</strong>: Audacity、Bfxr（音效生成）</li>
</ul>
<h3 id="12-第一个pygame程序"><a class="header" href="#12-第一个pygame程序">1.2 第一个Pygame程序</a></h3>
<h4 id="最小示例显示窗口"><a class="header" href="#最小示例显示窗口">最小示例：显示窗口</a></h4>
<pre><code class="language-python">import pygame
import sys

# 初始化Pygame
pygame.init()

# 创建窗口
screen = pygame.display.set_mode((800, 600))
pygame.display.set_caption("我的第一个Pygame程序")

# 游戏主循环
running = True
while running:
    # 事件处理
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # 填充背景色（RGB）
    screen.fill((0, 128, 255))  # 天蓝色

    # 更新显示
    pygame.display.flip()

# 退出
pygame.quit()
sys.exit()
</code></pre>
<p><strong>代码解析</strong>:</p>
<ol>
<li><code>pygame.init()</code>: 初始化所有Pygame模块</li>
<li><code>set_mode()</code>: 创建显示窗口</li>
<li><code>event.get()</code>: 获取事件队列</li>
<li><code>fill()</code>: 填充背景色</li>
<li><code>flip()</code>: 更新整个屏幕</li>
</ol>
<h3 id="13-核心概念"><a class="header" href="#13-核心概念">1.3 核心概念</a></h3>
<h4 id="游戏循环game-loop"><a class="header" href="#游戏循环game-loop">游戏循环（Game Loop）</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()  # 帧率控制

running = True
while running:
    # 1. 事件处理
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # 2. 游戏逻辑更新
    # 更新角色位置、碰撞检测等

    # 3. 渲染绘制
    screen.fill((0, 0, 0))
    # 绘制游戏对象

    # 4. 刷新显示
    pygame.display.flip()

    # 5. 帧率控制（60 FPS）
    clock.tick(60)

pygame.quit()
</code></pre>
<h4 id="坐标系统"><a class="header" href="#坐标系统">坐标系统</a></h4>
<pre><code class="language-python"># Pygame坐标系：左上角为原点(0,0)
# X轴：向右增加
# Y轴：向下增加

# 示例：绘制矩形
# (x, y, width, height)
rect = pygame.Rect(100, 50, 200, 100)

# 常用位置属性
rect.x, rect.y              # 左上角坐标
rect.centerx, rect.centery  # 中心点坐标
rect.top, rect.bottom       # 上下边界
rect.left, rect.right       # 左右边界
</code></pre>
<h3 id="14-实战案例彩色球弹跳"><a class="header" href="#14-实战案例彩色球弹跳">1.4 实战案例：彩色球弹跳</a></h3>
<pre><code class="language-python">import pygame
import random

# 初始化
pygame.init()
WIDTH, HEIGHT = 800, 600
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("彩色球弹跳")
clock = pygame.time.Clock()

# 球的属性
class Ball:
    def __init__(self):
        self.radius = 20
        self.x = random.randint(self.radius, WIDTH - self.radius)
        self.y = random.randint(self.radius, HEIGHT - self.radius)
        self.vx = random.choice([-3, -2, 2, 3])
        self.vy = random.choice([-3, -2, 2, 3])
        self.color = (
            random.randint(50, 255),
            random.randint(50, 255),
            random.randint(50, 255)
        )

    def update(self):
        # 更新位置
        self.x += self.vx
        self.y += self.vy

        # 边界碰撞检测
        if self.x - self.radius &lt;= 0 or self.x + self.radius &gt;= WIDTH:
            self.vx = -self.vx
        if self.y - self.radius &lt;= 0 or self.y + self.radius &gt;= HEIGHT:
            self.vy = -self.vy

    def draw(self, surface):
        pygame.draw.circle(surface, self.color, (int(self.x), int(self.y)), self.radius)

# 创建多个球
balls = [Ball() for _ in range(10)]

# 游戏主循环
running = True
while running:
    # 事件处理
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_SPACE:
                # 空格键添加新球
                balls.append(Ball())

    # 更新
    for ball in balls:
        ball.update()

    # 绘制
    screen.fill((20, 20, 40))  # 深蓝背景
    for ball in balls:
        ball.draw(screen)

    # 显示球数量
    font = pygame.font.Font(None, 36)
    text = font.render(f'Balls: {len(balls)}', True, (255, 255, 255))
    screen.blit(text, (10, 10))

    pygame.display.flip()
    clock.tick(60)

pygame.quit()
</code></pre>
<hr />
<h2 id="模块二图形绘制与资源加载"><a class="header" href="#模块二图形绘制与资源加载">模块二：图形绘制与资源加载</a></h2>
<h3 id="21-基础图形绘制"><a class="header" href="#21-基础图形绘制">2.1 基础图形绘制</a></h3>
<h4 id="常用绘制函数"><a class="header" href="#常用绘制函数">常用绘制函数</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))

# 颜色定义（RGB）
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)

screen.fill(WHITE)

# 1. 绘制直线
pygame.draw.line(screen, BLACK, (100, 100), (300, 100), 5)

# 2. 绘制矩形
rect = pygame.Rect(100, 150, 200, 100)
pygame.draw.rect(screen, RED, rect, 3)  # 3像素边框

# 绘制填充矩形
pygame.draw.rect(screen, BLUE, (400, 150, 200, 100))

# 3. 绘制圆形
pygame.draw.circle(screen, GREEN, (200, 400), 50)

# 4. 绘制椭圆
pygame.draw.ellipse(screen, RED, (400, 350, 150, 100))

# 5. 绘制多边形
points = [(100, 500), (150, 450), (200, 500), (150, 550)]
pygame.draw.polygon(screen, BLUE, points)

pygame.display.flip()
</code></pre>
<h3 id="22-图像加载与处理"><a class="header" href="#22-图像加载与处理">2.2 图像加载与处理</a></h3>
<h4 id="加载与显示图像"><a class="header" href="#加载与显示图像">加载与显示图像</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))

# 加载图像
try:
    image = pygame.image.load('assets/player.png')
    # 转换图像格式以提高性能
    image = image.convert_alpha()  # 带透明通道
except pygame.error as e:
    print(f"无法加载图像: {e}")

# 获取图像矩形
image_rect = image.get_rect()
image_rect.center = (400, 300)

# 游戏循环
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    screen.fill((255, 255, 255))
    screen.blit(image, image_rect)
    pygame.display.flip()

pygame.quit()
</code></pre>
<h4 id="图像变换"><a class="header" href="#图像变换">图像变换</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))
original_image = pygame.image.load('assets/sprite.png').convert_alpha()

# 1. 缩放
scaled_image = pygame.transform.scale(original_image, (100, 100))

# 平滑缩放（质量更好，速度较慢）
scaled_smooth = pygame.transform.smoothscale(original_image, (100, 100))

# 2. 旋转（逆时针角度）
rotated_image = pygame.transform.rotate(original_image, 45)

# 3. 翻转
flipped_h = pygame.transform.flip(original_image, True, False)  # 水平翻转
flipped_v = pygame.transform.flip(original_image, False, True)  # 垂直翻转
</code></pre>
<h3 id="23-精灵sprite系统"><a class="header" href="#23-精灵sprite系统">2.3 精灵（Sprite）系统</a></h3>
<h4 id="基础精灵使用"><a class="header" href="#基础精灵使用">基础精灵使用</a></h4>
<pre><code class="language-python">import pygame

class Player(pygame.sprite.Sprite):
    def __init__(self, x, y):
        super().__init__()

        # 加载图像
        self.image = pygame.Surface((50, 50))
        self.image.fill((0, 128, 255))

        # 获取矩形
        self.rect = self.image.get_rect()
        self.rect.x = x
        self.rect.y = y

        # 速度
        self.vx = 0
        self.vy = 0

    def update(self):
        # 更新位置
        self.rect.x += self.vx
        self.rect.y += self.vy

        # 边界限制
        if self.rect.left &lt; 0:
            self.rect.left = 0
        if self.rect.right &gt; 800:
            self.rect.right = 800

# 初始化
pygame.init()
screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()

# 创建精灵组
all_sprites = pygame.sprite.Group()

# 创建玩家
player = Player(400, 300)
all_sprites.add(player)

# 游戏循环
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                player.vx = -5
            elif event.key == pygame.K_RIGHT:
                player.vx = 5

    # 更新所有精灵
    all_sprites.update()

    # 绘制
    screen.fill((255, 255, 255))
    all_sprites.draw(screen)

    pygame.display.flip()
    clock.tick(60)

pygame.quit()
</code></pre>
<hr />
<h2 id="模块三输入处理与事件系统"><a class="header" href="#模块三输入处理与事件系统">模块三：输入处理与事件系统</a></h2>
<h3 id="31-键盘输入"><a class="header" href="#31-键盘输入">3.1 键盘输入</a></h3>
<h4 id="事件驱动输入"><a class="header" href="#事件驱动输入">事件驱动输入</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

        # 按键按下
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_SPACE:
                print("空格键按下")
            elif event.key == pygame.K_RETURN:
                print("回车键按下")
            elif event.key == pygame.K_ESCAPE:
                running = False

        # 按键释放
        elif event.type == pygame.KEYUP:
            if event.key == pygame.K_SPACE:
                print("空格键释放")

    screen.fill((0, 0, 0))
    pygame.display.flip()

pygame.quit()
</code></pre>
<h4 id="状态检测输入"><a class="header" href="#状态检测输入">状态检测输入</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()

# 角色位置
x, y = 400, 300
speed = 5

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # 获取所有按键状态
    keys = pygame.key.get_pressed()

    # 根据按键状态移动
    if keys[pygame.K_LEFT] or keys[pygame.K_a]:
        x -= speed
    if keys[pygame.K_RIGHT] or keys[pygame.K_d]:
        x += speed
    if keys[pygame.K_UP] or keys[pygame.K_w]:
        y -= speed
    if keys[pygame.K_DOWN] or keys[pygame.K_s]:
        y += speed

    # 绘制
    screen.fill((0, 0, 0))
    pygame.draw.circle(screen, (255, 255, 255), (int(x), int(y)), 20)

    pygame.display.flip()
    clock.tick(60)

pygame.quit()
</code></pre>
<h3 id="32-鼠标输入"><a class="header" href="#32-鼠标输入">3.2 鼠标输入</a></h3>
<h4 id="鼠标事件处理"><a class="header" href="#鼠标事件处理">鼠标事件处理</a></h4>
<pre><code class="language-python">import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))

# 存储点击位置
clicks = []

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

        # 鼠标按下
        elif event.type == pygame.MOUSEBUTTONDOWN:
            if event.button == 1:  # 左键
                clicks.append(event.pos)
                print(f"左键点击: {event.pos}")
            elif event.button == 3:  # 右键
                clicks.clear()
                print("右键清空")

    # 绘制
    screen.fill((255, 255, 255))
    for pos in clicks:
        pygame.draw.circle(screen, (255, 0, 0), pos, 10)

    pygame.display.flip()

pygame.quit()
</code></pre>
<hr />
<h2 id="模块四完整游戏项目"><a class="header" href="#模块四完整游戏项目">模块四：完整游戏项目</a></h2>
<h3 id="41-贪吃蛇游戏"><a class="header" href="#41-贪吃蛇游戏">4.1 贪吃蛇游戏</a></h3>
<pre><code class="language-python">import pygame
import random

# 初始化
pygame.init()

# 常量
GRID_SIZE = 20
GRID_WIDTH = 30
GRID_HEIGHT = 20
WINDOW_WIDTH = GRID_SIZE * GRID_WIDTH
WINDOW_HEIGHT = GRID_SIZE * GRID_HEIGHT

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
GREEN = (0, 255, 0)
RED = (255, 0, 0)

# 方向
UP = (0, -1)
DOWN = (0, 1)
LEFT = (-1, 0)
RIGHT = (1, 0)

class Snake:
    def __init__(self):
        self.positions = [(GRID_WIDTH // 2, GRID_HEIGHT // 2)]
        self.direction = RIGHT
        self.grow = False

    def move(self):
        head_x, head_y = self.positions[0]
        dx, dy = self.direction
        new_head = ((head_x + dx) % GRID_WIDTH, (head_y + dy) % GRID_HEIGHT)

        if not self.grow and new_head in self.positions:
            return False  # 撞到自己

        self.positions.insert(0, new_head)

        if not self.grow:
            self.positions.pop()
        else:
            self.grow = False

        return True

    def change_direction(self, new_direction):
        # 防止反向移动
        if (new_direction[0] * -1, new_direction[1] * -1) != self.direction:
            self.direction = new_direction

    def eat(self):
        self.grow = True

    def draw(self, screen):
        for i, pos in enumerate(self.positions):
            rect = pygame.Rect(pos[0] * GRID_SIZE, pos[1] * GRID_SIZE,
                               GRID_SIZE, GRID_SIZE)
            color = GREEN if i == 0 else (0, 200, 0)
            pygame.draw.rect(screen, color, rect)
            pygame.draw.rect(screen, BLACK, rect, 1)

class Food:
    def __init__(self):
        self.position = (0, 0)
        self.randomize()

    def randomize(self):
        self.position = (random.randint(0, GRID_WIDTH - 1),
                         random.randint(0, GRID_HEIGHT - 1))

    def draw(self, screen):
        rect = pygame.Rect(self.position[0] * GRID_SIZE,
                           self.position[1] * GRID_SIZE,
                           GRID_SIZE, GRID_SIZE)
        pygame.draw.rect(screen, RED, rect)

# 创建窗口
screen = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("贪吃蛇")
clock = pygame.time.Clock()

# 创建游戏对象
snake = Snake()
food = Food()
score = 0
font = pygame.font.Font(None, 36)

# 游戏速度
move_timer = 0
move_delay = 150  # 毫秒

running = True
game_over = False

while running:
    dt = clock.tick(60)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

        elif event.type == pygame.KEYDOWN and not game_over:
            if event.key == pygame.K_UP or event.key == pygame.K_w:
                snake.change_direction(UP)
            elif event.key == pygame.K_DOWN or event.key == pygame.K_s:
                snake.change_direction(DOWN)
            elif event.key == pygame.K_LEFT or event.key == pygame.K_a:
                snake.change_direction(LEFT)
            elif event.key == pygame.K_RIGHT or event.key == pygame.K_d:
                snake.change_direction(RIGHT)

        elif event.type == pygame.KEYDOWN and game_over:
            if event.key == pygame.K_SPACE:
                # 重新开始
                snake = Snake()
                food = Food()
                score = 0
                game_over = False

    if not game_over:
        # 移动蛇
        move_timer += dt
        if move_timer &gt;= move_delay:
            move_timer = 0

            if not snake.move():
                game_over = True

            # 检测吃食物
            if snake.positions[0] == food.position:
                snake.eat()
                food.randomize()
                # 确保食物不在蛇身上
                while food.position in snake.positions:
                    food.randomize()
                score += 10

    # 绘制
    screen.fill(BLACK)

    if not game_over:
        snake.draw(screen)
        food.draw(screen)

        # 显示分数
        score_text = font.render(f'Score: {score}', True, WHITE)
        screen.blit(score_text, (10, 10))
    else:
        # 游戏结束画面
        game_over_text = font.render('GAME OVER', True, WHITE)
        score_text = font.render(f'Score: {score}', True, WHITE)
        restart_text = font.render('Press SPACE to restart', True, WHITE)

        screen.blit(game_over_text, (WINDOW_WIDTH//2 - 100, WINDOW_HEIGHT//2 - 50))
        screen.blit(score_text, (WINDOW_WIDTH//2 - 80, WINDOW_HEIGHT//2))
        screen.blit(restart_text, (WINDOW_WIDTH//2 - 180, WINDOW_HEIGHT//2 + 50))

    pygame.display.flip()

pygame.quit()
</code></pre>
<hr />
<h2 id="学习效果验证标准"><a class="header" href="#学习效果验证标准">学习效果验证标准</a></h2>
<h3 id="1-基础能力必须掌握"><a class="header" href="#1-基础能力必须掌握">1. 基础能力（必须掌握）</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
能够创建Pygame窗口和游戏循环</li>
<li><input disabled="" type="checkbox"/>
理解Surface和Rect的概念</li>
<li><input disabled="" type="checkbox"/>
掌握基本图形绘制</li>
<li><input disabled="" type="checkbox"/>
能够加载和显示图像</li>
<li><input disabled="" type="checkbox"/>
实现帧率控制</li>
</ul>
<h3 id="2-交互能力必须掌握"><a class="header" href="#2-交互能力必须掌握">2. 交互能力（必须掌握）</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
处理键盘事件（按下、释放、状态检测）</li>
<li><input disabled="" type="checkbox"/>
处理鼠标事件（点击、移动、拖拽）</li>
<li><input disabled="" type="checkbox"/>
使用精灵系统管理游戏对象</li>
<li><input disabled="" type="checkbox"/>
实现基础碰撞检测</li>
</ul>
<h3 id="3-项目能力高级要求"><a class="header" href="#3-项目能力高级要求">3. 项目能力（高级要求）</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
独立开发完整的小游戏（如贪吃蛇、打砖块）</li>
<li><input disabled="" type="checkbox"/>
实现游戏状态管理（菜单、游戏、暂停、结束）</li>
<li><input disabled="" type="checkbox"/>
添加计分和关卡系统</li>
</ul>
<h3 id="4-综合项目验证"><a class="header" href="#4-综合项目验证">4. 综合项目验证</a></h3>
<p>选择以下任一项目完成：</p>
<ul>
<li><input disabled="" type="checkbox"/>
贪吃蛇（难度：★★☆☆☆）</li>
<li><input disabled="" type="checkbox"/>
打砖块（难度：★★★☆☆）</li>
<li><input disabled="" type="checkbox"/>
飞机大战（难度：★★★☆☆）</li>
<li><input disabled="" type="checkbox"/>
平台跳跃游戏（难度：★★★★☆）</li>
</ul>
<hr />
<h2 id="进阶学习路径"><a class="header" href="#进阶学习路径">进阶学习路径</a></h2>
<h3 id="阶段一进阶技术1-2月"><a class="header" href="#阶段一进阶技术1-2月">阶段一：进阶技术（1-2月）</a></h3>
<ol>
<li>
<p><strong>高级渲染技术</strong></p>
<ul>
<li>精灵动画系统</li>
<li>粒子效果</li>
<li>视差滚动背景</li>
<li>摄像机系统</li>
</ul>
</li>
<li>
<p><strong>AI与路径查找</strong></p>
<ul>
<li>简单AI行为</li>
<li>A*寻路算法</li>
<li>状态机实现</li>
</ul>
</li>
</ol>
<h3 id="阶段二完整项目2-3月"><a class="header" href="#阶段二完整项目2-3月">阶段二：完整项目（2-3月）</a></h3>
<ol>
<li>
<p><strong>关卡编辑器</strong></p>
<ul>
<li>使用Tiled创建地图</li>
<li>pytmx库加载瓦片地图</li>
<li>自定义关卡格式</li>
</ul>
</li>
<li>
<p><strong>数据持久化</strong></p>
<ul>
<li>使用JSON保存游戏数据</li>
<li>成就系统</li>
<li>排行榜</li>
</ul>
</li>
</ol>
<hr />
<h2 id="扩展资源"><a class="header" href="#扩展资源">扩展资源</a></h2>
<h3 id="官方资源"><a class="header" href="#官方资源">官方资源</a></h3>
<ul>
<li><strong>官方文档</strong>: https://www.pygame.org/docs/</li>
<li><strong>官方教程</strong>: https://www.pygame.org/wiki/tutorials</li>
<li><strong>示例代码</strong>: https://www.pygame.org/docs/ref/examples.html</li>
</ul>
<h3 id="学习网站"><a class="header" href="#学习网站">学习网站</a></h3>
<ul>
<li><strong>Pygame Zero</strong>: 简化版Pygame，适合初学者</li>
<li><strong>Real Python Pygame教程</strong>: https://realpython.com/pygame-a-primer/</li>
</ul>
<h3 id="资源工具"><a class="header" href="#资源工具">资源工具</a></h3>
<ul>
<li><strong>OpenGameArt</strong>: 免费游戏素材</li>
<li><strong>itch.io</strong>: 免费/付费素材和工具</li>
<li><strong>Aseprite</strong>: 像素画编辑器</li>
<li><strong>Bfxr</strong>: 8-bit音效生成器</li>
</ul>
<hr />
<h2 id="总结"><a class="header" href="#总结">总结</a></h2>
<p>Pygame是Python游戏开发的经典选择，特别适合：</p>
<ul>
<li>编程初学者学习游戏开发</li>
<li>快速原型开发和概念验证</li>
<li>教育项目和编程教学</li>
<li>2D休闲游戏开发</li>
</ul>
<p>通过系统学习本笔记的核心模块，从基础概念到完整项目实战，你将掌握使用Pygame开发2D游戏的核心技能。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../编程/game/Panda3D.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../编程/game/自制C++游戏引擎.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../编程/game/Panda3D.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../编程/game/自制C++游戏引擎.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

