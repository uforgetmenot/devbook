<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Eigen 技术笔记 - 开发</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">开发</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="搜索本书内容..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="eigen-技术笔记"><a class="header" href="#eigen-技术笔记">Eigen 技术笔记</a></h1>
<h2 id="概述"><a class="header" href="#概述">概述</a></h2>
<p>Eigen是一个高性能的C++模板库，专门用于线性代数运算，包括矩阵、向量操作、数值求解器和相关算法。它被广泛应用于科学计算、机器学习、计算机视觉、机器人学等领域，以其高效的性能和简洁的API而著称。</p>
<h2 id="核心架构"><a class="header" href="#核心架构">核心架构</a></h2>
<h3 id="1-主要组件模块"><a class="header" href="#1-主要组件模块">1. 主要组件模块</a></h3>
<ul>
<li><strong>Dense模块</strong>: 稠密矩阵和向量操作</li>
<li><strong>Sparse模块</strong>: 稀疏矩阵运算</li>
<li><strong>Geometry模块</strong>: 几何变换和3D图形</li>
<li><strong>Eigenvalues模块</strong>: 特征值和特征向量</li>
<li><strong>Cholesky/LU/QR模块</strong>: 矩阵分解</li>
<li><strong>SVD模块</strong>: 奇异值分解</li>
</ul>
<h3 id="2-核心设计原则"><a class="header" href="#2-核心设计原则">2. 核心设计原则</a></h3>
<pre><code>模板元编程 -&gt; 编译时优化
表达式模板 -&gt; 延迟计算
SIMD指令 -&gt; 向量化加速
内存对齐 -&gt; 缓存友好
</code></pre>
<h2 id="基础数据类型"><a class="header" href="#基础数据类型">基础数据类型</a></h2>
<h3 id="1-矩阵和向量定义"><a class="header" href="#1-矩阵和向量定义">1. 矩阵和向量定义</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Dense&gt;
using namespace Eigen;

// 预定义类型
Matrix3f m3f;        // 3x3 float矩阵
Matrix4d m4d;        // 4x4 double矩阵
Vector3f v3f;        // 3维float向量
Vector4i v4i;        // 4维int向量
RowVector3d rv3d;    // 3维行向量

// 动态大小矩阵
MatrixXf mxf;        // 任意大小float矩阵
VectorXd vxd;        // 任意大小double向量

// 自定义大小
Matrix&lt;float, 2, 3&gt; m23f;  // 2x3 float矩阵
Matrix&lt;int, Dynamic, 2&gt; mx2i;  // 动态行数x2列int矩阵
</code></pre>
<h3 id="2-矩阵初始化"><a class="header" href="#2-矩阵初始化">2. 矩阵初始化</a></h3>
<pre><code class="language-cpp">// 零矩阵和单位矩阵
Matrix3f::Zero()     // 零矩阵
Matrix3f::Identity() // 单位矩阵
Matrix3f::Ones()     // 全1矩阵
Matrix3f::Random()   // 随机矩阵

// 常量初始化
Matrix3f::Constant(2.5f)  // 常量矩阵

// 逗号初始化语法
Matrix3f m;
m &lt;&lt; 1, 2, 3,
     4, 5, 6,
     7, 8, 9;

// 动态矩阵初始化
MatrixXf mx(3, 4);
mx.setZero();
mx.setIdentity();
mx.setRandom();
</code></pre>
<h3 id="3-向量操作"><a class="header" href="#3-向量操作">3. 向量操作</a></h3>
<pre><code class="language-cpp">// 向量初始化
Vector3f v(1.0f, 2.0f, 3.0f);
Vector3f v2 = Vector3f::UnitX();  // (1,0,0)

// 向量运算
Vector3f v1, v2, result;
result = v1 + v2;         // 向量加法
result = v1 - v2;         // 向量减法
result = v1.cross(v2);    // 叉积
float dot_product = v1.dot(v2);  // 点积
float norm = v1.norm();   // 向量模长
v1.normalize();           // 归一化

// 向量访问
float x = v(0);  // 或 v[0]
float y = v(1);
float z = v(2);
</code></pre>
<h2 id="矩阵运算"><a class="header" href="#矩阵运算">矩阵运算</a></h2>
<h3 id="1-基本矩阵运算"><a class="header" href="#1-基本矩阵运算">1. 基本矩阵运算</a></h3>
<pre><code class="language-cpp">Matrix3f A, B, C;

// 基本运算
C = A + B;           // 矩阵加法
C = A - B;           // 矩阵减法
C = A * B;           // 矩阵乘法
C = A.transpose();   // 转置
C = A.inverse();     // 逆矩阵

// 标量运算
C = 2 * A;           // 标量乘法
C = A / 2;           // 标量除法

// 元素级运算
C = A.cwiseProduct(B);  // 对应元素相乘
C = A.cwiseQuotient(B); // 对应元素相除
C = A.cwiseAbs();       // 绝对值
C = A.cwiseSqrt();      // 平方根
</code></pre>
<h3 id="2-矩阵分解"><a class="header" href="#2-矩阵分解">2. 矩阵分解</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Dense&gt;

Matrix3f A;
A &lt;&lt; 1, 2, 1,
     2, 1, 0,
     1, 0, 1;

// LU分解
FullPivLU&lt;Matrix3f&gt; lu(A);
Matrix3f L = lu.matrixLU().triangularView&lt;StrictlyLower&gt;();
Matrix3f U = lu.matrixLU().triangularView&lt;Upper&gt;();

// QR分解
HouseholderQR&lt;Matrix3f&gt; qr(A);
Matrix3f Q = qr.householderQ();
Matrix3f R = qr.matrixQR().triangularView&lt;Upper&gt;();

// Cholesky分解（对称正定矩阵）
LLT&lt;Matrix3f&gt; llt(A);
if (llt.info() == Success) {
    Matrix3f L = llt.matrixL();
}

// SVD分解
JacobiSVD&lt;Matrix3f&gt; svd(A, ComputeFullU | ComputeFullV);
Matrix3f U = svd.matrixU();
Vector3f S = svd.singularValues();
Matrix3f V = svd.matrixV();
</code></pre>
<h3 id="3-特征值和特征向量"><a class="header" href="#3-特征值和特征向量">3. 特征值和特征向量</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Eigenvalues&gt;

Matrix3f A;
A &lt;&lt; 1, 2, 3,
     2, 4, 5,
     3, 5, 6;

// 实对称矩阵的特征值分解
SelfAdjointEigenSolver&lt;Matrix3f&gt; eigensolver(A);
if (eigensolver.info() == Success) {
    Vector3f eigenvalues = eigensolver.eigenvalues();
    Matrix3f eigenvectors = eigensolver.eigenvectors();

    std::cout &lt;&lt; "特征值:\n" &lt;&lt; eigenvalues &lt;&lt; std::endl;
    std::cout &lt;&lt; "特征向量:\n" &lt;&lt; eigenvectors &lt;&lt; std::endl;
}

// 一般矩阵的特征值分解
EigenSolver&lt;Matrix3f&gt; es(A);
Vector3cf eigenvalues = es.eigenvalues();  // 复数特征值
Matrix3cf eigenvectors = es.eigenvectors(); // 复数特征向量
</code></pre>
<h2 id="几何变换"><a class="header" href="#几何变换">几何变换</a></h2>
<h3 id="1-3d变换"><a class="header" href="#1-3d变换">1. 3D变换</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Geometry&gt;

// 旋转
AngleAxisf rotation(M_PI/4, Vector3f::UnitZ());  // 绕Z轴旋转45度
Matrix3f rotation_matrix = rotation.toRotationMatrix();

// 四元数
Quaternionf q(rotation);
Quaternionf q2(w, x, y, z);  // 直接构造

// 平移
Translation3f translation(1.0f, 2.0f, 3.0f);
Matrix4f translation_matrix = translation.matrix();

// 缩放
Scaling(2.0f, 3.0f, 4.0f);

// 组合变换
Transform&lt;float, 3, Affine&gt; transform;
transform = translation * rotation * Scaling(2.0f);
Matrix4f combined_matrix = transform.matrix();
</code></pre>
<h3 id="2-2d变换"><a class="header" href="#2-2d变换">2. 2D变换</a></h3>
<pre><code class="language-cpp">// 2D旋转
Rotation2Df rot2d(M_PI/6);  // 旋转30度
Matrix2f rot_matrix = rot2d.toRotationMatrix();

// 2D变换
Transform&lt;float, 2, Affine&gt; transform2d;
transform2d = Translation2f(1, 2) * rot2d * Scaling(2.0f);

// 应用变换
Vector2f point(1, 1);
Vector2f transformed_point = transform2d * point;
</code></pre>
<h3 id="3-欧拉角"><a class="header" href="#3-欧拉角">3. 欧拉角</a></h3>
<pre><code class="language-cpp">// 欧拉角转换
Vector3f euler_angles(roll, pitch, yaw);

// 按ZYX顺序旋转
Matrix3f rotation_matrix =
    AngleAxisf(yaw, Vector3f::UnitZ()) *
    AngleAxisf(pitch, Vector3f::UnitY()) *
    AngleAxisf(roll, Vector3f::UnitX());

// 从旋转矩阵提取欧拉角
Vector3f extracted_euler = rotation_matrix.eulerAngles(2, 1, 0);  // ZYX顺序
</code></pre>
<h2 id="稀疏矩阵"><a class="header" href="#稀疏矩阵">稀疏矩阵</a></h2>
<h3 id="1-稀疏矩阵定义"><a class="header" href="#1-稀疏矩阵定义">1. 稀疏矩阵定义</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Sparse&gt;

typedef SparseMatrix&lt;double&gt; SpMat;
typedef Triplet&lt;double&gt; T;

// 创建稀疏矩阵
SpMat A(1000, 2000);  // 1000x2000稀疏矩阵

// 使用三元组填充
std::vector&lt;T&gt; tripletList;
tripletList.reserve(estimation_of_entries);

for(int i = 0; i &lt; n; i++) {
    for(int j = 0; j &lt; m; j++) {
        double value = computeValue(i, j);
        if (value != 0.0) {
            tripletList.push_back(T(i, j, value));
        }
    }
}

A.setFromTriplets(tripletList.begin(), tripletList.end());
</code></pre>
<h3 id="2-稀疏矩阵运算"><a class="header" href="#2-稀疏矩阵运算">2. 稀疏矩阵运算</a></h3>
<pre><code class="language-cpp">SpMat A, B, C;

// 基本运算
C = A + B;           // 稀疏矩阵加法
C = A * B;           // 稀疏矩阵乘法
C = A.transpose();   // 转置

// 稀疏向量乘法
VectorXd x, b;
b = A * x;

// 访问元素
double value = A.coeff(i, j);  // 访问(i,j)元素
A.coeffRef(i, j) = value;      // 设置(i,j)元素
</code></pre>
<h3 id="3-稀疏求解器"><a class="header" href="#3-稀疏求解器">3. 稀疏求解器</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/SparseLU&gt;
#include &lt;Eigen/SparseCholesky&gt;

// LU求解器
SparseLU&lt;SpMat&gt; solver;
solver.analyzePattern(A);
solver.factorize(A);

if(solver.info() == Success) {
    VectorXd x = solver.solve(b);
}

// Cholesky求解器（对称正定矩阵）
SimplicialCholesky&lt;SpMat&gt; chol(A);
if(chol.info() == Success) {
    VectorXd x = chol.solve(b);
}

// 迭代求解器
ConjugateGradient&lt;SpMat&gt; cg;
cg.compute(A);
VectorXd x = cg.solve(b);
</code></pre>
<h2 id="数组操作"><a class="header" href="#数组操作">数组操作</a></h2>
<h3 id="1-array类"><a class="header" href="#1-array类">1. Array类</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Dense&gt;

// Array定义
Array3f a1;          // 3元素float数组
ArrayXf ax;          // 动态float数组
Array33f a33;        // 3x3 float数组

// 初始化
Array3f a(1.0f, 2.0f, 3.0f);
ArrayXf b = ArrayXf::LinSpaced(10, 0, 9);  // 等差数列

// 元素级运算
Array3f c = a.sin();      // 正弦
Array3f d = a.cos();      // 余弦
Array3f e = a.exp();      // 指数
Array3f f = a.log();      // 对数
Array3f g = a.sqrt();     // 平方根
Array3f h = a.pow(2);     // 幂运算
</code></pre>
<h3 id="2-matrix和array转换"><a class="header" href="#2-matrix和array转换">2. Matrix和Array转换</a></h3>
<pre><code class="language-cpp">MatrixXf m(3, 3);
ArrayXXf a(3, 3);

// Matrix到Array
a = m.array();

// Array到Matrix
m = a.matrix();

// 混合运算
m = (m.array() * 2).matrix();  // 矩阵元素都乘以2
</code></pre>
<h2 id="性能优化"><a class="header" href="#性能优化">性能优化</a></h2>
<h3 id="1-表达式模板"><a class="header" href="#1-表达式模板">1. 表达式模板</a></h3>
<pre><code class="language-cpp">// 表达式模板自动优化
MatrixXf A, B, C;
// 以下表达式会被优化为单次循环
MatrixXf result = A + B * C.transpose();

// 强制求值
MatrixXf intermediate = (B * C.transpose()).eval();
MatrixXf result = A + intermediate;
</code></pre>
<h3 id="2-内存管理"><a class="header" href="#2-内存管理">2. 内存管理</a></h3>
<pre><code class="language-cpp">// 预分配内存
MatrixXf A(1000, 1000);
A.setZero();

// 避免临时对象
MatrixXf A, B, C;
C.noalias() = A * B;  // 避免别名检查

// 就地操作
A *= 2;              // 就地乘法
A.transposeInPlace(); // 就地转置
</code></pre>
<h3 id="3-并行化"><a class="header" href="#3-并行化">3. 并行化</a></h3>
<pre><code class="language-cpp">// 编译时定义
#define EIGEN_USE_MKL_ALL  // 使用Intel MKL
#define EIGEN_USE_BLAS     // 使用BLAS

// 运行时设置线程数
Eigen::setNbThreads(4);

// 并行矩阵乘法自动启用
MatrixXf A(1000, 1000), B(1000, 1000);
MatrixXf C = A * B;  // 自动并行化
</code></pre>
<h2 id="高级特性"><a class="header" href="#高级特性">高级特性</a></h2>
<h3 id="1-自定义标量类型"><a class="header" href="#1-自定义标量类型">1. 自定义标量类型</a></h3>
<pre><code class="language-cpp">#include &lt;Eigen/Dense&gt;
#include &lt;complex&gt;

// 复数矩阵
typedef Matrix&lt;std::complex&lt;double&gt;, Dynamic, Dynamic&gt; MatrixXcd;
MatrixXcd complex_matrix(3, 3);

// 自定义精度
typedef Matrix&lt;long double, Dynamic, Dynamic&gt; MatrixXld;
MatrixXld high_precision_matrix;
</code></pre>
<h3 id="2-块操作"><a class="header" href="#2-块操作">2. 块操作</a></h3>
<pre><code class="language-cpp">MatrixXf A(4, 4);

// 块访问
MatrixXf top_left = A.block&lt;2, 2&gt;(0, 0);    // 2x2块
MatrixXf sub_matrix = A.block(1, 1, 2, 3);  // 动态大小块

// 行和列访问
VectorXf row = A.row(1);        // 第1行
VectorXf col = A.col(2);        // 第2列
MatrixXf rows = A.rows(1, 3);   // 第1到第3行

// 对角线
VectorXf diag = A.diagonal();   // 主对角线
VectorXf super_diag = A.diagonal(1);  // 上对角线
</code></pre>
<h3 id="3-归约操作"><a class="header" href="#3-归约操作">3. 归约操作</a></h3>
<pre><code class="language-cpp">MatrixXf A(3, 4);

// 全矩阵归约
float sum = A.sum();           // 求和
float mean = A.mean();         // 平均值
float min_val = A.minCoeff();  // 最小值
float max_val = A.maxCoeff();  // 最大值
float trace = A.trace();       // 矩阵迹

// 按行/列归约
VectorXf row_sums = A.rowwise().sum();
VectorXf col_sums = A.colwise().sum();

// 查找位置
int row, col;
A.maxCoeff(&amp;row, &amp;col);  // 最大元素位置
</code></pre>
<h2 id="实际应用示例"><a class="header" href="#实际应用示例">实际应用示例</a></h2>
<h3 id="1-最小二乘拟合"><a class="header" href="#1-最小二乘拟合">1. 最小二乘拟合</a></h3>
<pre><code class="language-cpp">// 线性最小二乘 Ax = b
MatrixXf A(m, n);  // 系数矩阵
VectorXf b(m);     // 目标向量

// 正规方程求解
VectorXf x = (A.transpose() * A).ldlt().solve(A.transpose() * b);

// QR分解求解
VectorXf x = A.colPivHouseholderQr().solve(b);

// SVD求解（更稳定）
VectorXf x = A.jacobiSvd(ComputeThinU | ComputeThinV).solve(b);
</code></pre>
<h3 id="2-主成分分析pca"><a class="header" href="#2-主成分分析pca">2. 主成分分析(PCA)</a></h3>
<pre><code class="language-cpp">MatrixXf data(samples, features);

// 中心化数据
VectorXf mean = data.colwise().mean();
MatrixXf centered = data.rowwise() - mean.transpose();

// 计算协方差矩阵
MatrixXf cov = (centered.transpose() * centered) / (samples - 1);

// 特征值分解
SelfAdjointEigenSolver&lt;MatrixXf&gt; eigensolver(cov);
VectorXf eigenvalues = eigensolver.eigenvalues();
MatrixXf eigenvectors = eigensolver.eigenvectors();

// 降维投影
int num_components = 2;
MatrixXf projection = eigenvectors.rightCols(num_components);
MatrixXf reduced_data = centered * projection;
</code></pre>
<h3 id="3-卡尔曼滤波器"><a class="header" href="#3-卡尔曼滤波器">3. 卡尔曼滤波器</a></h3>
<pre><code class="language-cpp">class KalmanFilter {
private:
    MatrixXf A, B, H, Q, R, P;  // 系统矩阵
    VectorXf x;                 // 状态向量

public:
    void predict(const VectorXf&amp; u) {
        x = A * x + B * u;
        P = A * P * A.transpose() + Q;
    }

    void update(const VectorXf&amp; z) {
        VectorXf y = z - H * x;
        MatrixXf S = H * P * H.transpose() + R;
        MatrixXf K = P * H.transpose() * S.inverse();

        x = x + K * y;
        P = (MatrixXf::Identity(P.rows(), P.cols()) - K * H) * P;
    }
};
</code></pre>
<h2 id="调试和优化技巧"><a class="header" href="#调试和优化技巧">调试和优化技巧</a></h2>
<h3 id="1-编译时检查"><a class="header" href="#1-编译时检查">1. 编译时检查</a></h3>
<pre><code class="language-cpp">// 静态断言检查
EIGEN_STATIC_ASSERT(MatrixType::RowsAtCompileTime == 3, "Matrix must have 3 rows");

// 大小检查
if (A.rows() != B.cols()) {
    throw std::invalid_argument("Matrix dimensions don't match");
}
</code></pre>
<h3 id="2-数值稳定性"><a class="header" href="#2-数值稳定性">2. 数值稳定性</a></h3>
<pre><code class="language-cpp">// 检查数值稳定性
if (A.determinant() &lt; 1e-12) {
    std::cout &lt;&lt; "Matrix is nearly singular" &lt;&lt; std::endl;
}

// 使用更稳定的求解器
VectorXf x = A.completeOrthogonalDecomposition().solve(b);

// 正则化
MatrixXf regularized = A.transpose() * A + lambda * MatrixXf::Identity(n, n);
</code></pre>
<h3 id="3-性能测试"><a class="header" href="#3-性能测试">3. 性能测试</a></h3>
<pre><code class="language-cpp">#include &lt;chrono&gt;

auto start = std::chrono::high_resolution_clock::now();

// 执行矩阵运算
MatrixXf C = A * B;

auto end = std::chrono::high_resolution_clock::now();
auto duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end - start);

std::cout &lt;&lt; "Matrix multiplication took " &lt;&lt; duration.count() &lt;&lt; " ms" &lt;&lt; std::endl;
</code></pre>
<p>Eigen是现代C++科学计算的核心库，其高效的设计和丰富的功能使其成为线性代数运算的首选工具。通过合理使用Eigen的各种特性，可以编写出既高效又易维护的数值计算代码。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../编程/c++/dlib.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../编程/c++/fastdds.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../编程/c++/dlib.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../编程/c++/fastdds.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

