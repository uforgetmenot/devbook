<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CPU Pinning（CPU 绑定）学习笔记 - 开发</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">
        <link rel="stylesheet" href="../../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">开发</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="搜索本书内容..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="cpu-pinningcpu-绑定学习笔记"><a class="header" href="#cpu-pinningcpu-绑定学习笔记">CPU Pinning（CPU 绑定）学习笔记</a></h1>
<blockquote>
<p>面向虚拟化、云平台和高性能计算场景的工程师（0-5 年经验），系统掌握 CPU Pinning 技术原理、调度策略与实战部署方法，提升应用性能、降低抖动并满足延迟敏感业务需求。</p>
</blockquote>
<hr />
<h2 id="学习定位与总体目标"><a class="header" href="#学习定位与总体目标">学习定位与总体目标</a></h2>
<ul>
<li><strong>学习者画像</strong>：熟悉 Linux 基础与常规虚拟化工具（KVM/VMware/Hyper-V），面对 NFV、电信、数据库、高频交易、实时渲染等高性能场景，需要优化虚拟机或容器的 CPU 调度以保障 SLA。</li>
<li><strong>技术定位</strong>：CPU Pinning（处理器绑定）通过将虚拟 CPU（vCPU）或线程固定在指定物理 CPU（pCPU）/核心上，减少上下文切换、缓存失效和 NUMA 跨节点访问，从而提升性能与确定性。</li>
<li><strong>学习目标</strong>：
<ol>
<li>理解现代 CPU 拓扑、NUMA 结构、超线程影响；</li>
<li>掌握 KVM/libvirt、OpenStack、Kubernetes、Docker、VMware 等 Pinning 配置方式；</li>
<li>能够设计并验证 vCPU → pCPU 映射策略，结合 real-time、HugePages、隔离 CPUs 等优化手段；</li>
<li>建立性能测试、监控与告警机制；</li>
<li>形成文档化、可复用的 CPU Pinning 最佳实践。</li>
</ol>
</li>
<li><strong>成果要求</strong>：
<ul>
<li>输出至少 3 种不同场景下的 CPU Pinning 实施方案；</li>
<li>完成性能对比测试并量化收益；</li>
<li>制定部署与运维规范、故障排查流程；</li>
<li>在团队中形成知识沉淀与培训材料。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="核心模块结构"><a class="header" href="#核心模块结构">核心模块结构</a></h2>
<ol>
<li><strong>模块一：CPU 拓扑与调度基础</strong> —— 了解物理 CPU 架构、线程调度、NUMA 与超线程影响。</li>
<li><strong>模块二：CPU Pinning 核心概念与策略</strong> —— 理解 Pinning 类型、调度参数、隔离策略。</li>
<li><strong>模块三：KVM/libvirt 环境下的 CPU Pinning 实战</strong> —— 配置 XML、命令行、自动化脚本。</li>
<li><strong>模块四：云平台与容器场景中的 CPU Pinning</strong> —— OpenStack、Kubernetes、Docker 等平台实践。</li>
<li><strong>模块五：性能测试、监控与调优</strong> —— 使用工具测量性能、分析瓶颈、制定优化。</li>
<li><strong>模块六：故障诊断与最佳实践</strong> —— 常见问题、排查策略、运维流程。</li>
</ol>
<hr />
<h2 id="模块一cpu-拓扑与调度基础"><a class="header" href="#模块一cpu-拓扑与调度基础">模块一：CPU 拓扑与调度基础</a></h2>
<h3 id="11-现代-cpu-拓扑"><a class="header" href="#11-现代-cpu-拓扑">1.1 现代 CPU 拓扑</a></h3>
<ul>
<li><strong>Socket → NUMA 节点 → Core → Thread</strong> 层级；</li>
<li>L1/L2/L3 缓存层次结构，缓存共享策略；</li>
<li>超线程（SMT）：一个核心两个逻辑处理器；</li>
<li>CPU 核心亲和性影响缓存命中率。</li>
</ul>
<h3 id="12-numa-架构"><a class="header" href="#12-numa-架构">1.2 NUMA 架构</a></h3>
<ul>
<li>Non-Uniform Memory Access：多节点，每个节点有本地内存；</li>
<li>跨 NUMA 访问延迟增加；</li>
<li><code>numactl --hardware</code>/<code>lscpu</code>/<code>hwloc</code> 查看拓扑；</li>
<li>NUMA 绑定 + CPU Pinning = 减少跨节点访问。</li>
</ul>
<h3 id="13-linux-调度器简介"><a class="header" href="#13-linux-调度器简介">1.3 Linux 调度器简介</a></h3>
<ul>
<li>CFS（Completely Fair Scheduler）、RT（实时）调度类；</li>
<li><code>sched_setaffinity</code> 控制进程/线程运行的 CPU 集；</li>
<li>控制工具：<code>taskset</code>, <code>cset</code>, <code>cpuset cgroup</code>；</li>
<li><code>isolcpus</code>/<code>nohz_full</code>/<code>rcu_nocbs</code> 内核参数用于隔离 CPU。</li>
</ul>
<h3 id="14-性能影响因素"><a class="header" href="#14-性能影响因素">1.4 性能影响因素</a></h3>
<ul>
<li>上下文切换开销、cache thrashing；</li>
<li>NUMA 跳转导致延迟飙升；</li>
<li>IRQ/软中断分布；</li>
<li>SMT 影响：共享执行单元，可能导致争用；</li>
<li><code>schedstat</code>, <code>perf sched</code>, <code>mpstat</code> 分析调度情况。</li>
</ul>
<h3 id="15-学习重点与易错点"><a class="header" href="#15-学习重点与易错点">1.5 学习重点与易错点</a></h3>
<ul>
<li><strong>重点</strong>：掌握 CPU 拓扑、NUMA 原理、调度器参数；</li>
<li><strong>易错点</strong>：
<ol>
<li>忽视超线程 → vCPU 绑到同一物理核心的两个线程导致性能下降；</li>
<li>NUMA 忽略内存绑定 → CPU Pinning 不配合内存亲和；</li>
<li>IRQ 未隔离 → 应用 CPU 被中断抢占；</li>
<li>误解 <code>taskset</code> 与 cgroup 区别 → 权限/继承问题。</li>
</ol>
</li>
</ul>
<h3 id="16-动手实验查看拓扑与亲和性"><a class="header" href="#16-动手实验查看拓扑与亲和性">1.6 动手实验：查看拓扑与亲和性</a></h3>
<pre><code class="language-bash">lscpu -e=CPU,CORE,SOCKET,NODE
numactl --hardware
hwloc-ls --ps --whole-io &gt; topo.txt
ps -o pid,psr,pcpu,comm -p &lt;PID&gt;
taskset -cp &lt;PID&gt;
</code></pre>
<hr />
<h2 id="模块二cpu-pinning-核心概念与策略"><a class="header" href="#模块二cpu-pinning-核心概念与策略">模块二：CPU Pinning 核心概念与策略</a></h2>
<h3 id="21-pinning-类型"><a class="header" href="#21-pinning-类型">2.1 Pinning 类型</a></h3>
<ul>
<li><strong>静态 Pinning</strong>：固定 vCPU → pCPU 映射，例如 <code>vCPU0 → CPU2</code>；</li>
<li><strong>动态 Pinning</strong>：允许在指定 CPU 集中迁移，但限制范围（<code>cpuset</code>）；</li>
<li><strong>软 Pinning</strong>：调度器倾向使用指定 CPU，但可漂移（<code>cpu_shares</code> 等）；</li>
<li><strong>硬 Pinning</strong>：严格限制，只能运行在指定 CPU（<code>emulatorpin</code>, <code>vcpu placement</code>）。</li>
</ul>
<h3 id="22-关键参数与术语"><a class="header" href="#22-关键参数与术语">2.2 关键参数与术语</a></h3>
<ul>
<li><code>cpuset</code>：cgroup 控制 CPU 集；</li>
<li><code>sibling</code>：超线程 sibling；</li>
<li><code>emulator threads</code>：QEMU/KVM 中负责 I/O 和模拟的线程；</li>
<li><code>IOThreads</code>：处理高 IO 负载的独立线程；</li>
<li><code>vCPU topology</code>：<code>sockets</code>, <code>cores</code>, <code>threads</code> 属性影响调度。</li>
</ul>
<h3 id="23-pinning-策略设计"><a class="header" href="#23-pinning-策略设计">2.3 Pinning 策略设计</a></h3>
<ul>
<li><strong>目标</strong>：减少延迟、提升吞吐、保障实时、隔离资源；</li>
<li><strong>配套措施</strong>：HugePages、NUMA、IRQ affinity、实时内核；</li>
<li><strong>映射规则</strong>：
<ul>
<li>根据 workload 的线程 → CPU；</li>
<li>避免在同一核心上运行竞争线程；</li>
<li>将中断、内核线程迁移到隔离 CPU；</li>
<li>结合缓存亲和、IO affinity。</li>
</ul>
</li>
</ul>
<h3 id="24-device-与-irq-绑定"><a class="header" href="#24-device-与-irq-绑定">2.4 Device 与 IRQ 绑定</a></h3>
<ul>
<li><code>irqbalance</code> 调度中断；</li>
<li><code>echo 2 &gt; /proc/irq/&lt;irq&gt;/smp_affinity_list</code>; CPU mask；</li>
<li>建议将中断与应用 CPU 分开。</li>
</ul>
<h3 id="25-pinning-与调度交互"><a class="header" href="#25-pinning-与调度交互">2.5 Pinning 与调度交互</a></h3>
<ul>
<li>调度器仍可能迁移线程 → 需使用 <code>isolcpus</code> 或 <code>rt</code> 调度；</li>
<li><code>cpu.shares</code>, <code>cpu.quota</code> 配合 Pinning 控制资源；</li>
<li>实时应用：<code>SCHED_FIFO</code>, <code>SCHED_RR</code> + Pinning。</li>
</ul>
<h3 id="26-场景分类"><a class="header" href="#26-场景分类">2.6 场景分类</a></h3>
<ul>
<li><strong>网络功能虚拟化 (NFV)</strong>：DPDK、SR-IOV 需要固定 CPU；</li>
<li><strong>数据库/OLTP</strong>：绑定核心减少抖动；</li>
<li><strong>高频交易</strong>：超低延迟；</li>
<li><strong>实时媒体</strong>：音视频串流；</li>
<li><strong>HPC</strong>：MPI 任务与 NUMA 拓扑匹配。</li>
</ul>
<h3 id="27-策略实践指南"><a class="header" href="#27-策略实践指南">2.7 策略实践指南</a></h3>
<ul>
<li>绘制 CPU 拓扑图 ↔ 线程需求；</li>
<li>列出 “保留 CPU” vs “共享 CPU”；</li>
<li><code>isolcpus=1-3,8-11</code> 内核参数 → 给高优先级应用；</li>
<li>利用 <code>cset shield --cpu=2,4 --kthread=on</code> 隔离核心。</li>
</ul>
<hr />
<h2 id="模块三kvm--libvirt-环境实战"><a class="header" href="#模块三kvm--libvirt-环境实战">模块三：KVM / libvirt 环境实战</a></h2>
<h3 id="31-基础工具与环境"><a class="header" href="#31-基础工具与环境">3.1 基础工具与环境</a></h3>
<ul>
<li>安装：<code>libvirt</code>, <code>qemu-kvm</code>, <code>virt-manager</code>；</li>
<li>虚拟机 XML：<code>virsh dumpxml &lt;domain&gt;</code>。</li>
</ul>
<h3 id="32-xml-配置示例"><a class="header" href="#32-xml-配置示例">3.2 XML 配置示例</a></h3>
<pre><code class="language-xml">&lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
&lt;cputune&gt;
  &lt;vcpupin vcpu='0' cpuset='2'/&gt;
  &lt;vcpupin vcpu='1' cpuset='6'/&gt;
  &lt;vcpupin vcpu='2' cpuset='3'/&gt;
  &lt;vcpupin vcpu='3' cpuset='7'/&gt;
  &lt;emulatorpin cpuset='0-1'/&gt;
  &lt;iothreadpin iothread='1' cpuset='4-5'/&gt;
&lt;/cputune&gt;
&lt;numatune&gt;
  &lt;memory mode='strict' nodeset='0'/&gt;
&lt;/numatune&gt;
</code></pre>
<h3 id="33-命令行配置"><a class="header" href="#33-命令行配置">3.3 命令行配置</a></h3>
<ul>
<li>创建虚拟机时：<code>virt-install --vcpu 4 --cpu host-passthrough --cpuset=2-5</code>；</li>
<li>修改：<code>virsh vcpupin &lt;domain&gt; 0 2</code>；</li>
<li>查看：<code>virsh vcpuinfo &lt;domain&gt;</code>；<code>virsh emulatorpin</code>；</li>
<li>热调整：KVM 支持在线修改，但注意稳定性。</li>
</ul>
<h3 id="34-numa-配置"><a class="header" href="#34-numa-配置">3.4 NUMA 配置</a></h3>
<pre><code class="language-xml">&lt;cpu mode='host-passthrough'&gt;
  &lt;topology sockets='1' cores='2' threads='2'/&gt;
  &lt;numa&gt;
    &lt;cell id='0' cpus='0-3' memory='8388608'/&gt;
  &lt;/numa&gt;
&lt;/cpu&gt;
&lt;numatune&gt;
  &lt;memory mode='preferred' nodeset='0'/&gt;
&lt;/numatune&gt;
</code></pre>
<ul>
<li><code>memory mode='strict'</code> 强制在指定 NUMA 节点；</li>
<li>搭配 HugePages（<code>memoryBacking</code>）。</li>
</ul>
<h3 id="35-qemu-命令行"><a class="header" href="#35-qemu-命令行">3.5 QEMU 命令行</a></h3>
<ul>
<li><code>-cpu host -smp 4,sockets=1,cores=2,threads=2 -numa node,cpus=0-3,mem=8G</code>；</li>
<li><code>-object memory-backend-file</code> + HugePages；</li>
<li><code>taskset</code> QEMU 进程 + Thread pinning；</li>
<li><code>QEMU_THREAD_POOL_SIZE</code> 调整 I/O 线程。</li>
</ul>
<h3 id="36-自动化脚本与-ansible"><a class="header" href="#36-自动化脚本与-ansible">3.6 自动化脚本与 Ansible</a></h3>
<pre><code class="language-yaml">- name: 配置 vCPU Pinning
  community.libvirt.virt:
    name: rt-vm
    command: define
    xml: "{{ lookup('template', 'rt-vm.xml.j2') }}"
</code></pre>
<ul>
<li>使用 <code>jinja</code> 模板生成 <code>cputune</code>；</li>
<li>结合 <code>roles</code> 管理多个 VM。</li>
</ul>
<h3 id="37-实验性能对比"><a class="header" href="#37-实验性能对比">3.7 实验：性能对比</a></h3>
<ol>
<li>创建虚拟机 A：无 Pinning；</li>
<li>虚拟机 B：2 vCPU → CPU2,3；</li>
<li>运行 <code>stress-ng</code>、<code>sysbench</code>、<code>fio</code>；</li>
<li>记录 <code>vmstat</code>, <code>mpstat</code>, <code>perf</code>；</li>
<li>对比延迟/吞吐，分析 CPU 和 NUMA 行为。</li>
</ol>
<h3 id="38-附加调优"><a class="header" href="#38-附加调优">3.8 附加调优</a></h3>
<ul>
<li><code>cpu mode='host-passthrough'</code> 获取全部 CPU 特性；</li>
<li><code>virtio</code> 硬件加速，减少 emulation；</li>
<li><code>threaded-irq</code>：将 virtio 中断绑定到同节点；</li>
<li>配合 <code>hugetlbfs</code>, <code>virtio-net multiqueue</code>。</li>
</ul>
<h3 id="39-常见问题与解决"><a class="header" href="#39-常见问题与解决">3.9 常见问题与解决</a></h3>
<ul>
<li><code>libvirtError: invalid argument: CPU &lt;X&gt; doesn't exist</code> → cpuset 不正确；</li>
<li>Hotplug vCPU 但未更新 pinning → 需重新定义；</li>
<li>NUMA/memory 设置冲突 → 确认节点资源；</li>
<li>Emulator 线程未 Pin → IO 抖动。</li>
</ul>
<h3 id="310-练习任务"><a class="header" href="#310-练习任务">3.10 练习任务</a></h3>
<ul>
<li>设计 8 核宿主机（2 NUMA 节点）的 VM Pinning：
<ol>
<li>应用 vCPU 绑定在 NUMA0；</li>
<li>Emulator/I/O 线程在 NUMA1；</li>
<li>记录性能差异；</li>
<li>编写脚本自动生成 XML。</li>
</ol>
</li>
</ul>
<hr />
<h2 id="模块四云平台与容器场景"><a class="header" href="#模块四云平台与容器场景">模块四：云平台与容器场景</a></h2>
<h3 id="41-openstack"><a class="header" href="#41-openstack">4.1 OpenStack</a></h3>
<ul>
<li><code>nova.conf</code> 配置：
<ul>
<li><code>vcpu_pin_set = 2-15</code> 指定可用 pCPU；</li>
<li><code>cpu_dedicated_set</code>/<code>cpu_shared_set</code>；</li>
<li><code>reserved_host_memory_mb</code>；</li>
</ul>
</li>
<li>Flavor Extra Specs：
<ul>
<li><code>hw:cpu_policy=dedicated</code>；</li>
<li><code>hw:cpu_thread_policy=isolate|prefer|require</code>；</li>
<li><code>hw:numa_nodes=1</code>；</li>
<li><code>hw:cpu_realtime=YES</code>；</li>
<li><code>hw:mem_page_size=large</code>；</li>
</ul>
</li>
<li>Placement Traits：<code>CUSTOM_CPU_X_Y</code>；</li>
<li>NUMA Affinity：<code>hw:numa_cpus.0=0-3</code>；</li>
<li>调试：<code>openstack hypervisor show</code>, <code>nova diagnostics</code>。</li>
</ul>
<h3 id="42-kubernetes--containerd"><a class="header" href="#42-kubernetes--containerd">4.2 Kubernetes / Containerd</a></h3>
<ul>
<li><code>CPU Manager</code> 策略：<code>static</code> / <code>none</code>；</li>
<li><code>kubelet --cpu-manager-policy=static</code>；</li>
<li><code>Guaranteed</code> Pod 请求/限制一致 ⇒ 获得专用 CPU；</li>
<li><code>cpuset.cpus</code> 在 <code>/sys/fs/cgroup/cpuset/...</code>；</li>
<li><code>Topology Manager</code> 合作：<code>policy=best-effort, single-numa-node</code>;</li>
<li>Device Plugin + HugePages；</li>
<li><code>pod.spec.runtimeClassName: high-performance</code>（OpenShift）；</li>
<li><code>cpuset</code> 与 <code>irqbalance</code> 配置。</li>
</ul>
<h3 id="43-docker--podman"><a class="header" href="#43-docker--podman">4.3 Docker / Podman</a></h3>
<ul>
<li><code>--cpuset-cpus</code> 指定 CPU；</li>
<li><code>--cpuset-mems</code> 指定 NUMA；</li>
<li><code>--cpu-period</code>, <code>--cpu-quota</code> 控制时间片；</li>
<li>Compose/Swarm：<code>cpuset: "0,2"</code>; <code>cpus: 2.5</code>（软限制）；</li>
<li>cgroup v2: <code>cpu.max</code>, <code>cpuset.cpus.effective</code>；</li>
<li>与 systemd scope 交互。</li>
</ul>
<h3 id="44-vmware-vsphere"><a class="header" href="#44-vmware-vsphere">4.4 VMware vSphere</a></h3>
<ul>
<li>CPU Affinity：在 VM 设置 → Resources → CPU → Affinity；</li>
<li>vSphere DRS 可能冲突 → 需要关闭或设置规则；</li>
<li><code>latency sensitivity</code> 功能；</li>
<li>ESXi shell：<code>sched.cpu.affinity</code>；</li>
<li><code>CPU Hot Add</code> 与 Pinning 冲突；</li>
<li><code>vNUMA</code> 配置，使 VM NUMA 拓扑匹配宿主；</li>
<li><code>Power Policy</code> → <code>High Performance</code>。</li>
</ul>
<h3 id="45-hyper-v"><a class="header" href="#45-hyper-v">4.5 Hyper-V</a></h3>
<ul>
<li><code>Set-VMProcessor -VMName RT-VM -Count 4 -Maximum -RelativeWeight</code>；</li>
<li><code>Set-VMProcessor -HwThreadCountPerCore 2</code>；</li>
<li>设置 <code>NUMA</code> 边界 → <code>Set-VMHost -NumaSpanningEnabled $false</code>；</li>
<li>通过 WMI/PowerShell 设置 CPU affinity。</li>
</ul>
<h3 id="46-nfv实时-linux"><a class="header" href="#46-nfv实时-linux">4.6 NFV/实时 Linux</a></h3>
<ul>
<li>DPDK：<code>-l 2-5</code> 绑定核；</li>
<li><code>isolcpus</code>, <code>nohz_full</code>, <code>intel_pstate=disable</code>;</li>
<li><code>tuned-profiles-realtime</code> (RHEL)；</li>
<li>OpenShift <code>PerformanceAddons</code>；</li>
<li><code>ovs-vsctl set Open_vSwitch . other_config:pmd-cpu-mask=0x3c</code>。</li>
</ul>
<h3 id="47-云厂商实践"><a class="header" href="#47-云厂商实践">4.7 云厂商实践</a></h3>
<ul>
<li>AWS：<code>CPUOptions</code>, <code>Placement Group</code>；</li>
<li>Azure：加速网络 + Boost；</li>
<li>阿里云：<code>numa aware</code> 部署；</li>
<li>裸金属服务：直接操作内核参数。</li>
</ul>
<h3 id="48-容器--虚拟机混合场景"><a class="header" href="#48-容器--虚拟机混合场景">4.8 容器 + 虚拟机混合场景</a></h3>
<ul>
<li>虚拟机内再运行容器 → 需双层 Pinning；</li>
<li><code>virtio</code> 中断绑定 + 容器 <code>cpuset</code>；</li>
<li>避免 CPU 争用 → 资源预留。</li>
</ul>
<h3 id="49-实战练习"><a class="header" href="#49-实战练习">4.9 实战练习</a></h3>
<ul>
<li>OpenStack：创建 flavor <code>m1.dedicated</code>, <code>hw:cpu_policy=dedicated</code>, 部署实例并验证 <code>virsh vcpuinfo</code>；</li>
<li>Kubernetes：部署 <code>Guaranteed</code> Pod，确认 cgroup <code>cpuset.cpus</code>；</li>
<li>Docker：对比 <code>--cpuset-cpus</code> 与 <code>--cpus</code> 效果；</li>
<li>VMware：配置高敏感 VM 并测试延迟。</li>
</ul>
<hr />
<h2 id="模块五性能测试监控与调优"><a class="header" href="#模块五性能测试监控与调优">模块五：性能测试、监控与调优</a></h2>
<h3 id="51-性能基准工具"><a class="header" href="#51-性能基准工具">5.1 性能基准工具</a></h3>
<ul>
<li><code>stress-ng</code>, <code>sysbench</code>, <code>fio</code>；</li>
<li><code>hackbench</code>：调度压力；</li>
<li>SPEC CPU、<code>perf bench sched pipe</code>；</li>
<li>应用场景：数据库、网络、实时（cyclictest）。</li>
</ul>
<h3 id="52-测试流程"><a class="header" href="#52-测试流程">5.2 测试流程</a></h3>
<ol>
<li>定义 baseline（无 pinning）；</li>
<li>应用 Pinning;</li>
<li>运行 workload；</li>
<li>采集指标：延迟、吞吐、CPU 使用率、上下文切换；</li>
<li>分析差异，记录结果。</li>
</ol>
<h3 id="53-监控指标"><a class="header" href="#53-监控指标">5.3 监控指标</a></h3>
<ul>
<li><code>sar -P</code>, <code>mpstat</code>, <code>pidstat</code>;</li>
<li><code>perf stat</code>, <code>perf sched record</code>;</li>
<li><code>hwloc-ps --cpuset</code>;</li>
<li><code>sysfs</code>：<code>/sys/devices/system/cpu/isolated</code>;</li>
<li>Prometheus Node Exporter：<code>node_cpu_seconds_total</code>、<code>node_softirqs_total</code>；</li>
<li>eBPF：<code>bcc/tools/runqslower</code>, <code>profile</code>。</li>
</ul>
<h3 id="54-分析工具"><a class="header" href="#54-分析工具">5.4 分析工具</a></h3>
<ul>
<li><code>turbostat</code>：SMT, C-states；</li>
<li><code>intel_pstate</code>, <code>cpupower frequency-info</code>；</li>
<li>Flame Graph (CPU &amp; off-CPU)；</li>
<li><code>numastat</code>, <code>numactl --show</code>。</li>
</ul>
<h3 id="55-性能调优建议"><a class="header" href="#55-性能调优建议">5.5 性能调优建议</a></h3>
<ul>
<li>关闭无关服务，隔离 housekeeping CPU；</li>
<li>禁用 Turbo Boost? → 视场景；</li>
<li>结合 HugePages 和 <code>RSS Locking</code>；</li>
<li>调整 <code>vm.dirty_ratio</code>, <code>sched_rt_runtime_us</code>;</li>
<li>使用 <code>tuned-profiles-virtual-host</code> / <code>realtime</code>；</li>
<li>定期校验 BIOS 设置（Hyper-Threading, C-State, Power Management）。</li>
</ul>
<h3 id="56-验证指标"><a class="header" href="#56-验证指标">5.6 验证指标</a></h3>
<ul>
<li>延迟 P99/P999；</li>
<li>jitter (标准差/variance)；</li>
<li>CPU util 中断比例；</li>
<li><code>schedstat</code> wait times；</li>
<li><code>vmstat</code> 中上下文切换；</li>
<li>性能对比表。</li>
</ul>
<h3 id="57-实战案例nfv-性能测试"><a class="header" href="#57-实战案例nfv-性能测试">5.7 实战案例：NFV 性能测试</a></h3>
<ul>
<li>使用 <code>DPDK TestPMD</code>：<code>--lcores='2@0,3@1'</code>；</li>
<li>场景：无 pinning vs pinning + <code>isolcpus</code>；</li>
<li>指标：pps、latency；</li>
<li>结果：记录 qgraph。</li>
</ul>
<h3 id="58-自动化测试框架"><a class="header" href="#58-自动化测试框架">5.8 自动化测试框架</a></h3>
<ul>
<li>Ansible/Terraform + <code>stress-ng</code>;</li>
<li>Jenkins pipeline：部署 → 执行 → 收集 → 报表；</li>
<li>Grafana dashboards；</li>
<li>结果存储：InfluxDB/Prometheus。</li>
</ul>
<hr />
<h2 id="模块六故障诊断与最佳实践"><a class="header" href="#模块六故障诊断与最佳实践">模块六：故障诊断与最佳实践</a></h2>
<h3 id="61-常见问题"><a class="header" href="#61-常见问题">6.1 常见问题</a></h3>
<div class="table-wrapper"><table><thead><tr><th>问题</th><th>现象</th><th>排查</th><th>解决</th></tr></thead><tbody>
<tr><td>Pinning 无效</td><td><code>taskset</code> 显示 CPU 仍迁移</td><td>检查 cgroup、libvirt XML</td><td>确认 <code>placement='static'</code>、<code>cpuset</code> 设置</td></tr>
<tr><td>性能下降</td><td>延迟升高</td><td>查看 SMT 配置, cache miss</td><td>调整 sibling 绑定、禁用 SMT</td></tr>
<tr><td>IRQ 抢占</td><td>cpu 使用高，中断多</td><td><code>cat /proc/interrupts</code></td><td>将 IRQ 绑定到 housekeeping CPU</td></tr>
<tr><td>NUMA 跨节点</td><td>numastat 显示 <code>other</code></td><td><code>numactl -H</code>, libvirt NUMA</td><td>调整 <code>numatune</code>, hugepages</td></tr>
<tr><td>Hotplug 混乱</td><td>新增 vCPU 未 pin</td><td><code>virsh vcpuinfo</code></td><td>重新配置 <code>cputune</code></td></tr>
<tr><td>Kubernetes pod 漂移</td><td>Pod 不在预期 CPU</td><td>CPU manager 非 static</td><td>开启 static，设置 Guaranteed</td></tr>
</tbody></table>
</div>
<h3 id="62-排查流程"><a class="header" href="#62-排查流程">6.2 排查流程</a></h3>
<ol>
<li>验证系统拓扑（<code>lscpu</code>, <code>hwloc-ls</code>）；</li>
<li>检查 Pinning 配置（XML、cgroup）；</li>
<li><code>taskset</code>/<code>ps</code> 查看实际运行 CPU；</li>
<li>分析日志（libvirtd, kubelet）；</li>
<li>收集性能指标；</li>
<li>调整策略、复测。</li>
</ol>
<h3 id="63-最佳实践清单"><a class="header" href="#63-最佳实践清单">6.3 最佳实践清单</a></h3>
<ul>
<li>规划 CPU 时先分析 workload → 线程数与绑定需求；</li>
<li>结合 NUMA/内存亲和，保证数据与 CPU 同节点；</li>
<li>为高优先级 workload 预留隔离核心 + 关闭 IRQ/housekeeping；</li>
<li>创建标准化 Pinning 模板（libvirt XML, OpenStack flavor, Kubernetes RuntimeClass）；</li>
<li>建立性能基线与测试脚本，持续验证；</li>
<li>自动化部署：Ansible playbook/Terraform module；</li>
<li>记录配置、测试结果，形成知识库。</li>
</ul>
<h3 id="64-安全与合规"><a class="header" href="#64-安全与合规">6.4 安全与合规</a></h3>
<ul>
<li>Pinning 过程中注意 VM 隔离，避免 CPU 共享导致安全隐患；</li>
<li>对应 CPU 缓存旁路漏洞（Meltdown/Spectre）影响；</li>
<li>结合内核安全策略（SELinux/AppArmor）；</li>
<li>在多租户场景中合理划分 CPU 资源，防止逃逸。</li>
</ul>
<h3 id="65-知识沉淀与团队协作"><a class="header" href="#65-知识沉淀与团队协作">6.5 知识沉淀与团队协作</a></h3>
<ul>
<li>建立 Pinning 模板库；</li>
<li>编写操作指南、FAQ、RCA 模板；</li>
<li>对团队进行培训，分享经验；</li>
<li>与 SRE/性能团队协作，持续优化；</li>
<li>关注开源社区、内核更新。</li>
</ul>
<h3 id="66-faq"><a class="header" href="#66-faq">6.6 FAQ</a></h3>
<ol>
<li><strong>未连接 Hyper-Threading 的 CPU Pinning 是否有效？</strong>
<ul>
<li>仍有效，需关注 core 对应拓扑；</li>
</ul>
</li>
<li><strong>如何防止 <code>irqbalance</code> 影响 Pinning？</strong>
<ul>
<li>关闭或通过 <code>IRQBALANCE_BANNED_CPUS</code> 控制；</li>
</ul>
</li>
<li><strong>实时应用如何配合 Pinning？</strong>
<ul>
<li>使用 <code>SCHED_FIFO</code> + <code>chrt</code> + <code>isolcpus</code>；</li>
</ul>
</li>
<li><strong>CPU Pinning 与 cgroup v2 是否兼容？</strong>
<ul>
<li>是，需通过 <code>cpuset.cpus</code> 配置；</li>
</ul>
</li>
<li><strong>性能提升能有多大？</strong>
<ul>
<li>视 workload，NFV/实时场景可降低延迟 30-70%，但需测试验证。</li>
</ul>
</li>
</ol>
<hr />
<h2 id="学习路径设计"><a class="header" href="#学习路径设计">学习路径设计</a></h2>
<div class="table-wrapper"><table><thead><tr><th>阶段</th><th>时间</th><th>目标</th><th>行动</th><th>产出</th></tr></thead><tbody>
<tr><td>阶段 0：准备</td><td>1 天</td><td>熟悉概念、拓扑工具</td><td>阅读笔记、搭建实验 VM</td><td>拓扑文档</td></tr>
<tr><td>阶段 1：基础实践</td><td>3 天</td><td>掌握 libvirt Pinning</td><td>配置 VM Pinning、测试性能</td><td>配置模板、测试报告</td></tr>
<tr><td>阶段 2：平台扩展</td><td>4 天</td><td>探索 OpenStack/K8s</td><td>配置 flavor、CPU Manager、容器 Pinning</td><td>平台配置清单</td></tr>
<tr><td>阶段 3：性能调优</td><td>5 天</td><td>建立测评体系</td><td>执行基准测试、调优</td><td>性能基线、指标仪表板</td></tr>
<tr><td>阶段 4：运维沉淀</td><td>持续</td><td>故障排查、最佳实践</td><td>建立文档、定期复盘</td><td>知识库、培训材料</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="实战案例"><a class="header" href="#实战案例">实战案例</a></h2>
<h3 id="案例一金融交易实时系统"><a class="header" href="#案例一金融交易实时系统">案例一：金融交易实时系统</a></h3>
<ul>
<li><strong>背景</strong>：交易撮合服务对延迟敏感，需 1ms 内响应。</li>
<li><strong>方案</strong>：
<ul>
<li>宿主机：禁用 SMT；<code>isolcpus=2-5</code>; HugePages;</li>
<li>VM：4 vCPU 绑定 CPU2-5；emulator 线程在 CPU0-1；</li>
<li>使用 <code>cyclictest</code>, <code>latencytop</code> 验证；</li>
<li>结果：延迟降低 35%，稳定性提升。</li>
</ul>
</li>
</ul>
<h3 id="案例二nfv-vrouter"><a class="header" href="#案例二nfv-vrouter">案例二：NFV vRouter</a></h3>
<ul>
<li><strong>背景</strong>：vRouter 需高吞吐。</li>
<li><strong>流程</strong>：
<ol>
<li>DPDK 线程绑定 CPU4-11；</li>
<li><code>irqbalance</code> 禁用；</li>
<li>SR-IOV VF 传递给 VM，IOThreads 分别绑定；</li>
<li><code>numactl --cpubind=0 --membind=0</code>;</li>
<li><code>tuned-profile realtime</code>；</li>
</ol>
<ul>
<li><strong>结果</strong>：吞吐提升 40%，丢包减少。</li>
</ul>
</li>
</ul>
<h3 id="案例三多租户数据库平台"><a class="header" href="#案例三多租户数据库平台">案例三：多租户数据库平台</a></h3>
<ul>
<li><strong>目标</strong>：不同租户数据库隔离。</li>
<li><strong>手段</strong>：
<ul>
<li>使用 OpenStack flavor <code>hw:cpu_policy=dedicated</code>;</li>
<li>each tenant pinned to dedicated cores;</li>
<li>监控 <code>node_cpu_seconds_total</code>；</li>
<li>异常自动报警。</li>
</ul>
</li>
</ul>
<h3 id="案例四kubernetes-实时应用"><a class="header" href="#案例四kubernetes-实时应用">案例四：Kubernetes 实时应用</a></h3>
<ul>
<li>使用 <code>PerformanceProfile</code> (OpenShift) + <code>RuntimeClass</code>；</li>
<li>pod spec:</li>
</ul>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: realtime-app
spec:
  runtimeClassName: performance-rt
  containers:
  - name: app
    image: realtime:latest
    resources:
      requests:
        cpu: "4"
        memory: "4Gi"
      limits:
        cpu: "4"
        memory: "4Gi"
    securityContext:
      capabilities:
        add: ["SYS_NICE"]
</code></pre>
<ul>
<li>验证 <code>cat /sys/fs/cgroup/cpuset/.../cpuset.cpus</code>。</li>
</ul>
<h3 id="案例五自动化测试流水线"><a class="header" href="#案例五自动化测试流水线">案例五：自动化测试流水线</a></h3>
<ul>
<li>使用 Ansible + <code>virsh</code> 部署多组 VM；</li>
<li><code>stress-ng --cpu 4 --metrics-brief</code>;</li>
<li>收集结果 → Grafana；</li>
<li>定期验证 Pinning 配置未漂移。</li>
</ul>
<hr />
<h2 id="学习成果验证标准"><a class="header" href="#学习成果验证标准">学习成果验证标准</a></h2>
<ol>
<li><strong>配置正确性</strong>：libvirt/OpenStack/Kubernetes 中的 Pinning 配置按预期生效（通过工具验证）；</li>
<li><strong>性能收益</strong>：完成至少一次对比测试，延迟下降或吞吐提升达到预设目标（例如 ≥ 20% 改善）；</li>
<li><strong>自动化能力</strong>：构建脚本或模板库，支持重复部署；</li>
<li><strong>监控与告警</strong>：上线 CPU 利用率、上下文切换、延迟等指标监控；</li>
<li><strong>故障预案</strong>：建立故障排查手册与回退方案，能够在模拟故障中恢复；</li>
<li><strong>文档沉淀</strong>：输出培训材料和操作指南，团队评审通过；</li>
<li><strong>安全合规</strong>：确保 CPU 隔离符合多租户安全要求。</li>
</ol>
<hr />
<h2 id="扩展资源与进阶建议"><a class="header" href="#扩展资源与进阶建议">扩展资源与进阶建议</a></h2>
<ul>
<li><strong>官方文档</strong>：
<ul>
<li>libvirt CPU Tuning：https://libvirt.org/formatdomain.html#elementsCPUTuning</li>
<li>OpenStack CPU pinning：https://docs.openstack.org/nova/latest/admin/cpu-topologies.html</li>
<li>Kubernetes CPU Manager：https://kubernetes.io/docs/tasks/administer-cluster/cpu-management-policies/</li>
</ul>
</li>
<li><strong>工具</strong>：
<ul>
<li><code>hwloc</code>, <code>numactl</code>, <code>tuned</code>, <code>cpupower</code>, <code>perf</code>, <code>bcc</code>；</li>
<li><code>cset shield</code>, <code>irqbalance</code>；</li>
</ul>
</li>
<li><strong>书籍/资料</strong>：
<ul>
<li>《Optimizing Linux Performance》</li>
<li>Red Hat Performance Tuning Guides</li>
<li>Intel/AMD CPU tuning whitepapers</li>
</ul>
</li>
<li><strong>社区</strong>：
<ul>
<li>OpenStack mailing lists, KubeCon talks on CPU manager</li>
<li>DPDK Summit、NFV workshops</li>
</ul>
</li>
<li><strong>实战建议</strong>：
<ol>
<li>与内核、硬件团队合作，确认 BIOS/固件设置；</li>
<li>构建 Pinning+NUMA+HugePages 联合优化方案；</li>
<li>持续跟踪内核 and hypervisor 更新带来的影响；</li>
<li>在业务上线前执行性能回归，记录基准线。</li>
</ol>
</li>
</ul>
<hr />
<h2 id="附录"><a class="header" href="#附录">附录</a></h2>
<h3 id="a-常用命令"><a class="header" href="#a-常用命令">A. 常用命令</a></h3>
<pre><code class="language-bash"># 查看 CPU 拓扑
lscpu -e=CPU,CORE,SOCKET,NODE
hwloc-ls --no-io --whole-system

# 设置进程 CPU 亲和性
taskset -cp 2,3 &lt;PID&gt;

# cset shield 隔离 CPU
sudo cset shield --cpu=2,3 --kthread=on

# 查看 NUMA
numastat

# virsh CPU pinning
virsh vcpupin vm1 0 2
virsh emulatorpin vm1 0-1

# KVM iothread pinning
virsh iothreadinfo vm1
virsh iothreadpin vm1 1 4-5
</code></pre>
<h3 id="b-核心文件位置"><a class="header" href="#b-核心文件位置">B. 核心文件位置</a></h3>
<ul>
<li><code>/etc/libvirt/qemu/&lt;domain&gt;.xml</code></li>
<li><code>/etc/nova/nova.conf</code></li>
<li><code>/var/lib/kubelet/cpu_manager_state</code></li>
<li><code>/sys/fs/cgroup/cpuset/...</code></li>
<li><code>/proc/interrupts</code>, <code>/proc/sched_debug</code></li>
</ul>
<h3 id="c-内核参数模板"><a class="header" href="#c-内核参数模板">C. 内核参数模板</a></h3>
<pre><code>GRUB_CMDLINE_LINUX="... isolcpus=2-7,10-15 nohz_full=2-7,10-15 rcu_nocbs=2-7,10-15 intel_pstate=disable"
</code></pre>
<h3 id="d-参考拓扑图示"><a class="header" href="#d-参考拓扑图示">D. 参考拓扑图示</a></h3>
<pre><code>Socket0 (NUMA0)
  Core0 [CPU0, CPU1]
  Core1 [CPU2, CPU3]
Socket1 (NUMA1)
  Core4 [CPU4, CPU5]
  Core5 [CPU6, CPU7]
</code></pre>
<h3 id="e-测试报告模板"><a class="header" href="#e-测试报告模板">E. 测试报告模板</a></h3>
<pre><code>测试场景：NFV vRouter
日期：2024-XX-XX
宿主机：Intel Xeon Gold 6130, 2 NUMA, 32 cores
VM 配置：4 vCPU, 8GiB RAM
Pinning 策略：vCPU → CPU2-5, emulator → CPU0-1
对比：未 Pinning vs Pinning
结果：
- TPS：2.1M → 2.9M (+38%)
- 延迟 P99：1.8ms → 1.1ms (-39%)
- 上下文切换：3200/s → 900/s
结论：Pinning 显著提升性能与稳定性。
</code></pre>
<blockquote>
<p>CPU Pinning 是性能优化的重要手段。只有深入理解硬件拓扑、调度机制，并结合实际业务持续测试调优，才能发挥其最大价值。</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../编程/云计算/cloud-init.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../编程/云计算/freerdp.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../编程/云计算/cloud-init.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../编程/云计算/freerdp.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../theme/segmentit.umd.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../theme/searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

