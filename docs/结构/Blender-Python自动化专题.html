<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Blender Python è‡ªåŠ¨åŒ–ä¸æ’ä»¶å¼€å‘ä¸“é¢˜ - å¼€å‘</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/pagetoc.css">
        <link rel="stylesheet" href="../theme/help-overlay.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">å¼€å‘</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="æœç´¢æœ¬ä¹¦å†…å®¹..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="blender-python-è‡ªåŠ¨åŒ–ä¸æ’ä»¶å¼€å‘ä¸“é¢˜"><a class="header" href="#blender-python-è‡ªåŠ¨åŒ–ä¸æ’ä»¶å¼€å‘ä¸“é¢˜">Blender Python è‡ªåŠ¨åŒ–ä¸æ’ä»¶å¼€å‘ä¸“é¢˜</a></h1>
<blockquote>
<p>ä»åŸºç¡€è„šæœ¬åˆ°å®Œæ•´æ’ä»¶å¼€å‘,æŒæ¡ Blender Python API,æå‡ç”Ÿäº§æ•ˆç‡ã€‚</p>
</blockquote>
<hr />
<h2 id="-ä¸“é¢˜å¯¼èˆª"><a class="header" href="#-ä¸“é¢˜å¯¼èˆª">ğŸ“– ä¸“é¢˜å¯¼èˆª</a></h2>
<ul>
<li><strong><a href="./Blender.html">è¿”å›ä¸»ç¬”è®°</a></strong> - Blender æ ¸å¿ƒå­¦ä¹ è·¯å¾„</li>
<li><strong>å½“å‰ä¸“é¢˜</strong>: Python è‡ªåŠ¨åŒ–ä¸æ’ä»¶å¼€å‘æ·±åº¦å®è·µ</li>
</ul>
<hr />
<h2 id="ä¸“é¢˜æ¦‚è¿°"><a class="header" href="#ä¸“é¢˜æ¦‚è¿°">ä¸“é¢˜æ¦‚è¿°</a></h2>
<h3 id="å­¦ä¹ ç›®æ ‡"><a class="header" href="#å­¦ä¹ ç›®æ ‡">å­¦ä¹ ç›®æ ‡</a></h3>
<p>âœ… æŒæ¡ Blender Python API çš„æ ¸å¿ƒæ¨¡å—ä¸ä½¿ç”¨æ–¹æ³•
âœ… èƒ½å¤Ÿç¼–å†™å®ç”¨çš„è‡ªåŠ¨åŒ–è„šæœ¬è§£å†³é‡å¤æ€§ä»»åŠ¡
âœ… å¼€å‘å®Œæ•´çš„ Blender æ’ä»¶å¹¶é›†æˆåˆ°å·¥ä½œæµ
âœ… ç†è§£æ’ä»¶å‘å¸ƒä¸ç‰ˆæœ¬ç®¡ç†çš„æœ€ä½³å®è·µ</p>
<h3 id="é€‚ç”¨äººç¾¤"><a class="header" href="#é€‚ç”¨äººç¾¤">é€‚ç”¨äººç¾¤</a></h3>
<ul>
<li>å®Œæˆ Blender åŸºç¡€æ“ä½œå­¦ä¹ çš„ç”¨æˆ·</li>
<li>å…·å¤‡ Python åŸºç¡€çŸ¥è¯†çš„å¼€å‘è€…</li>
<li>å¸Œæœ›æå‡å·¥ä½œæ•ˆç‡çš„æŠ€æœ¯ç¾æœ¯</li>
<li>éœ€è¦å®šåˆ¶åŒ–å·¥å…·çš„é¡¹ç›®å›¢é˜Ÿ</li>
</ul>
<hr />
<h2 id="ç¬¬ä¸€ç« blender-python-api-åŸºç¡€"><a class="header" href="#ç¬¬ä¸€ç« blender-python-api-åŸºç¡€">ç¬¬ä¸€ç« :Blender Python API åŸºç¡€</a></h2>
<h3 id="11-æ ¸å¿ƒæ¨¡å—æ¦‚è§ˆ"><a class="header" href="#11-æ ¸å¿ƒæ¨¡å—æ¦‚è§ˆ">1.1 æ ¸å¿ƒæ¨¡å—æ¦‚è§ˆ</a></h3>
<p><strong>ä¸‰å¤§æ ¸å¿ƒæ¨¡å—</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody>
<tr><td><code>bpy.data</code></td><td>è®¿é—® Blender æ•°æ®å—</td><td>è¯»å–/ä¿®æ”¹å¯¹è±¡ã€æè´¨ã€çº¹ç†ç­‰</td></tr>
<tr><td><code>bpy.context</code></td><td>å½“å‰ä¸Šä¸‹æ–‡</td><td>è·å–é€‰ä¸­å¯¹è±¡ã€æ´»åŠ¨åœºæ™¯ç­‰</td></tr>
<tr><td><code>bpy.ops</code></td><td>æ‰§è¡Œæ“ä½œç¬¦</td><td>è°ƒç”¨ Blender å†…ç½®å‘½ä»¤</td></tr>
</tbody></table>
</div>
<p><strong>è¾…åŠ©æ¨¡å—</strong>:</p>
<ul>
<li><code>bpy.types</code>: å®šä¹‰æ•°æ®ç±»å‹(Objectã€Meshã€Material ç­‰)</li>
<li><code>bpy.props</code>: å®šä¹‰è‡ªå®šä¹‰å±æ€§</li>
<li><code>bpy.utils</code>: å·¥å…·å‡½æ•°(æ³¨å†Œã€é¢„è§ˆå›¾ç­‰)</li>
</ul>
<h3 id="12-è„šæœ¬æ‰§è¡Œæ–¹å¼"><a class="header" href="#12-è„šæœ¬æ‰§è¡Œæ–¹å¼">1.2 è„šæœ¬æ‰§è¡Œæ–¹å¼</a></h3>
<p><strong>æ–¹å¼ä¸€:Text Editor</strong></p>
<pre><code class="language-python"># åœ¨ Blender å†…éƒ¨ç¼–è¾‘å™¨ç¼–å†™è„šæœ¬
# å¿«æ·é”®: Alt + P è¿è¡Œ
import bpy

print("Hello from Blender!")
</code></pre>
<p><strong>æ–¹å¼äºŒ:å‘½ä»¤è¡Œæ‰§è¡Œ</strong></p>
<pre><code class="language-bash"># åå°æ¨¡å¼æ‰§è¡Œè„šæœ¬
blender --background --python script.py

# å‰å°æ¨¡å¼æ‰§è¡Œ(æœ‰GUI)
blender --python script.py
</code></pre>
<p><strong>æ–¹å¼ä¸‰:æ’ä»¶å½¢å¼</strong></p>
<pre><code class="language-python"># __init__.py
bl_info = {
    "name": "My Addon",
    "version": (1, 0, 0),
    "blender": (3, 0, 0),
}

def register():
    print("Addon registered")

def unregister():
    print("Addon unregistered")
</code></pre>
<hr />
<h2 id="ç¬¬äºŒç« å®ç”¨è„šæœ¬ç¤ºä¾‹"><a class="header" href="#ç¬¬äºŒç« å®ç”¨è„šæœ¬ç¤ºä¾‹">ç¬¬äºŒç« :å®ç”¨è„šæœ¬ç¤ºä¾‹</a></h2>
<h3 id="21-æ‰¹é‡å¯¼å…¥å¯¼å‡º"><a class="header" href="#21-æ‰¹é‡å¯¼å…¥å¯¼å‡º">2.1 æ‰¹é‡å¯¼å…¥/å¯¼å‡º</a></h3>
<p><strong>æ‰¹é‡å¯¼å…¥ FBX æ–‡ä»¶</strong>:</p>
<pre><code class="language-python">import bpy
from pathlib import Path

# è¾“å…¥ç›®å½•
input_dir = Path("D:/Models/FBX")

# éå†æ‰€æœ‰ FBX æ–‡ä»¶
for fbx_file in input_dir.glob("*.fbx"):
    print(f"Importing: {fbx_file.name}")

    # å¯¼å…¥ FBX
    bpy.ops.import_scene.fbx(filepath=str(fbx_file))

    # è‡ªå®šä¹‰å¤„ç†
    for obj in bpy.context.selected_objects:
        # åº”ç”¨å˜æ¢
        bpy.ops.object.transform_apply(
            location=True,
            rotation=True,
            scale=True
        )

        # ç§»åŠ¨åˆ°åŸç‚¹
        obj.location = (0, 0, 0)
</code></pre>
<p><strong>æ‰¹é‡å¯¼å‡ºé€‰ä¸­å¯¹è±¡ä¸º FBX</strong>:</p>
<pre><code class="language-python">import bpy
from pathlib import Path

output_dir = Path("D:/Export")
output_dir.mkdir(exist_ok=True)

for obj in bpy.context.selected_objects:
    # å–æ¶ˆå…¨é€‰
    bpy.ops.object.select_all(action='DESELECT')

    # é€‰ä¸­å½“å‰å¯¹è±¡
    obj.select_set(True)
    bpy.context.view_layer.objects.active = obj

    # å¯¼å‡º
    filepath = output_dir / f"{obj.name}.fbx"
    bpy.ops.export_scene.fbx(
        filepath=str(filepath),
        use_selection=True,
        apply_unit_scale=True,
        bake_anim=False,
    )

    print(f"Exported: {obj.name}")
</code></pre>
<h3 id="22-æ‰¹é‡é‡å‘½åä¸æ¸…ç†"><a class="header" href="#22-æ‰¹é‡é‡å‘½åä¸æ¸…ç†">2.2 æ‰¹é‡é‡å‘½åä¸æ¸…ç†</a></h3>
<p><strong>è§„èŒƒåŒ–å¯¹è±¡å‘½å</strong>:</p>
<pre><code class="language-python">import bpy
import re

# å‘½åè§„åˆ™
def standardize_name(name):
    # ç§»é™¤ç©ºæ ¼,è½¬å¤§å†™
    name = name.replace(' ', '_').upper()

    # ç§»é™¤éæ³•å­—ç¬¦
    name = re.sub(r'[^A-Z0-9_]', '', name)

    return name

# å¤„ç†æ‰€æœ‰ç½‘æ ¼å¯¹è±¡
for obj in bpy.data.objects:
    if obj.type == 'MESH':
        old_name = obj.name
        new_name = standardize_name(old_name)
        obj.name = new_name
        print(f"{old_name} -&gt; {new_name}")
</code></pre>
<p><strong>æ¸…ç†æœªä½¿ç”¨æ•°æ®</strong>:</p>
<pre><code class="language-python">import bpy

# æ¸…ç†å­¤ç«‹æ•°æ®å—
bpy.ops.outliner.orphans_purge(
    do_local_ids=True,
    do_linked_ids=True,
    do_recursive=True
)

# ç§»é™¤é‡å¤é¡¶ç‚¹
for obj in bpy.data.objects:
    if obj.type == 'MESH':
        bpy.context.view_layer.objects.active = obj
        bpy.ops.object.mode_set(mode='EDIT')
        bpy.ops.mesh.select_all(action='SELECT')
        bpy.ops.mesh.remove_doubles(threshold=0.0001)
        bpy.ops.object.mode_set(mode='OBJECT')
</code></pre>
<h3 id="23-æ‰¹é‡æ¸²æŸ“"><a class="header" href="#23-æ‰¹é‡æ¸²æŸ“">2.3 æ‰¹é‡æ¸²æŸ“</a></h3>
<p><strong>å¤šè§†å›¾å±‚æ¸²æŸ“</strong>:</p>
<pre><code class="language-python">import bpy
from pathlib import Path

scene = bpy.context.scene
render = scene.render

# è®¾ç½®æ¸²æŸ“å¼•æ“
render.engine = 'CYCLES'
render.image_settings.file_format = 'PNG'

# è¾“å‡ºç›®å½•
output_dir = Path("D:/Renders")
output_dir.mkdir(exist_ok=True)

# éå†æ‰€æœ‰è§†å›¾å±‚
for view_layer in scene.view_layers:
    # æ¿€æ´»è§†å›¾å±‚
    scene.view_layers.active = view_layer

    # è®¾ç½®è¾“å‡ºè·¯å¾„
    render.filepath = str(output_dir / f"{view_layer.name}_")

    # æ¸²æŸ“
    bpy.ops.render.render(write_still=True)

    print(f"Rendered: {view_layer.name}")
</code></pre>
<p><strong>å¤šæ‘„åƒæœºæ‰¹é‡æ¸²æŸ“</strong>:</p>
<pre><code class="language-python">import bpy

scene = bpy.context.scene

# è·å–æ‰€æœ‰æ‘„åƒæœº
cameras = [obj for obj in bpy.data.objects if obj.type == 'CAMERA']

for camera in cameras:
    # è®¾ç½®æ´»åŠ¨æ‘„åƒæœº
    scene.camera = camera

    # è®¾ç½®è¾“å‡ºè·¯å¾„
    scene.render.filepath = f"//renders/{camera.name}_"

    # æ¸²æŸ“
    bpy.ops.render.render(write_still=True)

    print(f"Rendered from: {camera.name}")
</code></pre>
<hr />
<h2 id="ç¬¬ä¸‰ç« å®Œæ•´æ’ä»¶å¼€å‘æ¡ˆä¾‹"><a class="header" href="#ç¬¬ä¸‰ç« å®Œæ•´æ’ä»¶å¼€å‘æ¡ˆä¾‹">ç¬¬ä¸‰ç« :å®Œæ•´æ’ä»¶å¼€å‘æ¡ˆä¾‹</a></h2>
<h3 id="31-èµ„äº§å‘½åä¸å¯¼å‡ºåŠ©æ‰‹"><a class="header" href="#31-èµ„äº§å‘½åä¸å¯¼å‡ºåŠ©æ‰‹">3.1 èµ„äº§å‘½åä¸å¯¼å‡ºåŠ©æ‰‹</a></h3>
<p><strong>éœ€æ±‚åˆ†æ</strong>:</p>
<ol>
<li>æ£€æŸ¥å¯¹è±¡å‘½åæ˜¯å¦ç¬¦åˆè§„èŒƒ</li>
<li>è‡ªåŠ¨ä¿®å¤ä¸è§„èŒƒå‘½å</li>
<li>æ‰¹é‡å¯¼å‡ºé€‰ä¸­å¯¹è±¡ä¸º FBX</li>
<li>ç”Ÿæˆç¼©ç•¥å›¾</li>
</ol>
<p><strong>æ’ä»¶ç»“æ„</strong>:</p>
<pre><code>AssetExporter/
â”œâ”€â”€ __init__.py         # æ’ä»¶å…¥å£
â”œâ”€â”€ operators.py        # æ“ä½œç¬¦å®šä¹‰
â”œâ”€â”€ panels.py           # UI é¢æ¿
â””â”€â”€ utils.py            # å·¥å…·å‡½æ•°
</code></pre>
<p><strong><strong>init</strong>.py</strong>:</p>
<pre><code class="language-python">bl_info = {
    "name": "Asset Exporter Pro",
    "author": "Your Name",
    "version": (1, 0, 0),
    "blender": (3, 6, 0),
    "location": "View3D &gt; Sidebar &gt; Asset Tools",
    "description": "æ‰¹é‡å¯¼å‡ºèµ„äº§å¹¶ç”Ÿæˆç¼©ç•¥å›¾",
    "category": "Import-Export",
}

import bpy
from . import operators, panels

classes = (
    operators.ASSET_OT_check_naming,
    operators.ASSET_OT_fix_naming,
    operators.ASSET_OT_batch_export,
    panels.ASSET_PT_main_panel,
)

def register():
    for cls in classes:
        bpy.utils.register_class(cls)

    # æ³¨å†Œå±æ€§
    bpy.types.Scene.asset_output_dir = bpy.props.StringProperty(
        name="Output Directory",
        subtype='DIR_PATH',
        default="//exports/",
    )

def unregister():
    for cls in reversed(classes):
        bpy.utils.unregister_class(cls)

    del bpy.types.Scene.asset_output_dir

if __name__ == "__main__":
    register()
</code></pre>
<p><strong>operators.py</strong>:</p>
<pre><code class="language-python">import bpy
import re
from pathlib import Path

# å‘½åè§„åˆ™
NAMING_PATTERN = re.compile(r"^(CHR|PROP|ENV)_[A-Za-z0-9]+_[0-9]{3}$")

class ASSET_OT_check_naming(bpy.types.Operator):
    """æ£€æŸ¥å¯¹è±¡å‘½åè§„èŒƒ"""
    bl_idname = "asset.check_naming"
    bl_label = "æ£€æŸ¥å‘½å"
    bl_options = {'REGISTER', 'UNDO'}

    def execute(self, context):
        invalid_objects = []

        for obj in bpy.data.objects:
            if obj.type in {'MESH', 'EMPTY', 'ARMATURE'}:
                if not NAMING_PATTERN.match(obj.name):
                    invalid_objects.append(obj.name)

        if invalid_objects:
            self.report({'WARNING'},
                       f"å‘ç° {len(invalid_objects)} ä¸ªå‘½åä¸è§„èŒƒçš„å¯¹è±¡")
        else:
            self.report({'INFO'}, "æ‰€æœ‰å¯¹è±¡å‘½åè§„èŒƒ")

        return {'FINISHED'}

class ASSET_OT_fix_naming(bpy.types.Operator):
    """è‡ªåŠ¨ä¿®å¤å‘½å"""
    bl_idname = "asset.fix_naming"
    bl_label = "è‡ªåŠ¨ä¿®å¤"
    bl_options = {'REGISTER', 'UNDO'}

    def execute(self, context):
        fixed_count = 0

        for obj in bpy.data.objects:
            if not NAMING_PATTERN.match(obj.name):
                # æ ¹æ®ç±»å‹ç¡®å®šå‰ç¼€
                prefix = "PROP"
                if obj.type == 'ARMATURE':
                    prefix = 'CHR'
                elif obj.type == 'EMPTY':
                    prefix = 'ENV'

                # æ¸…ç†åç§°
                clean_name = re.sub(r'[^A-Za-z0-9]', '_', obj.name)
                new_name = f"{prefix}_{clean_name}_001"

                obj.name = new_name
                fixed_count += 1

        self.report({'INFO'}, f"ä¿®å¤äº† {fixed_count} ä¸ªå¯¹è±¡")
        return {'FINISHED'}

class ASSET_OT_batch_export(bpy.types.Operator):
    """æ‰¹é‡å¯¼å‡º"""
    bl_idname = "asset.batch_export"
    bl_label = "æ‰¹é‡å¯¼å‡º FBX"
    bl_options = {'REGISTER'}

    def execute(self, context):
        output_dir = Path(bpy.path.abspath(context.scene.asset_output_dir))
        output_dir.mkdir(parents=True, exist_ok=True)

        exported_count = 0

        for obj in context.selected_objects:
            # å¯¼å‡º FBX
            filepath = output_dir / f"{obj.name}.fbx"

            bpy.ops.object.select_all(action='DESELECT')
            obj.select_set(True)
            context.view_layer.objects.active = obj

            bpy.ops.export_scene.fbx(
                filepath=str(filepath),
                use_selection=True,
                apply_unit_scale=True,
            )

            # ç”Ÿæˆç¼©ç•¥å›¾
            thumb_path = output_dir / f"{obj.name}_thumb.png"
            bpy.ops.view3d.camera_to_view_selected()
            context.scene.render.filepath = str(thumb_path)
            bpy.ops.render.render(write_still=True)

            exported_count += 1

        self.report({'INFO'}, f"å¯¼å‡ºäº† {exported_count} ä¸ªèµ„äº§")
        return {'FINISHED'}
</code></pre>
<p><strong>panels.py</strong>:</p>
<pre><code class="language-python">import bpy

class ASSET_PT_main_panel(bpy.types.Panel):
    """èµ„äº§å·¥å…·ä¸»é¢æ¿"""
    bl_label = "Asset Exporter Pro"
    bl_idname = "ASSET_PT_main_panel"
    bl_space_type = 'VIEW_3D'
    bl_region_type = 'UI'
    bl_category = 'Asset Tools'

    def draw(self, context):
        layout = self.layout
        scene = context.scene

        # å‘½åæ£€æŸ¥åŒºåŸŸ
        box = layout.box()
        box.label(text="å‘½åè§„èŒƒæ£€æŸ¥", icon='FILE_TEXT')
        box.operator("asset.check_naming", icon='CHECKMARK')
        box.operator("asset.fix_naming", icon='BRUSH_DATA')

        # å¯¼å‡ºåŒºåŸŸ
        box = layout.box()
        box.label(text="æ‰¹é‡å¯¼å‡º", icon='EXPORT')
        box.prop(scene, "asset_output_dir")
        box.operator("asset.batch_export", icon='EXPORT')

        # ç»Ÿè®¡ä¿¡æ¯
        selected_count = len(context.selected_objects)
        layout.label(text=f"é€‰ä¸­å¯¹è±¡: {selected_count}")
</code></pre>
<hr />
<h2 id="ç¬¬å››ç« é«˜çº§æŠ€å·§"><a class="header" href="#ç¬¬å››ç« é«˜çº§æŠ€å·§">ç¬¬å››ç« :é«˜çº§æŠ€å·§</a></h2>
<h3 id="41-è‡ªå®šä¹‰å±æ€§"><a class="header" href="#41-è‡ªå®šä¹‰å±æ€§">4.1 è‡ªå®šä¹‰å±æ€§</a></h3>
<p><strong>å®šä¹‰è‡ªå®šä¹‰å±æ€§</strong>:</p>
<pre><code class="language-python">import bpy
from bpy.props import *

class MyAddonProperties(bpy.types.PropertyGroup):
    my_string: StringProperty(
        name="åç§°",
        description="æè¿°æ–‡æœ¬",
        default="é»˜è®¤å€¼",
    )

    my_int: IntProperty(
        name="æ•´æ•°",
        min=0,
        max=100,
        default=50,
    )

    my_float: FloatProperty(
        name="æµ®ç‚¹æ•°",
        min=0.0,
        max=1.0,
        default=0.5,
        precision=2,
    )

    my_bool: BoolProperty(
        name="å¸ƒå°”å€¼",
        default=False,
    )

    my_enum: EnumProperty(
        name="æšä¸¾",
        items=[
            ('OPTION1', "é€‰é¡¹ 1", "æè¿° 1"),
            ('OPTION2', "é€‰é¡¹ 2", "æè¿° 2"),
        ],
        default='OPTION1',
    )

def register():
    bpy.utils.register_class(MyAddonProperties)
    bpy.types.Scene.my_addon_props = bpy.props.PointerProperty(
        type=MyAddonProperties
    )

def unregister():
    del bpy.types.Scene.my_addon_props
    bpy.utils.unregister_class(MyAddonProperties)
</code></pre>
<h3 id="42-æ¨¡æ€æ“ä½œç¬¦modal-operator"><a class="header" href="#42-æ¨¡æ€æ“ä½œç¬¦modal-operator">4.2 æ¨¡æ€æ“ä½œç¬¦(Modal Operator)</a></h3>
<p><strong>äº¤äº’å¼æ“ä½œç¬¦ç¤ºä¾‹</strong>:</p>
<pre><code class="language-python">import bpy

class MODAL_OT_example(bpy.types.Operator):
    """æ¨¡æ€æ“ä½œç¬¦ç¤ºä¾‹(æŒ‰ä½é¼ æ ‡æ‹–åŠ¨)"""
    bl_idname = "modal.example"
    bl_label = "Modal Example"

    def modal(self, context, event):
        if event.type == 'MOUSEMOVE':
            # é¼ æ ‡ç§»åŠ¨æ—¶æ‰§è¡Œ
            delta = event.mouse_x - self.init_mouse_x
            context.active_object.location.x = self.init_loc_x + delta * 0.01

        elif event.type == 'LEFTMOUSE':
            # é¼ æ ‡é‡Šæ”¾,å®Œæˆæ“ä½œ
            return {'FINISHED'}

        elif event.type in {'RIGHTMOUSE', 'ESC'}:
            # å–æ¶ˆæ“ä½œ
            context.active_object.location.x = self.init_loc_x
            return {'CANCELLED'}

        return {'RUNNING_MODAL'}

    def invoke(self, context, event):
        if context.active_object is None:
            self.report({'WARNING'}, "No active object")
            return {'CANCELLED'}

        # è®°å½•åˆå§‹çŠ¶æ€
        self.init_mouse_x = event.mouse_x
        self.init_loc_x = context.active_object.location.x

        # è¿›å…¥æ¨¡æ€æ¨¡å¼
        context.window_manager.modal_handler_add(self)
        return {'RUNNING_MODAL'}

def register():
    bpy.utils.register_class(MODAL_OT_example)

def unregister():
    bpy.utils.unregister_class(MODAL_OT_example)
</code></pre>
<h3 id="43-é”™è¯¯å¤„ç†ä¸æ—¥å¿—"><a class="header" href="#43-é”™è¯¯å¤„ç†ä¸æ—¥å¿—">4.3 é”™è¯¯å¤„ç†ä¸æ—¥å¿—</a></h3>
<p><strong>å¥å£®çš„é”™è¯¯å¤„ç†</strong>:</p>
<pre><code class="language-python">import bpy
import logging

# é…ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

class ROBUST_OT_export(bpy.types.Operator):
    """å¥å£®çš„å¯¼å‡ºæ“ä½œç¬¦"""
    bl_idname = "robust.export"
    bl_label = "Robust Export"

    def execute(self, context):
        try:
            # å°è¯•å¯¼å‡º
            self.export_selected(context)
            self.report({'INFO'}, "å¯¼å‡ºæˆåŠŸ")
            return {'FINISHED'}

        except FileNotFoundError as e:
            logger.error(f"æ–‡ä»¶æœªæ‰¾åˆ°: {e}")
            self.report({'ERROR'}, "è¾“å‡ºç›®å½•ä¸å­˜åœ¨")
            return {'CANCELLED'}

        except PermissionError as e:
            logger.error(f"æƒé™é”™è¯¯: {e}")
            self.report({'ERROR'}, "æ²¡æœ‰å†™å…¥æƒé™")
            return {'CANCELLED'}

        except Exception as e:
            logger.exception("æœªçŸ¥é”™è¯¯")
            self.report({'ERROR'}, f"å¯¼å‡ºå¤±è´¥: {str(e)}")
            return {'CANCELLED'}

    def export_selected(self, context):
        # å¯¼å‡ºé€»è¾‘
        for obj in context.selected_objects:
            filepath = f"//exports/{obj.name}.fbx"
            bpy.ops.export_scene.fbx(
                filepath=filepath,
                use_selection=True,
            )
</code></pre>
<hr />
<h2 id="ç¬¬äº”ç« æ’ä»¶å‘å¸ƒä¸ç»´æŠ¤"><a class="header" href="#ç¬¬äº”ç« æ’ä»¶å‘å¸ƒä¸ç»´æŠ¤">ç¬¬äº”ç« :æ’ä»¶å‘å¸ƒä¸ç»´æŠ¤</a></h2>
<h3 id="51-ç‰ˆæœ¬ç®¡ç†"><a class="header" href="#51-ç‰ˆæœ¬ç®¡ç†">5.1 ç‰ˆæœ¬ç®¡ç†</a></h3>
<p><strong>bl_info ç‰ˆæœ¬å·è§„èŒƒ</strong>:</p>
<pre><code class="language-python">bl_info = {
    "name": "My Awesome Addon",
    "version": (1, 2, 3),  # ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·
    "blender": (3, 6, 0),  # æœ€ä½ Blender ç‰ˆæœ¬
    "location": "View3D &gt; Sidebar &gt; My Tab",
    "description": "ç®€çŸ­æè¿°åŠŸèƒ½",
    "doc_url": "https://docs.example.com",
    "tracker_url": "https://github.com/user/repo/issues",
    "category": "Object",
}
</code></pre>
<h3 id="52-æ‰“åŒ…ä¸åˆ†å‘"><a class="header" href="#52-æ‰“åŒ…ä¸åˆ†å‘">5.2 æ‰“åŒ…ä¸åˆ†å‘</a></h3>
<p><strong>æ’ä»¶ç›®å½•ç»“æ„</strong>:</p>
<pre><code>my_addon/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ operators.py
â”œâ”€â”€ panels.py
â”œâ”€â”€ utils.py
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
</code></pre>
<p><strong>æ‰“åŒ…ä¸º ZIP</strong>:</p>
<pre><code class="language-bash">cd addons
zip -r my_addon.zip my_addon/
</code></pre>
<h3 id="53-æ›´æ–°æ—¥å¿—ç¤ºä¾‹"><a class="header" href="#53-æ›´æ–°æ—¥å¿—ç¤ºä¾‹">5.3 æ›´æ–°æ—¥å¿—ç¤ºä¾‹</a></h3>
<pre><code class="language-markdown"># Changelog

## [1.2.0] - 2025-01-06
### Added
- æ–°å¢æ‰¹é‡é‡å‘½ååŠŸèƒ½
- æ”¯æŒå¯¼å‡ºç¼©ç•¥å›¾

### Changed
- ä¼˜åŒ–å¯¼å‡ºæ€§èƒ½
- æ”¹è¿› UI å¸ƒå±€

### Fixed
- ä¿®å¤å¯¼å‡ºè·¯å¾„é”™è¯¯
- ä¿®å¤å‘½åæ£€æŸ¥ Bug

## [1.1.0] - 2025-01-01
...
</code></pre>
<hr />
<h2 id="é™„å½•api-é€ŸæŸ¥"><a class="header" href="#é™„å½•api-é€ŸæŸ¥">é™„å½•:API é€ŸæŸ¥</a></h2>
<h3 id="å¸¸ç”¨-bpyops-æ“ä½œ"><a class="header" href="#å¸¸ç”¨-bpyops-æ“ä½œ">å¸¸ç”¨ bpy.ops æ“ä½œ</a></h3>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œ</th><th>åŠŸèƒ½</th></tr></thead><tbody>
<tr><td><code>bpy.ops.object.select_all(action='DESELECT')</code></td><td>å–æ¶ˆå…¨é€‰</td></tr>
<tr><td><code>bpy.ops.object.transform_apply(location=True)</code></td><td>åº”ç”¨å˜æ¢</td></tr>
<tr><td><code>bpy.ops.mesh.remove_doubles()</code></td><td>ç§»é™¤é‡å¤é¡¶ç‚¹</td></tr>
<tr><td><code>bpy.ops.render.render(write_still=True)</code></td><td>æ¸²æŸ“å¹¶ä¿å­˜</td></tr>
<tr><td><code>bpy.ops.export_scene.fbx()</code></td><td>å¯¼å‡º FBX</td></tr>
</tbody></table>
</div>
<h3 id="å¸¸ç”¨-bpydata-è®¿é—®"><a class="header" href="#å¸¸ç”¨-bpydata-è®¿é—®">å¸¸ç”¨ bpy.data è®¿é—®</a></h3>
<div class="table-wrapper"><table><thead><tr><th>è®¿é—®</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td><code>bpy.data.objects</code></td><td>æ‰€æœ‰å¯¹è±¡</td></tr>
<tr><td><code>bpy.data.meshes</code></td><td>æ‰€æœ‰ç½‘æ ¼æ•°æ®</td></tr>
<tr><td><code>bpy.data.materials</code></td><td>æ‰€æœ‰æè´¨</td></tr>
<tr><td><code>bpy.data.scenes</code></td><td>æ‰€æœ‰åœºæ™¯</td></tr>
<tr><td><code>bpy.data.collections</code></td><td>æ‰€æœ‰é›†åˆ</td></tr>
</tbody></table>
</div>
<hr />
<p><strong>ä¸“é¢˜ç‰ˆæœ¬</strong>: v1.0
<strong>æœ€åæ›´æ–°</strong>: 2025-01-06
<strong>ä½œè€…</strong>: Claude Code Tech Note Generator
<strong>è®¸å¯</strong>: CC BY-SA 4.0</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ç»“æ„/Blender-GeometryNodesä¸“é¢˜.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../ç»“æ„/Blender-Shaderæè´¨ä¸“é¢˜.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ç»“æ„/Blender-GeometryNodesä¸“é¢˜.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../ç»“æ„/Blender-Shaderæè´¨ä¸“é¢˜.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../theme/segmentit.umd.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../theme/searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/pagetoc.js"></script>



    </div>
    </body>
</html>

